import{_ as s,o as a,c as n,a as l}from"./app.1e6146c3.js";const D=JSON.parse('{"title":"TCP + ELK \u65E5\u5FD7\u6536\u96C6","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u914D\u7F6ELogstash","slug":"\u914D\u7F6Elogstash"},{"level":2,"title":"\u5199\u5165\u6D4B\u8BD5\u4FE1\u606F","slug":"\u5199\u5165\u6D4B\u8BD5\u4FE1\u606F"},{"level":2,"title":"\u542F\u52A8\u76F8\u5173\u670D\u52A1","slug":"\u542F\u52A8\u76F8\u5173\u670D\u52A1"},{"level":2,"title":"\u67E5\u770B\u670D\u52A1\u72B6\u6001","slug":"\u67E5\u770B\u670D\u52A1\u72B6\u6001"},{"level":3,"title":"ES \u72B6\u6001","slug":"es-\u72B6\u6001"},{"level":3,"title":"Kibana \u72B6\u6001","slug":"kibana-\u72B6\u6001"}],"relativePath":"CloudNative/ELFK/TCP-ELK\u65E5\u5FD7\u6536\u96C6.md","lastUpdated":1657272051000}'),p={name:"CloudNative/ELFK/TCP-ELK\u65E5\u5FD7\u6536\u96C6.md"},o=l(`<h1 id="tcp-elk-\u65E5\u5FD7\u6536\u96C6" tabindex="-1">TCP + ELK \u65E5\u5FD7\u6536\u96C6 <a class="header-anchor" href="#tcp-elk-\u65E5\u5FD7\u6536\u96C6" aria-hidden="true">#</a></h1><h2 id="\u914D\u7F6Elogstash" tabindex="-1">\u914D\u7F6E<code>Logstash</code> <a class="header-anchor" href="#\u914D\u7F6Elogstash" aria-hidden="true">#</a></h2><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># vim /usr/local/logstash-7.7.1/config/tcp2es.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C98A7D;">input {</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">tcp {</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">type =&gt; &quot;tcp&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">port =&gt; 6789</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">mode =&gt; &quot;server&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  }</span></span>
<span class="line"><span style="color:#DBD7CA;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C98A7D;">output {</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">elasticsearch {</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">hosts =&gt; [&quot;192.168.1.6:9200&quot;]</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">index =&gt; &quot;tcp-log-%{+YYYY.MM}&quot;</span><span style="color:#DBD7CA;">    </span></span>
<span class="line"><span style="color:#DBD7CA;">  }</span></span>
<span class="line"><span style="color:#DBD7CA;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># vim /usr/local/logstash-7.7.1/config/tcp2es.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B56959;">input {</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B56959;">tcp {</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">type =&gt; &quot;tcp&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">port =&gt; 6789</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">mode =&gt; &quot;server&quot;</span></span>
<span class="line"><span style="color:#393A34;">  }</span></span>
<span class="line"><span style="color:#393A34;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B56959;">output {</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B56959;">elasticsearch {</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">hosts =&gt; [&quot;192.168.1.6:9200&quot;]</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">index =&gt; &quot;tcp-log-%{+YYYY.MM}&quot;</span><span style="color:#393A34;">    </span></span>
<span class="line"><span style="color:#393A34;">  }</span></span>
<span class="line"><span style="color:#393A34;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5199\u5165\u6D4B\u8BD5\u4FE1\u606F" tabindex="-1">\u5199\u5165\u6D4B\u8BD5\u4FE1\u606F <a class="header-anchor" href="#\u5199\u5165\u6D4B\u8BD5\u4FE1\u606F" aria-hidden="true">#</a></h2><p>\u4F7F\u7528<code>nc</code>\u547D\u4EE4\u5411\u4E3B\u673A\u7684<code>tcp:6789</code>\u7AEF\u53E3\u53D1\u9001\u6D4B\u8BD5\u4FE1\u606F:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@master </span><span style="color:#CB7676;">~</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;TEST TCP MESSAGES&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> nc 192.168.1.6 6789</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@master </span><span style="color:#CB7676;">~</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> nc 192.168.1.6 6789 </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;"> /etc/rsyslog.conf</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@master </span><span style="color:#AB5959;">~</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;TEST TCP MESSAGES&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> nc 192.168.1.6 6789</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@master </span><span style="color:#AB5959;">~</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> nc 192.168.1.6 6789 </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> /etc/rsyslog.conf</span></span>
<span class="line"></span></code></pre></div><h2 id="\u542F\u52A8\u76F8\u5173\u670D\u52A1" tabindex="-1">\u542F\u52A8\u76F8\u5173\u670D\u52A1 <a class="header-anchor" href="#\u542F\u52A8\u76F8\u5173\u670D\u52A1" aria-hidden="true">#</a></h2><p>\u542F\u52A8<code>logstash</code>\u548C<code>es</code>:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># es</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@master elasticsearch-7.7.1</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> su esuser</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">esuser@master elasticsearch-7.7.1</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">$ bin/elasticsearch -d</span></span>
<span class="line"><span style="color:#758575;"># logstash</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@master logstash-7.7.1</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> bin/logstash -f config/tcp2es.conf</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># es</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@master elasticsearch-7.7.1</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> su esuser</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">esuser@master elasticsearch-7.7.1</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">$ bin/elasticsearch -d</span></span>
<span class="line"><span style="color:#A0ADA0;"># logstash</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@master logstash-7.7.1</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> bin/logstash -f config/tcp2es.conf</span></span>
<span class="line"></span></code></pre></div><h2 id="\u67E5\u770B\u670D\u52A1\u72B6\u6001" tabindex="-1">\u67E5\u770B\u670D\u52A1\u72B6\u6001 <a class="header-anchor" href="#\u67E5\u770B\u670D\u52A1\u72B6\u6001" aria-hidden="true">#</a></h2><h3 id="es-\u72B6\u6001" tabindex="-1">ES \u72B6\u6001 <a class="header-anchor" href="#es-\u72B6\u6001" aria-hidden="true">#</a></h3><p>\u7565.</p><p>\u53C2\u8003\u4E4B\u524D\u6587\u7AE0\u67E5\u770B<code>browser</code>\u65B9\u6CD5.</p><h3 id="kibana-\u72B6\u6001" tabindex="-1">Kibana \u72B6\u6001 <a class="header-anchor" href="#kibana-\u72B6\u6001" aria-hidden="true">#</a></h3><p>\u7565.</p><p>\u53C2\u8003\u4E4B\u524D\u7684\u6587\u7AE0\u6DFB\u52A0\u7D22\u5F15, \u5728\u6B64\u4E0D\u518D\u8D58\u8FF0.</p>`,16),e=[o];function c(t,r,i,y,d,A){return a(),n("div",null,e)}var B=s(p,[["render",c]]);export{D as __pageData,B as default};
