import{_ as s,o as a,c as n,a as e}from"./app.1e6146c3.js";const k=JSON.parse('{"title":"\u4F7F\u7528\u56FD\u5185\u6E90\u53CA\u76F8\u5173\u5C0F\u5DE5\u5177","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u56FD\u5185\u955C\u50CF\u6E90","slug":"\u56FD\u5185\u955C\u50CF\u6E90"},{"level":2,"title":"kubeadm\u6E90","slug":"kubeadm\u6E90"},{"level":2,"title":"\u53C2\u8003\u94FE\u63A5","slug":"\u53C2\u8003\u94FE\u63A5"}],"relativePath":"CloudNative/k8s/Installation/\u4F7F\u7528\u56FD\u5185\u6E90\u53CA\u76F8\u5173\u5C0F\u5DE5\u5177.md","lastUpdated":1657272051000}'),l={name:"CloudNative/k8s/Installation/\u4F7F\u7528\u56FD\u5185\u6E90\u53CA\u76F8\u5173\u5C0F\u5DE5\u5177.md"},p=e(`<h1 id="\u4F7F\u7528\u56FD\u5185\u6E90\u53CA\u76F8\u5173\u5C0F\u5DE5\u5177" tabindex="-1">\u4F7F\u7528\u56FD\u5185\u6E90\u53CA\u76F8\u5173\u5C0F\u5DE5\u5177 <a class="header-anchor" href="#\u4F7F\u7528\u56FD\u5185\u6E90\u53CA\u76F8\u5173\u5C0F\u5DE5\u5177" aria-hidden="true">#</a></h1><h2 id="\u56FD\u5185\u955C\u50CF\u6E90" tabindex="-1">\u56FD\u5185\u955C\u50CF\u6E90 <a class="header-anchor" href="#\u56FD\u5185\u955C\u50CF\u6E90" aria-hidden="true">#</a></h2><p>Azure China\u63D0\u4F9B\u4E86\u76EE\u524D\u7528\u8FC7\u7684\u8D28\u91CF\u6700\u597D\u7684\u955C\u50CF\u6E90\uFF0C<a href="http://xn--docker-2e8ix24s7fr.io" target="_blank" rel="noopener noreferrer">\u6DB5\u76D6\u4E86docker.io</a>\uFF0C<a href="http://gcr.io" target="_blank" rel="noopener noreferrer">gcr.io</a>\uFF0C<a href="http://quay.io" target="_blank" rel="noopener noreferrer">quay.io</a>\u3002\u65E0\u8BBA\u662F\u901F\u5EA6\u8FD8\u662F\u8986\u76D6\u8303\u56F4\uFF0C\u4F53\u9A8C\u90FD\u6781\u4F73\u3002\u800C\u4E14\u90FD\u652F\u6301\u533F\u540D\u62C9\u53D6\uFF0C\u4E5F\u5C31\u662F\u4E0D\u9700\u8981\u767B\u5F55\u3002\u8FD9\u70B9\u7279\u522B\u53CB\u597D\u3002azk8s.cn\u652F\u6301\u7684\u955C\u50CF\u4EE3\u7406\u8F6C\u6362\u5982\u4E0B\u5217\u8868\u3002</p><table><thead><tr><th style="text-align:left;">global</th><th style="text-align:left;">proxy in China</th><th style="text-align:left;">format</th><th style="text-align:left;">example</th></tr></thead><tbody><tr><td style="text-align:left;"><a href="https://xuxinkun.github.io/2019/06/11/cn-registry/hub.docker.com" target="_blank" rel="noopener noreferrer">dockerhub</a> (<a href="http://docker.io" target="_blank" rel="noopener noreferrer">docker.io</a>)</td><td style="text-align:left;"><a href="http://mirror.azk8s.cn/help/docker-registry-proxy-cache.html" target="_blank" rel="noopener noreferrer">dockerhub.azk8s.cn</a></td><td style="text-align:left;"><code>dockerhub.azk8s.cn//:</code></td><td style="text-align:left;"><code>dockerhub.azk8s.cn/microsoft/azure-cli:2.0.61</code> <code>dockerhub.azk8s.cn/library/nginx:1.15</code></td></tr><tr><td style="text-align:left;"><a href="http://gcr.io" target="_blank" rel="noopener noreferrer">gcr.io</a></td><td style="text-align:left;"><a href="http://mirror.azk8s.cn/help/gcr-proxy-cache.html" target="_blank" rel="noopener noreferrer">gcr.azk8s.cn</a></td><td style="text-align:left;"><code>gcr.azk8s.cn//:</code></td><td style="text-align:left;"><code>gcr.azk8s.cn/google_containers/hyperkube-amd64:v1.13.5</code></td></tr><tr><td style="text-align:left;"><a href="http://quay.io" target="_blank" rel="noopener noreferrer">quay.io</a></td><td style="text-align:left;"><a href="http://mirror.azk8s.cn/help/quay-proxy-cache.html" target="_blank" rel="noopener noreferrer">quay.azk8s.cn</a></td><td style="text-align:left;"><code>quay.azk8s.cn//:</code></td><td style="text-align:left;"><code>quay.azk8s.cn/deis/go-dev:v1.10.0</code></td></tr></tbody></table><blockquote><p>Note: <code>k8s.gcr.io</code> would redirect to <code>gcr.io/google-containers</code>, following image urls are identical:</p></blockquote><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">k8s.gcr.io/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#dbd7ca;">gcr.io/google_containers/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">k8s.gcr.io/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#393a34;">gcr.io/google_containers/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>\u8FD9\u91CC\uFF0C\u6211\u5F00\u53D1\u4E86\u4E00\u4E2A\u5C0F\u7684\u811A\u672Cazk8spull\uFF0C\u8FD9\u4E2A\u811A\u672C\u53EF\u4EE5\u81EA\u52A8\u6839\u636E\u955C\u50CF\u540D\u79F0\u8FDB\u884C\u89E3\u6790\uFF0C\u8F6C\u6362\u4E3Aazure\u7684mirror\u955C\u50CF\u6E90\u57DF\u540D\u3002\u5E76\u8FDB\u884C\u62C9\u53D6\u3002\u62C9\u53D6\u5B8C\u6210\u540E\u4F1A\u81EA\u52A8\u8FDB\u884Ctag\u91CD\u547D\u540D\u4E3A\u539F\u672C\u7684\u955C\u50CF\u540D\u3002\u8BE5\u811A\u672C\u5DF2\u7ECF\u5F00\u6E90\u5728 <a href="https://github.com/xuxinkun/littleTools#azk8spull" target="_blank" rel="noopener noreferrer">https://github.com/xuxinkun/littleTools#azk8spull</a> \u4E0A\u3002\u4EE5\u4E0B\u662F\u4F7F\u7528\u6837\u4F8B\u3002</p><p>\u5B89\u88C5<code> azk8spull</code></p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">git clone https://github.com/xuxinkun/littleTools</span></span>
<span class="line"><span style="color:#dbd7ca;">cd littleTools</span></span>
<span class="line"><span style="color:#dbd7ca;">chmod +x install.sh</span></span>
<span class="line"><span style="color:#dbd7ca;">./install.sh</span></span>
<span class="line"><span style="color:#dbd7ca;">source /etc/profile</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">git clone https://github.com/xuxinkun/littleTools</span></span>
<span class="line"><span style="color:#393a34;">cd littleTools</span></span>
<span class="line"><span style="color:#393a34;">chmod +x install.sh</span></span>
<span class="line"><span style="color:#393a34;">./install.sh</span></span>
<span class="line"><span style="color:#393a34;">source /etc/profile</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@node-64-216 </span><span style="color:#CB7676;">~</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> azk8spull quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1</span></span>
<span class="line"><span style="color:#758575;">## azk8spull try to pull image from mirror quay.azk8s.cn/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1.</span></span>
<span class="line"><span style="color:#DBD7CA;">0.24.1: Pulling from kubernetes-ingress-controller/nginx-ingress-controller</span></span>
<span class="line"><span style="color:#DBD7CA;">Digest: sha256:76861d167e4e3db18f2672fd3435396aaa898ddf4d1128375d7c93b91c59f87f</span></span>
<span class="line"><span style="color:#DBD7CA;">Status: Image is up to date </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CA;"> quay.azk8s.cn/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1</span></span>
<span class="line"><span style="color:#758575;">## azk8spull try to tag quay.azk8s.cn/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1 to quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1.</span></span>
<span class="line"><span style="color:#758575;">## azk8spull finish pulling.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@node-64-216 </span><span style="color:#CB7676;">~</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> azk8spull k8s.gcr.io/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#758575;">## azk8spull try to pull image from mirror gcr.azk8s.cn/google_containers/pause-amd64:3.1.</span></span>
<span class="line"><span style="color:#DBD7CA;">3.1: Pulling from google_containers/pause-amd64</span></span>
<span class="line"><span style="color:#DBD7CA;">Digest: sha256:59eec8837a4d942cc19a52b8c09ea75121acc38114a2c68b98983ce9356b8610</span></span>
<span class="line"><span style="color:#DBD7CA;">Status: Image is up to date </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CA;"> gcr.azk8s.cn/google_containers/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#758575;">## azk8spull try to tag gcr.azk8s.cn/google_containers/pause-amd64:3.1 to k8s.gcr.io/pause-amd64:3.1.</span></span>
<span class="line"><span style="color:#758575;">## azk8spull finish pulling.</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@node-64-216 </span><span style="color:#AB5959;">~</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> azk8spull quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1</span></span>
<span class="line"><span style="color:#A0ADA0;">## azk8spull try to pull image from mirror quay.azk8s.cn/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1.</span></span>
<span class="line"><span style="color:#393A34;">0.24.1: Pulling from kubernetes-ingress-controller/nginx-ingress-controller</span></span>
<span class="line"><span style="color:#393A34;">Digest: sha256:76861d167e4e3db18f2672fd3435396aaa898ddf4d1128375d7c93b91c59f87f</span></span>
<span class="line"><span style="color:#393A34;">Status: Image is up to date </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> quay.azk8s.cn/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1</span></span>
<span class="line"><span style="color:#A0ADA0;">## azk8spull try to tag quay.azk8s.cn/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1 to quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1.</span></span>
<span class="line"><span style="color:#A0ADA0;">## azk8spull finish pulling.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@node-64-216 </span><span style="color:#AB5959;">~</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> azk8spull k8s.gcr.io/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#A0ADA0;">## azk8spull try to pull image from mirror gcr.azk8s.cn/google_containers/pause-amd64:3.1.</span></span>
<span class="line"><span style="color:#393A34;">3.1: Pulling from google_containers/pause-amd64</span></span>
<span class="line"><span style="color:#393A34;">Digest: sha256:59eec8837a4d942cc19a52b8c09ea75121acc38114a2c68b98983ce9356b8610</span></span>
<span class="line"><span style="color:#393A34;">Status: Image is up to date </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> gcr.azk8s.cn/google_containers/pause-amd64:3.1</span></span>
<span class="line"><span style="color:#A0ADA0;">## azk8spull try to tag gcr.azk8s.cn/google_containers/pause-amd64:3.1 to k8s.gcr.io/pause-amd64:3.1.</span></span>
<span class="line"><span style="color:#A0ADA0;">## azk8spull finish pulling.</span></span>
<span class="line"></span></code></pre></div><h2 id="kubeadm\u6E90" tabindex="-1">kubeadm\u6E90 <a class="header-anchor" href="#kubeadm\u6E90" aria-hidden="true">#</a></h2><p>kubeadm\u76F4\u63A5\u4F7F\u7528\u963F\u91CC\u4E91\u7684\u6E90\u5373\u53EF\u3002\u901F\u5EA6\u4E5F\u6BD4\u8F83\u5FEB\u3002</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># Debian/Ubuntu</span></span>
<span class="line"><span style="color:#DBD7CA;">apt-get update </span><span style="color:#CB7676;">&amp;&amp;</span><span style="color:#DBD7CA;"> apt-get install -y apt-transport-https</span></span>
<span class="line"><span style="color:#DBD7CA;">curl -s https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> apt-key add -</span></span>
<span class="line"><span style="color:#DBD7CA;">cat </span><span style="color:#CB7676;">&lt;&lt;</span><span style="color:#4D9375;">EOF</span><span style="color:#C98A7D;"> &gt;/etc/apt/sources.list.d/kubernetes.list</span></span>
<span class="line"><span style="color:#C98A7D;">deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main</span></span>
<span class="line"><span style="color:#4D9375;">EOF</span></span>
<span class="line"><span style="color:#DBD7CA;">apt-get update</span></span>
<span class="line"><span style="color:#DBD7CA;">apt-get install -y kubelet kubeadm kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># CentOS/RHEL/Fedora</span></span>
<span class="line"><span style="color:#DBD7CA;">cat </span><span style="color:#CB7676;">&lt;&lt;</span><span style="color:#4D9375;">EOF</span><span style="color:#C98A7D;"> &gt; /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#C98A7D;">[kubernetes]</span></span>
<span class="line"><span style="color:#C98A7D;">name=Kubernetes</span></span>
<span class="line"><span style="color:#C98A7D;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="color:#C98A7D;">enabled=1</span></span>
<span class="line"><span style="color:#C98A7D;">gpgcheck=1</span></span>
<span class="line"><span style="color:#C98A7D;">repo_gpgcheck=1</span></span>
<span class="line"><span style="color:#C98A7D;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="color:#4D9375;">EOF</span></span>
<span class="line"><span style="color:#DBD7CA;">setenforce 0</span></span>
<span class="line"><span style="color:#DBD7CA;">yum install -y kubelet kubeadm kubectl</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># Debian/Ubuntu</span></span>
<span class="line"><span style="color:#393A34;">apt-get update </span><span style="color:#AB5959;">&amp;&amp;</span><span style="color:#393A34;"> apt-get install -y apt-transport-https</span></span>
<span class="line"><span style="color:#393A34;">curl -s https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> apt-key add -</span></span>
<span class="line"><span style="color:#393A34;">cat </span><span style="color:#AB5959;">&lt;&lt;</span><span style="color:#1C6B48;">EOF</span><span style="color:#B56959;"> &gt;/etc/apt/sources.list.d/kubernetes.list</span></span>
<span class="line"><span style="color:#B56959;">deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main</span></span>
<span class="line"><span style="color:#1C6B48;">EOF</span></span>
<span class="line"><span style="color:#393A34;">apt-get update</span></span>
<span class="line"><span style="color:#393A34;">apt-get install -y kubelet kubeadm kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># CentOS/RHEL/Fedora</span></span>
<span class="line"><span style="color:#393A34;">cat </span><span style="color:#AB5959;">&lt;&lt;</span><span style="color:#1C6B48;">EOF</span><span style="color:#B56959;"> &gt; /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#B56959;">[kubernetes]</span></span>
<span class="line"><span style="color:#B56959;">name=Kubernetes</span></span>
<span class="line"><span style="color:#B56959;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="color:#B56959;">enabled=1</span></span>
<span class="line"><span style="color:#B56959;">gpgcheck=1</span></span>
<span class="line"><span style="color:#B56959;">repo_gpgcheck=1</span></span>
<span class="line"><span style="color:#B56959;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="color:#1C6B48;">EOF</span></span>
<span class="line"><span style="color:#393A34;">setenforce 0</span></span>
<span class="line"><span style="color:#393A34;">yum install -y kubelet kubeadm kubectl</span></span>
<span class="line"></span></code></pre></div><h2 id="\u53C2\u8003\u94FE\u63A5" tabindex="-1">\u53C2\u8003\u94FE\u63A5 <a class="header-anchor" href="#\u53C2\u8003\u94FE\u63A5" aria-hidden="true">#</a></h2><ul><li><a href="http://mirror.azure.cn/help/docker-registry-proxy-cache.html" target="_blank" rel="noopener noreferrer">Docker Registry Proxy Cache \u5E2E\u52A9 http://mirror.azure.cn/help/docker-registry-proxy-cache.html</a></li><li><a href="https://github.com/Azure/container-service-for-azure-china/tree/master/aks#22-container-registry-proxy" target="_blank" rel="noopener noreferrer">Azure China container registry proxy https://github.com/Azure/container-service-for-azure-china/tree/master/aks#22-container-registry-proxy</a></li><li><a href="https://github.com/maguowei/kubernetes-for-china" target="_blank" rel="noopener noreferrer">k8s for China https://github.com/maguowei/kubernetes-for-china</a></li><li><a href="http://mirror.azure.cn/" target="_blank" rel="noopener noreferrer">http://mirror.azure.cn/</a></li></ul><blockquote><p>\u8BE5\u6587\u7AE0\u8F6C\u8F7D\u81EA\uFF1A<a href="https://xuxinkun.github.io/2019/06/11/cn-registry/" target="_blank" rel="noopener noreferrer">https://xuxinkun.github.io/2019/06/11/cn-registry/</a></p></blockquote>`,16),o=[p];function r(t,c,i,y,u,d){return a(),n("div",null,o)}var h=s(l,[["render",r]]);export{k as __pageData,h as default};
