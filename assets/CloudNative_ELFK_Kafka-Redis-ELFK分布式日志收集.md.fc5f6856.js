import{_ as s,o as a,c as n,a as o}from"./app.1e6146c3.js";const B=JSON.parse('{"title":"Kafka/Redis + ELFK\u5206\u5E03\u5F0F\u65E5\u5FD7\u6536\u96C6","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4F7F\u7528\u80CC\u666F","slug":"\u4F7F\u7528\u80CC\u666F"},{"level":2,"title":"Filebeat --> Kafka/Redis","slug":"filebeat-kafka-redis"},{"level":2,"title":"\u542F\u52A8 Kafka/Redis","slug":"\u542F\u52A8-kafka-redis"},{"level":2,"title":"Kafka/Redis --> Logstash --> ElasticSearch","slug":"kafka-redis-logstash-elasticsearch"},{"level":2,"title":"\u53C2\u8003\u94FE\u63A5","slug":"\u53C2\u8003\u94FE\u63A5"}],"relativePath":"CloudNative/ELFK/Kafka-Redis-ELFK\u5206\u5E03\u5F0F\u65E5\u5FD7\u6536\u96C6.md","lastUpdated":1657272051000}'),l={name:"CloudNative/ELFK/Kafka-Redis-ELFK\u5206\u5E03\u5F0F\u65E5\u5FD7\u6536\u96C6.md"},p=o(`<h1 id="kafka-redis-elfk\u5206\u5E03\u5F0F\u65E5\u5FD7\u6536\u96C6" tabindex="-1">Kafka/Redis + ELFK\u5206\u5E03\u5F0F\u65E5\u5FD7\u6536\u96C6 <a class="header-anchor" href="#kafka-redis-elfk\u5206\u5E03\u5F0F\u65E5\u5FD7\u6536\u96C6" aria-hidden="true">#</a></h1><p><img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/elk%20stack/log_collect.png" alt=""></p><p><em><strong>Filebeat --&gt; Kafka --&gt; Logstash --&gt; ES Cluster --&gt; Kibana/Grafana</strong></em></p><p><img src="http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/elk%20stack/redis%2BELFK.png" alt=""></p><p><em><strong>Filebeat --&gt; Redis --&gt; Logstash --&gt; ES Cluster --&gt; Kibana/Grafana</strong></em></p><h2 id="\u4F7F\u7528\u80CC\u666F" tabindex="-1">\u4F7F\u7528\u80CC\u666F <a class="header-anchor" href="#\u4F7F\u7528\u80CC\u666F" aria-hidden="true">#</a></h2><blockquote><p>\u7531\u4E8E<code>ELFK</code>\u7684\u5C40\u9650\u6027\uFF0C\u968F\u7740<code> Beats</code> \u6536\u96C6\u7684\u6BCF\u79D2\u6570\u636E\u91CF\u8D8A\u6765\u8D8A\u5927\uFF0C<code>Logstash </code>\u53EF\u80FD\u65E0\u6CD5\u627F\u8F7D\u8FD9\u4E48\u5927\u91CF\u65E5\u5FD7\u7684\u5904\u7406\u3002\u867D\u7136\u8BF4\uFF0C\u53EF\u4EE5\u589E\u52A0 Logstash \u8282\u70B9\u6570\u91CF\uFF0C\u63D0\u9AD8\u6BCF\u79D2\u6570\u636E\u7684\u5904\u7406\u901F\u5EA6\uFF0C\u4F46\u662F\u4ECD\u9700\u8003\u8651\u53EF\u80FD<code>Elasticsearch</code>\u65E0\u6CD5\u627F\u8F7D\u8FD9\u4E48\u5927\u91CF\u7684\u65E5\u5FD7\u7684\u5199\u5165\u3002\u6B64\u65F6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8003\u8651 <strong>\u5F15\u5165\u6D88\u606F\u961F\u5217</strong> \uFF08<code>Kafka</code>\uFF09\uFF0C\u8FDB\u884C\u7F13\u5B58\u3002</p></blockquote><h2 id="filebeat-kafka-redis" tabindex="-1">Filebeat --&gt; Kafka/Redis <a class="header-anchor" href="#filebeat-kafka-redis" aria-hidden="true">#</a></h2><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># vim /usr/local/filebeat-7.7.1-linux-x86_64/filebeat.yml</span></span>
<span class="line"><span style="color:#429988;">filebeat.inputs</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">type</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">log</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">paths</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/usr/local/apache-tomcat-9.0.34/logs/tomcat_access_log.*.log</span></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;">#fields:</span></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;">#  log_source: messages</span></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;">#fields_under_root: true</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span></span>
<span class="line"><span style="color:#429988;">output.kafka</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">hosts</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#C98A7D;">&quot;192.168.0.108:9092&quot;</span><span style="color:#858585;">]</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">topic</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">tomcat</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">partition.round_robin</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">reachable_only</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">false</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># vim /usr/local/filebeat-7.7.1-linux-x86_64/filebeat.yml</span></span>
<span class="line"><span style="color:#2F8A89;">filebeat.inputs</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">type</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">log</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">paths</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/usr/local/apache-tomcat-9.0.34/logs/tomcat_access_log.*.log</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">#fields:</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">#  log_source: messages</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">#fields_under_root: true</span></span>
<span class="line"><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#2F8A89;">output.kafka</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">hosts</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">&quot;192.168.0.108:9092&quot;</span><span style="color:#8E8F8B;">]</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">topic</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">tomcat</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">partition.round_robin</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">reachable_only</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">false</span></span>
<span class="line"></span></code></pre></div><p>\u8F93\u51FA\u5230<code>redis</code>:</p><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># filebeat.inputs \u5185\u5BB9\u548C\u4E0A\u9762\u7C7B\u4F3C...</span></span>
<span class="line"><span style="color:#758575;"># \u7B80\u5355\u8F93\u51FA\u793A\u4F8B</span></span>
<span class="line"><span style="color:#429988;">output.redis</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">hosts</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#C98A7D;">&quot;localhost&quot;</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">		</span><span style="color:#758575;"># \u5982\u679C\u662F\u96C6\u7FA4, \u5219\u9700\u8981\u6DFB\u52A0\u591A\u4E2A</span></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;"># port: 6379</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">password</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;my_password&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">key</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;filebeat&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">db</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">timeout</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">5</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span></span>
<span class="line"><span style="color:#758575;"># output.redis:</span></span>
<span class="line"><span style="color:#758575;">#   hosts: [&quot;localhost&quot;]</span></span>
<span class="line"><span style="color:#758575;">#   key: &quot;default_list&quot;</span></span>
<span class="line"><span style="color:#758575;">#   keys:</span></span>
<span class="line"><span style="color:#758575;">#     - key: &quot;info_list&quot;   # send to info_list if \`message\` field contains INFO</span></span>
<span class="line"><span style="color:#758575;">#       when.contains:</span></span>
<span class="line"><span style="color:#758575;">#         message: &quot;INFO&quot;</span></span>
<span class="line"><span style="color:#758575;">#     - key: &quot;debug_list&quot;  # send to debug_list if \`message\` field contains DEBUG</span></span>
<span class="line"><span style="color:#758575;">#       when.contains:</span></span>
<span class="line"><span style="color:#758575;">#         message: &quot;DEBUG&quot;</span></span>
<span class="line"><span style="color:#758575;">#     - key: &quot;%{[fields.list]}&quot;</span></span>
<span class="line"><span style="color:#758575;">#       mappings:</span></span>
<span class="line"><span style="color:#758575;">#         http: &quot;frontend_list&quot;</span></span>
<span class="line"><span style="color:#758575;">#         nginx: &quot;frontend_list&quot;</span></span>
<span class="line"><span style="color:#758575;">#          mysql: &quot;backend_list&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># filebeat.inputs \u5185\u5BB9\u548C\u4E0A\u9762\u7C7B\u4F3C...</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u7B80\u5355\u8F93\u51FA\u793A\u4F8B</span></span>
<span class="line"><span style="color:#2F8A89;">output.redis</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">hosts</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">&quot;localhost&quot;</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">		</span><span style="color:#A0ADA0;"># \u5982\u679C\u662F\u96C6\u7FA4, \u5219\u9700\u8981\u6DFB\u52A0\u591A\u4E2A</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;"># port: 6379</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">password</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;my_password&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">key</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;filebeat&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">db</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">timeout</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">5</span></span>
<span class="line"><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#A0ADA0;"># output.redis:</span></span>
<span class="line"><span style="color:#A0ADA0;">#   hosts: [&quot;localhost&quot;]</span></span>
<span class="line"><span style="color:#A0ADA0;">#   key: &quot;default_list&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#   keys:</span></span>
<span class="line"><span style="color:#A0ADA0;">#     - key: &quot;info_list&quot;   # send to info_list if \`message\` field contains INFO</span></span>
<span class="line"><span style="color:#A0ADA0;">#       when.contains:</span></span>
<span class="line"><span style="color:#A0ADA0;">#         message: &quot;INFO&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#     - key: &quot;debug_list&quot;  # send to debug_list if \`message\` field contains DEBUG</span></span>
<span class="line"><span style="color:#A0ADA0;">#       when.contains:</span></span>
<span class="line"><span style="color:#A0ADA0;">#         message: &quot;DEBUG&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#     - key: &quot;%{[fields.list]}&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#       mappings:</span></span>
<span class="line"><span style="color:#A0ADA0;">#         http: &quot;frontend_list&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#         nginx: &quot;frontend_list&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#          mysql: &quot;backend_list&quot;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u542F\u52A8-kafka-redis" tabindex="-1">\u542F\u52A8 Kafka/Redis <a class="header-anchor" href="#\u542F\u52A8-kafka-redis" aria-hidden="true">#</a></h2><p>\u8FD9\u91CC\u4E3A\u4E86\u65B9\u4FBF\u8D77\u89C1\uFF0C\u6211\u4F7F\u7528<code>docker-compose</code>\u811A\u672C\u6765\u8FDB\u884C\u5FEB\u901F\u90E8\u7F72\uFF0C\u811A\u672C\u5185\u5BB9\u53C2\u89C1[\u4F7F\u7528 docker-compose \u90E8\u7F72 Kafka](../Kafka/\u4F7F\u7528 docker-compose \u90E8\u7F72 <a href="http://Kafka.md" target="_blank" rel="noopener noreferrer">Kafka.md</a>)</p><p>\u5982\u679C\u4F60\u5DF2\u7ECF\u5B89\u88C5\u597D\u4E86<code>kafka-manager</code>, \u53EF\u4EE5\u5728\u9762\u677F\u4E0A\u770B\u5230\u76F8\u5173<code>topic</code>\u5DF2\u7ECF\u521B\u5EFA, \u5E76\u4E14\u5199\u5165\u6570\u636E\u4E4B\u540E, \u5DF2\u7ECF\u6709\u4E86\u5206\u533A\u504F\u79FB\u91CF, \u5982\u4E0B\u56FE\u6240\u793A:</p><p><img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/elk%20stack/Filebeat%2BKafka%2BELK.png" alt="" title="kafka-manager"></p><blockquote><p>\u68C0\u6D4B<code>filebeat</code>\u662F\u5426\u5C06\u65E5\u5FD7\u4F20\u9012\u7ED9<code>kafka</code>:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">bin/kafka-console-consumer.sh --zookeeper 192.168.0.108:2181 --topic tomcat --from-beginning</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">bin/kafka-console-consumer.sh --zookeeper 192.168.0.108:2181 --topic tomcat --from-beginning</span></span>
<span class="line"></span></code></pre></div></blockquote><p>\u542F\u52A8<code>redis</code>:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">systemctl start redis</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">systemctl start redis</span></span>
<span class="line"></span></code></pre></div><p>\u8FDB\u5165<code>redis</code>\u4EA4\u4E92\u5F0F\u5BA2\u6237\u7AEF\u8FDB\u884C\u67E5\u770B(\u7531\u4E8E\u4FE1\u606F\u592A\u957F, \u5728\u6B64\u8FDB\u884C\u7F29\u7565\u663E\u793A):</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">127.0.0.1:</span><span style="color:#CB7676;">6379&gt;</span><span style="color:#DBD7CA;"> keys </span><span style="color:#CB7676;">*</span></span>
<span class="line"><span style="color:#DBD7CA;">1) </span><span style="color:#C98A7D;">&quot;filebeat&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">127.0.0.1:</span><span style="color:#CB7676;">6379&gt;</span><span style="color:#DBD7CA;"> LPOP filebeat</span></span>
<span class="line"><span style="color:#C98A7D;">&quot;{</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">@timestamp</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">2020-07-15T14:52:07.315Z</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">@metadata</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span></span>
<span class="line"><span style="color:#C98A7D;">...</span></span>
<span class="line"><span style="color:#C98A7D;">\`&quot;GET / HTTP/1.1\`</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">status</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">200</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">SendBytes</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">11216</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">Query</span><span style="color:#CB7676;">?</span><span style="color:#C98A7D;">string</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">partner</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">-</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">AgentVersion</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">curl/7.29.0</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">}</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">input</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:{</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">type</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">log</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">},</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">host</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span></span>
<span class="line"><span style="color:#C98A7D;">...</span></span>
<span class="line"><span style="color:#C98A7D;">127.0.0.1:</span><span style="color:#CB7676;">6379&gt;</span><span style="color:#C98A7D;"> LPOP filebeat</span></span>
<span class="line"><span style="color:#C98A7D;">&quot;{</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">@timestamp</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">2020-07-15T14:52:08.339Z</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">@metadata</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:{</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">beat</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">filebeat</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">type</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">_doc</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">version</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">7.7.1</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">},</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">agent</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span></span>
<span class="line"><span style="color:#C98A7D;">...</span></span>
<span class="line"><span style="color:#C98A7D;">\`&quot;GET/test/index.html\`HTTP/1.1</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">status</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">200</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">SendBytes</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">19</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">Query</span><span style="color:#CB7676;">?</span><span style="color:#C98A7D;">string</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">partner</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">-</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">AgentVersion</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">curl/7.29.0</span><span style="color:#D4976C;">\\\\\\&quot;</span><span style="color:#C98A7D;">}</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">log</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:{</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">offset</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:234,</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">file</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:{</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">path</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;">:</span><span style="color:#D4976C;">\\\`</span><span style="color:#C98A7D;">\`&quot;/usr/local/apache-tomcat-9.0.34/logs/tomcat_access_log.2020-07-15.log\`</span></span>
<span class="line"><span style="color:#C98A7D;">...</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">127.0.0.1:</span><span style="color:#AB5959;">6379&gt;</span><span style="color:#393A34;"> keys </span><span style="color:#AB5959;">*</span></span>
<span class="line"><span style="color:#393A34;">1) </span><span style="color:#B56959;">&quot;filebeat&quot;</span></span>
<span class="line"><span style="color:#393A34;">127.0.0.1:</span><span style="color:#AB5959;">6379&gt;</span><span style="color:#393A34;"> LPOP filebeat</span></span>
<span class="line"><span style="color:#B56959;">&quot;{</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">@timestamp</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">2020-07-15T14:52:07.315Z</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">@metadata</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span></span>
<span class="line"><span style="color:#B56959;">...</span></span>
<span class="line"><span style="color:#B56959;">\`&quot;GET / HTTP/1.1\`</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">status</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">200</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">SendBytes</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">11216</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">Query</span><span style="color:#AB5959;">?</span><span style="color:#B56959;">string</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">partner</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">-</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">AgentVersion</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">curl/7.29.0</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">}</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">input</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:{</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">type</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">log</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">},</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">host</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span></span>
<span class="line"><span style="color:#B56959;">...</span></span>
<span class="line"><span style="color:#B56959;">127.0.0.1:</span><span style="color:#AB5959;">6379&gt;</span><span style="color:#B56959;"> LPOP filebeat</span></span>
<span class="line"><span style="color:#B56959;">&quot;{</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">@timestamp</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">2020-07-15T14:52:08.339Z</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">@metadata</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:{</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">beat</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">filebeat</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">type</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">_doc</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">version</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">7.7.1</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">},</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">agent</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span></span>
<span class="line"><span style="color:#B56959;">...</span></span>
<span class="line"><span style="color:#B56959;">\`&quot;GET/test/index.html\`HTTP/1.1</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">status</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">200</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">SendBytes</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">19</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">Query</span><span style="color:#AB5959;">?</span><span style="color:#B56959;">string</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">partner</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">-</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">AgentVersion</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">curl/7.29.0</span><span style="color:#A65E2B;">\\\\\\&quot;</span><span style="color:#B56959;">}</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">log</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:{</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">offset</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:234,</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">file</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:{</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">path</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;">:</span><span style="color:#A65E2B;">\\\`</span><span style="color:#B56959;">\`&quot;/usr/local/apache-tomcat-9.0.34/logs/tomcat_access_log.2020-07-15.log\`</span></span>
<span class="line"><span style="color:#B56959;">...</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="kafka-redis-logstash-elasticsearch" tabindex="-1">Kafka/Redis --&gt; Logstash --&gt; ElasticSearch <a class="header-anchor" href="#kafka-redis-logstash-elasticsearch" aria-hidden="true">#</a></h2><p>\u4ECE<code>kafka</code>\u8F93\u5165:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># vim /usr/local/logstash-7.7.1/config/kafka2es.conf</span></span>
<span class="line"><span style="color:#DBD7CA;">input </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    kafka </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    codec =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    topics =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#C98A7D;">&quot;tomcat&quot;</span><span style="color:#858585;">]</span></span>
<span class="line"><span style="color:#DBD7CA;">    bootstrap_servers =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;192.168.0.108:9092&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    auto_offset_reset =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;latest&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    group_id =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;logstash-g1&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">output </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    elasticsearch </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    hosts =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;http://192.168.0.108:9200&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    index =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;tomcat-%{+YYYY.MM.dd}&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># vim /usr/local/logstash-7.7.1/config/kafka2es.conf</span></span>
<span class="line"><span style="color:#393A34;">input </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    kafka </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    codec =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#393A34;">    topics =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">&quot;tomcat&quot;</span><span style="color:#8E8F8B;">]</span></span>
<span class="line"><span style="color:#393A34;">    bootstrap_servers =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;192.168.0.108:9092&quot;</span></span>
<span class="line"><span style="color:#393A34;">    auto_offset_reset =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;latest&quot;</span></span>
<span class="line"><span style="color:#393A34;">    group_id =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;logstash-g1&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">output </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    elasticsearch </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    hosts =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;http://192.168.0.108:9200&quot;</span></span>
<span class="line"><span style="color:#393A34;">    index =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;tomcat-%{+YYYY.MM.dd}&quot;</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4ECE<code>redis</code>\u8F93\u5165:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">input </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  redis </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    host =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;localhost&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    port =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;6379&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    db =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;0&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    key =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;filebeat&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    data_type =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;list&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    password =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    codec  =</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;"> 	</span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># output \u5185\u5BB9\u4E0E kafka \u76F8\u4F3C.;.</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">input </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  redis </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    host =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;localhost&quot;</span></span>
<span class="line"><span style="color:#393A34;">    port =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;6379&quot;</span></span>
<span class="line"><span style="color:#393A34;">    db =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;0&quot;</span></span>
<span class="line"><span style="color:#393A34;">    key =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;filebeat&quot;</span></span>
<span class="line"><span style="color:#393A34;">    data_type =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;list&quot;</span></span>
<span class="line"><span style="color:#393A34;">    password =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&quot;</span></span>
<span class="line"><span style="color:#393A34;">    codec  =</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;json&quot;</span></span>
<span class="line"><span style="color:#393A34;"> 	</span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># output \u5185\u5BB9\u4E0E kafka \u76F8\u4F3C.;.</span></span>
<span class="line"></span></code></pre></div><p>\u542F\u52A8<code>es</code>\u548C<code>logstash</code>\u4E4B\u540E, \u6253\u5F00\u6D4F\u89C8\u5668, \u4F7F\u7528\u63D2\u4EF6\u8BBF\u95EE<code>elasticsearch</code>\u7684web\u7BA1\u7406\u9875\u9762, \u67E5\u770B\u662F\u5426\u5DF2\u7ECF\u6536\u96C6\u5230<code>tomcat</code>\u65E5\u5FD7\u4FE1\u606F.</p><p><img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/elk%20stack/Filebeat%2BKafka%2BELK-2.png" alt="" title="elasticsearch"></p><p>\u6253\u5F00<code>Kibana</code>\u7BA1\u7406\u754C\u9762, \u6DFB\u52A0\u7D22\u5F15, \u5E76\u5728<code>Dashboard</code>\u4E2D\u67E5\u770B\u6765\u81EA<code>Logstash</code>\u7684\u65E5\u5FD7.</p><p><img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/elk%20stack/Filebeat%2BKafka%2BELK-3.png" alt="" title="Kibana"></p><h2 id="\u53C2\u8003\u94FE\u63A5" tabindex="-1">\u53C2\u8003\u94FE\u63A5 <a class="header-anchor" href="#\u53C2\u8003\u94FE\u63A5" aria-hidden="true">#</a></h2><ul><li>configuring output: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/configuring-output.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/beats/filebeat/current/configuring-output.html</a></li><li><a href="https://www.cnblogs.com/sanduzxcvbnm/p/11422928.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/sanduzxcvbnm/p/11422928.html</a></li></ul>`,31),t=[p];function e(c,r,y,i,A,u){return a(),n("div",null,t)}var q=s(l,[["render",e]]);export{B as __pageData,q as default};
