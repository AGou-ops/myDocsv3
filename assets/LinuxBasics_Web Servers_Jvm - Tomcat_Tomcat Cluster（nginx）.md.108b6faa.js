import{_ as s,o as a,c as n,a as p}from"./app.1e6146c3.js";const i=JSON.parse('{"title":"Tomcat Cluster(nginx)","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u90E8\u7F72 Tomcat","slug":"\u90E8\u7F72-tomcat"},{"level":2,"title":"\u914D\u7F6E Nginx","slug":"\u914D\u7F6E-nginx"}],"relativePath":"LinuxBasics/Web Servers/Jvm - Tomcat/Tomcat Cluster\uFF08nginx\uFF09.md","lastUpdated":1657272051000}'),l={name:"LinuxBasics/Web Servers/Jvm - Tomcat/Tomcat Cluster\uFF08nginx\uFF09.md"},o=p(`<h1 id="tomcat-cluster-nginx" tabindex="-1">Tomcat Cluster(nginx) <a class="header-anchor" href="#tomcat-cluster-nginx" aria-hidden="true">#</a></h1><h1 id="tomcat-nginx-\u96C6\u7FA4\u642D\u5EFA" tabindex="-1">Tomcat + Nginx \u96C6\u7FA4\u642D\u5EFA <a class="header-anchor" href="#tomcat-nginx-\u96C6\u7FA4\u642D\u5EFA" aria-hidden="true">#</a></h1><p>\u7531\u4E8E\u624B\u5934\u8D44\u6E90\u6709\u9650\uFF0C\u5C06\u96C6\u7FA4\u90E8\u7F72\u5230\u540C\u4E00\u4E3B\u673A\u4E4B\u4E0A\uFF0C\u4EE5\u4E0D\u540C\u7AEF\u53E3\u6765\u4EE3\u66FF\u4E0D\u540C Tomcat \u4E3B\u673A.</p><table><thead><tr><th>Role</th><th>IP</th></tr></thead><tbody><tr><td>Nginx(LB)</td><td>172.16.1.128:80</td></tr><tr><td>Tomcat-1</td><td>172.16.1.128:8080</td></tr><tr><td>Tomcat-2</td><td>172.16.1.128:8888</td></tr></tbody></table><h2 id="\u90E8\u7F72-tomcat" tabindex="-1">\u90E8\u7F72 Tomcat <a class="header-anchor" href="#\u90E8\u7F72-tomcat" aria-hidden="true">#</a></h2><p>\u5B89\u88C5\u548C\u914D\u7F6E Tomcat \u73AF\u5883\uFF0C\u53C2\u8003[Tomcat \u57FA\u7840](./Tomcat <a href="http://xn--3jsy46e.md" target="_blank" rel="noopener noreferrer">\u57FA\u7840.md</a>)</p><p>\u5728<code>/usr</code>\u76EE\u5F55\u4E0B\uFF0C\u590D\u5236\u4E00\u4EFD Tomcat\uFF0C\u5E76\u5C06\u5176\u547D\u540D\u4E3A<code>tomcat9-test</code>\u4F5C\u4E3A\u6D4B\u8BD5\u4F7F\u7528\u3002</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> cp -ar tomcat9/ tomcat9-test</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> ls</span></span>
<span class="line"><span style="color:#DBD7CA;">tomcat9  tomcat-test</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> cp -ar tomcat9/ tomcat9-test</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> ls</span></span>
<span class="line"><span style="color:#393A34;">tomcat9  tomcat-test</span></span>
<span class="line"></span></code></pre></div><p>\u4E3A<code>Tomcat-1</code>\u548C<code>Tomcat-2</code>\u5206\u522B\u521B\u5EFA\u6D4B\u8BD5 WEB \u7AD9\u70B9\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;">  mkdir -p /web1/webapp</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;">  mkdir -p /web2/webapp</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;">  mkdir -p /web1/webapp</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;">  mkdir -p /web2/webapp</span></span>
<span class="line"></span></code></pre></div><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> vim /web1/webapp/index.jsp</span></span>
<span class="line"><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">%@ page language=</span><span style="color:#C98A7D;">&quot;java&quot;</span><span style="color:#DBD7CA;"> import=</span><span style="color:#C98A7D;">&quot;java.util.*&quot;</span><span style="color:#DBD7CA;"> pageEncoding=</span><span style="color:#C98A7D;">&quot;UTF-8&quot;</span><span style="color:#DBD7CA;">%</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">html</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">head</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">title</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">JSP test1 page</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/title</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/head</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">body</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">% out.println</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;Welcome tomcat1 Web Page&quot;</span><span style="color:#858585;">)</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;">%</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/body</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/html</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> vim /web2/webapp/index.jsp</span></span>
<span class="line"><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">%@ page language=</span><span style="color:#C98A7D;">&quot;java&quot;</span><span style="color:#DBD7CA;"> import=</span><span style="color:#C98A7D;">&quot;java.util.*&quot;</span><span style="color:#DBD7CA;"> pageEncoding=</span><span style="color:#C98A7D;">&quot;UTF-8&quot;</span><span style="color:#DBD7CA;">%</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">html</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">head</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">title</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">JSP test2 page</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/title</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/head</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">body</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">% out.println</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;Welcome tomcat2 Web Page&quot;</span><span style="color:#858585;">)</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;">%</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/body</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/html</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> vim /web1/webapp/index.jsp</span></span>
<span class="line"><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">%@ page language=</span><span style="color:#B56959;">&quot;java&quot;</span><span style="color:#393A34;"> import=</span><span style="color:#B56959;">&quot;java.util.*&quot;</span><span style="color:#393A34;"> pageEncoding=</span><span style="color:#B56959;">&quot;UTF-8&quot;</span><span style="color:#393A34;">%</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">html</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">head</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">title</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">JSP test1 page</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/title</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/head</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">body</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">% out.println</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;Welcome tomcat1 Web Page&quot;</span><span style="color:#8E8F8B;">)</span><span style="color:#AB5959;">;</span><span style="color:#393A34;">%</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/body</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/html</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> vim /web2/webapp/index.jsp</span></span>
<span class="line"><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">%@ page language=</span><span style="color:#B56959;">&quot;java&quot;</span><span style="color:#393A34;"> import=</span><span style="color:#B56959;">&quot;java.util.*&quot;</span><span style="color:#393A34;"> pageEncoding=</span><span style="color:#B56959;">&quot;UTF-8&quot;</span><span style="color:#393A34;">%</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">html</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">head</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">title</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">JSP test2 page</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/title</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/head</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">body</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">% out.println</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;Welcome tomcat2 Web Page&quot;</span><span style="color:#8E8F8B;">)</span><span style="color:#AB5959;">;</span><span style="color:#393A34;">%</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/body</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/html</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u7F16\u8F91\u670D\u52A1\u914D\u7F6E\u6587\u4EF6<code>conf/server.xml</code>\uFF0C\u5728<code>152</code>\u884C\u5DE6\u53F3\uFF0C<code>&lt;Host&gt;</code>\u540E\u9762\u589E\u52A0\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-xml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">              </span><span style="color:#858585;">&lt;</span><span style="color:#429988;">Context</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">docBase</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;/web1/webapp&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">path</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">reloadable</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;false&quot;</span><span style="color:#858585;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">              </span><span style="color:#858585;">&lt;/</span><span style="color:#429988;">Context</span><span style="color:#858585;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">              </span><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">Context</span><span style="color:#393A34;"> </span><span style="color:#B58451;">docBase</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;/web1/webapp&quot;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">path</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;&quot;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">reloadable</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;false&quot;</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">Context</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\uFF0C\u542F\u52A8<code>Tomcat-1</code>\u670D\u52A1\u5373\u53EF\uFF0C<code>bash bin/startup.sh</code></p><p>\u4FEE\u6539<code>Tomcat-2</code>\u7684<code>Server</code>\u548C<code>Connector</code>\u7AEF\u53E3\uFF0C\u907F\u514D\u4E0E<code>Tomcat-1</code>\u51B2\u7A81\uFF0C\u5E76\u4FEE\u6539\u5176\u9ED8\u8BA4\u4E3B\u9875\uFF09\uFF1A</p><div class="language-xml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">&lt;!-- \u7F16\u8F91 conf/server.xml \u6587\u4EF6 --&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">...</span></span>
<span class="line"><span style="color:#858585;">&lt;</span><span style="color:#429988;">Server</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">port</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;8006&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">shutdown</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;SHUTDOWN&quot;</span><span style="color:#858585;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">...</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">&lt;</span><span style="color:#429988;">Connector</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">port</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;8888&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">protocol</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;HTTP/1.1&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">...</span></span>
<span class="line"><span style="color:#DBD7CA;">			  &lt;Context </span><span style="color:#E0A569;">docBase</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;/web2/webapp&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">path</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">reloadable</span><span style="color:#DBD7CA;">=</span><span style="color:#C98A7D;">&quot;false&quot;</span><span style="color:#858585;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">              </span><span style="color:#858585;">&lt;/</span><span style="color:#429988;">Context</span><span style="color:#858585;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">&lt;!-- \u7F16\u8F91 conf/server.xml \u6587\u4EF6 --&gt;</span></span>
<span class="line"><span style="color:#393A34;">...</span></span>
<span class="line"><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">Server</span><span style="color:#393A34;"> </span><span style="color:#B58451;">port</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;8006&quot;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">shutdown</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;SHUTDOWN&quot;</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">...</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">Connector</span><span style="color:#393A34;"> </span><span style="color:#B58451;">port</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;8888&quot;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">protocol</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;HTTP/1.1&quot;</span></span>
<span class="line"><span style="color:#393A34;">...</span></span>
<span class="line"><span style="color:#393A34;">			  &lt;Context </span><span style="color:#B58451;">docBase</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;/web2/webapp&quot;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">path</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;&quot;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">reloadable</span><span style="color:#393A34;">=</span><span style="color:#B56959;">&quot;false&quot;</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">Context</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><img src="http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/tomcat/tomcat-3.png" alt="" title="\u5177\u4F53\u4F4D\u7F6E"></p><p>\u542F\u52A8<code>Tomcat-2</code>\u670D\u52A1\uFF0C<code>bash bin/startup.sh</code></p><p>\u67E5\u770B\u7AEF\u53E3\u76D1\u542C\u60C5\u51B5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">root@stor1 tomcat-test</span><span style="color:#858585;">]</span><span style="color:#D4976C;">\\#</span><span style="color:#DBD7CA;"> ss -tnulp</span></span>
<span class="line"><span style="color:#DBD7CA;">Netid State      Recv-Q Send-Q                  Local Address:Port                                 Peer Address:Port              </span></span>
<span class="line"><span style="color:#DBD7CA;">udp   UNCONN     0      0                                   </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">:68                                              </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;dhclient&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">791</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">6</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      128                                 </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">:22                                              </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;sshd&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">977</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">3</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      100                         127.0.0.1:25                                              </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;master&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">1167</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">13</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      128                              </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:22                                           </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;sshd&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">977</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">4</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      100                              </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:8888                                         </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;java&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">4805</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">55</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      100                             </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::1</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:25                                           </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;master&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">1167</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">14</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      1                  </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::ffff:127.0.0.1</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:8005                                         </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;java&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">4262</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">67</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      1                  </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::ffff:127.0.0.1</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:8006                                         </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;java&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">4805</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">67</span><span style="color:#C98A7D;">))</span></span>
<span class="line"><span style="color:#DBD7CA;">tcp   LISTEN     0      100                              </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:8080                                         </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">::</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">:</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">                   users:</span><span style="color:#C98A7D;">((&quot;java&quot;</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">pid</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">4262</span><span style="color:#CB7676;">,</span><span style="color:#C98A7D;">fd</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">55</span><span style="color:#C98A7D;">))</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">root@stor1 tomcat-test</span><span style="color:#8E8F8B;">]</span><span style="color:#A65E2B;">\\#</span><span style="color:#393A34;"> ss -tnulp</span></span>
<span class="line"><span style="color:#393A34;">Netid State      Recv-Q Send-Q                  Local Address:Port                                 Peer Address:Port              </span></span>
<span class="line"><span style="color:#393A34;">udp   UNCONN     0      0                                   </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">:68                                              </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;dhclient&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">791</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">6</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      128                                 </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">:22                                              </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;sshd&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">977</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">3</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      100                         127.0.0.1:25                                              </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;master&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">1167</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">13</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      128                              </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:22                                           </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;sshd&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">977</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">4</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      100                              </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:8888                                         </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;java&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">4805</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">55</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      100                             </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::1</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:25                                           </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;master&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">1167</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">14</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      1                  </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::ffff:127.0.0.1</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:8005                                         </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;java&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">4262</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">67</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      1                  </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::ffff:127.0.0.1</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:8006                                         </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;java&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">4805</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">67</span><span style="color:#B56959;">))</span></span>
<span class="line"><span style="color:#393A34;">tcp   LISTEN     0      100                              </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:8080                                         </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">::</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">:</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">                   users:</span><span style="color:#B56959;">((&quot;java&quot;</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">pid</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">4262</span><span style="color:#AB5959;">,</span><span style="color:#B56959;">fd</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">55</span><span style="color:#B56959;">))</span></span>
<span class="line"></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230<code>8888</code>\u3001<code>8080</code>\u3001<code>8005</code>\u548C<code>8006</code>\u5DF2\u7ECF\u5904\u4E8E\u76D1\u542C\u72B6\u6001\u3002</p><h2 id="\u914D\u7F6E-nginx" tabindex="-1">\u914D\u7F6E Nginx <a class="header-anchor" href="#\u914D\u7F6E-nginx" aria-hidden="true">#</a></h2><p>\u8FD9\u91CC\u76F4\u63A5\u6A21\u62DF\u6D4B\u8BD5\u52A8\u9759\u5206\u79BB\u7684\u8FC7\u7A0B\u3002</p><p>\u76F4\u63A5\u7F16\u8F91 nginx \u7684\u4E3B\u914D\u7F6E\u6587\u4EF6<code>/etc/nginx/nginx.conf</code>\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u5728 http \u914D\u7F6E\u6BB5\u4E2D\u6DFB\u52A0\u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9</span></span>
<span class="line"><span style="color:#DBD7CA;">    upstream tomcat-server </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">        server 127.0.0.1:8080 weight=1</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">        server 127.0.0.1:8888 weight=1</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">        server 127.0.0.1:8005 weight=1</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">        server 127.0.0.1:8006 weight=1</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;"># \u5E76\u76F4\u63A5\u4FEE\u6539\u539F\u6765\u7684 server \u6BB5\u5185\u5BB9</span></span>
<span class="line"><span style="color:#DBD7CA;">    server </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">            listen       80</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">            server_name  localhost</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">            root         /usr/share/nginx/html</span><span style="color:#CB7676;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">            location </span><span style="color:#CB7676;">~*</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">\\.</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">gif</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">jpg</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">jpeg</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">png</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">bmp</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">swf</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">css</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;">$ </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">                root /usr/share/nginx/html/imgs</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">                expires 30d</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">            </span><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">            location </span><span style="color:#CB7676;">~*</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">\\.</span><span style="color:#DBD7CA;">jsp$ </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">                proxy_pass http://tomcat-server</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">                proxy_set_header Host </span><span style="color:#858585;">$</span><span style="color:#B8A965;">host</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">            </span><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">            location / </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">                index  index.html index.htm</span><span style="color:#CB7676;">;</span></span>
<span class="line"><span style="color:#858585;">                </span><span style="color:#758575;"># proxy_pass http://tomcat-server;</span></span>
<span class="line"><span style="color:#DBD7CA;">            </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u5728 http \u914D\u7F6E\u6BB5\u4E2D\u6DFB\u52A0\u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9</span></span>
<span class="line"><span style="color:#393A34;">    upstream tomcat-server </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        server 127.0.0.1:8080 weight=1</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">        server 127.0.0.1:8888 weight=1</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">        server 127.0.0.1:8005 weight=1</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">        server 127.0.0.1:8006 weight=1</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;"># \u5E76\u76F4\u63A5\u4FEE\u6539\u539F\u6765\u7684 server \u6BB5\u5185\u5BB9</span></span>
<span class="line"><span style="color:#393A34;">    server </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">            listen       80</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">            server_name  localhost</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">            root         /usr/share/nginx/html</span><span style="color:#AB5959;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">            location </span><span style="color:#AB5959;">~*</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">\\.</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">gif</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">jpg</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">jpeg</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">png</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">bmp</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">swf</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">css</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;">$ </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">                root /usr/share/nginx/html/imgs</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">                expires 30d</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">            location </span><span style="color:#AB5959;">~*</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">\\.</span><span style="color:#393A34;">jsp$ </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">                proxy_pass http://tomcat-server</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">                proxy_set_header Host </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">host</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">            location / </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">                index  index.html index.htm</span><span style="color:#AB5959;">;</span></span>
<span class="line"><span style="color:#8E8F8B;">                </span><span style="color:#A0ADA0;"># proxy_pass http://tomcat-server;</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6700\u540E\u542F\u52A8 nginx \u670D\u52A1\u5373\u53EF\uFF0C<code>systemctl restart nginx</code></p><p>\u6253\u5F00\u6D4F\u89C8\u5668\u67E5\u770B\uFF1A</p><p><img src="http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/tomcat/tomcat-4.png" alt="" title="Tomcat-2"></p><p><img src="http://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/tomcat/tomcat-5.png" alt="" title="Tomcat-1"></p>`,29),t=[o];function e(c,r,y,A,B,D){return a(),n("div",null,t)}var d=s(l,[["render",e]]);export{i as __pageData,d as default};
