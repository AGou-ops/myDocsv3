import{_ as s,o as a,c as n,a as p}from"./app.1e6146c3.js";const D=JSON.parse('{"title":"Terraform \u53D8\u91CF","description":"","frontmatter":{},"headers":[{"level":2,"title":"Input Vars(\u8F93\u5165\u53D8\u91CF)","slug":"input-vars-\u8F93\u5165\u53D8\u91CF"},{"level":3,"title":"\u4ECE\u6587\u4EF6\u8BFB\u53D6","slug":"\u4ECE\u6587\u4EF6\u8BFB\u53D6"},{"level":3,"title":"\u4ECE\u547D\u4EE4\u884C\u4F20\u9012","slug":"\u4ECE\u547D\u4EE4\u884C\u4F20\u9012"},{"level":3,"title":"\u4ECE\u73AF\u5883\u53D8\u91CF\u4E2D\u8BFB\u5165","slug":"\u4ECE\u73AF\u5883\u53D8\u91CF\u4E2D\u8BFB\u5165"},{"level":3,"title":"\u4ECEcli\u8FD0\u884C\u65F6\u8BFB\u5165","slug":"\u4ECEcli\u8FD0\u884C\u65F6\u8BFB\u5165"},{"level":3,"title":"\u5BCC\u6570\u636E\u7C7B\u578B\u53D8\u91CF","slug":"\u5BCC\u6570\u636E\u7C7B\u578B\u53D8\u91CF"},{"level":2,"title":"Query Data with Output Vars","slug":"query-data-with-output-vars"},{"level":3,"title":"\u5B9A\u4E49\u8F93\u51FA","slug":"\u5B9A\u4E49\u8F93\u51FA"}],"relativePath":"LinuxBasics/Terraform/Terraform Variable.md","lastUpdated":1657272051000}'),l={name:"LinuxBasics/Terraform/Terraform Variable.md"},e=p(`<h1 id="terraform-\u53D8\u91CF" tabindex="-1">Terraform \u53D8\u91CF <a class="header-anchor" href="#terraform-\u53D8\u91CF" aria-hidden="true">#</a></h1><h2 id="input-vars-\u8F93\u5165\u53D8\u91CF" tabindex="-1">Input Vars(\u8F93\u5165\u53D8\u91CF) <a class="header-anchor" href="#input-vars-\u8F93\u5165\u53D8\u91CF" aria-hidden="true">#</a></h2><p>\u5982\u679C\u53D8\u91CF\u4E3A\u88AB\u5B9A\u4E49, \u5219\u4F1A\u8BFB\u53D6<code>default</code>\u952E\u7684\u503C\u4F5C\u4E3A\u9ED8\u8BA4\u53D8\u91CF\u503C.</p><h3 id="\u4ECE\u6587\u4EF6\u8BFB\u53D6" tabindex="-1">\u4ECE\u6587\u4EF6\u8BFB\u53D6 <a class="header-anchor" href="#\u4ECE\u6587\u4EF6\u8BFB\u53D6" aria-hidden="true">#</a></h3><p>\u521B\u5EFA\u6587\u4EF6, \u540D\u79F0\u4E3A<code>terraform.tfvars</code>, \u793A\u4F8B\u5185\u5BB9\u5982\u4E0B\u6240\u793A:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">region = </span><span style="color:#C98A7D;">&quot;us-west-2&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">region = </span><span style="color:#B56959;">&quot;us-west-2&quot;</span></span>
<span class="line"></span></code></pre></div><p><code>Terraform</code>\u4F1A\u81EA\u52A8\u8BFB\u5165\u8BE5\u6587\u4EF6, \u6B64\u5916\u8FD8\u6709<code>*.auto.tfvars</code>\u4E3A\u540D\u7684\u6587\u4EF6\u4E5F\u4F1A\u88AB\u81EA\u52A8\u8BFB\u53D6.</p><p>\u82E5\u8981\u6307\u5B9A\u8BFB\u53D6\u7684\u6587\u4EF6, \u53EF\u4EE5\u4F7F\u7528<code>terraform apply -var-file &lt;TF_VAR_FILE&gt;</code>\u6307\u5B9A\u6240\u8981\u4F7F\u7528\u7684\u53D8\u91CF\u6587\u4EF6.</p><h3 id="\u4ECE\u547D\u4EE4\u884C\u4F20\u9012" tabindex="-1">\u4ECE\u547D\u4EE4\u884C\u4F20\u9012 <a class="header-anchor" href="#\u4ECE\u547D\u4EE4\u884C\u4F20\u9012" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">$ terraform apply -var </span><span style="color:#C98A7D;">&#39;region=us-west-2&#39;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">$ terraform apply -var </span><span style="color:#B56959;">&#39;region=us-west-2&#39;</span></span>
<span class="line"></span></code></pre></div><h3 id="\u4ECE\u73AF\u5883\u53D8\u91CF\u4E2D\u8BFB\u5165" tabindex="-1">\u4ECE\u73AF\u5883\u53D8\u91CF\u4E2D\u8BFB\u5165 <a class="header-anchor" href="#\u4ECE\u73AF\u5883\u53D8\u91CF\u4E2D\u8BFB\u5165" aria-hidden="true">#</a></h3><p>\u5B9A\u4E49\u7CFB\u7EDF\u73AF\u5883\u53D8\u91CF, \u4EE5<code>TF_VAR_</code>\u5F00\u5934, \u6BD4\u5982:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#CB7676;">export</span><span style="color:#DBD7CA;"> TF_VAR_region=us-west-2</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#AB5959;">export</span><span style="color:#393A34;"> TF_VAR_region=us-west-2</span></span>
<span class="line"></span></code></pre></div><h3 id="\u4ECEcli\u8FD0\u884C\u65F6\u8BFB\u5165" tabindex="-1">\u4ECEcli\u8FD0\u884C\u65F6\u8BFB\u5165 <a class="header-anchor" href="#\u4ECEcli\u8FD0\u884C\u65F6\u8BFB\u5165" aria-hidden="true">#</a></h3><p>\u5F53\u53D8\u91CF\u672A\u8D4B\u4E88\u9ED8\u8BA4\u503C\u5E76\u672A\u6307\u5B9A\u5176\u503C\u65F6, \u8FD0\u884C<code>terraform apply</code>\u65F6\u4F1A\u63D0\u793A\u8F93\u5165\u53D8\u91CF.</p><h3 id="\u5BCC\u6570\u636E\u7C7B\u578B\u53D8\u91CF" tabindex="-1">\u5BCC\u6570\u636E\u7C7B\u578B\u53D8\u91CF <a class="header-anchor" href="#\u5BCC\u6570\u636E\u7C7B\u578B\u53D8\u91CF" aria-hidden="true">#</a></h3><p>\u5BCC\u6570\u636E\u7C7B\u578B\u5305\u62EC<code>List</code>, <code>Maps</code>, \u5982\u4E0B\u6240\u793A:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># Lists</span></span>
<span class="line"><span style="color:#DBD7CA;">variable </span><span style="color:#C98A7D;">&quot;cidrs&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">type</span><span style="color:#DBD7CA;"> = list </span></span>
<span class="line"><span style="color:#DBD7CA;">  default = </span><span style="color:#858585;">[]</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># Maps</span></span>
<span class="line"><span style="color:#DBD7CA;">variable </span><span style="color:#C98A7D;">&quot;amis&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">type</span><span style="color:#DBD7CA;"> = </span><span style="color:#C98A7D;">&quot;map&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  default = </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">&quot;us-east-1&quot;</span><span style="color:#DBD7CA;"> = </span><span style="color:#C98A7D;">&quot;ami-b374d5a5&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">&quot;us-west-2&quot;</span><span style="color:#DBD7CA;"> = </span><span style="color:#C98A7D;">&quot;ami-fc0b939c&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#758575;"># \u5F15\u7528</span></span>
<span class="line"><span style="color:#DBD7CA;">resource </span><span style="color:#C98A7D;">&quot;aws_instance&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;example&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  ami           = var.amis</span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">var.region</span><span style="color:#858585;">]</span></span>
<span class="line"><span style="color:#DBD7CA;">  instance_type = </span><span style="color:#C98A7D;">&quot;t2.micro&quot;</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># Lists</span></span>
<span class="line"><span style="color:#393A34;">variable </span><span style="color:#B56959;">&quot;cidrs&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">type</span><span style="color:#393A34;"> = list </span></span>
<span class="line"><span style="color:#393A34;">  default = </span><span style="color:#8E8F8B;">[]</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># Maps</span></span>
<span class="line"><span style="color:#393A34;">variable </span><span style="color:#B56959;">&quot;amis&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">type</span><span style="color:#393A34;"> = </span><span style="color:#B56959;">&quot;map&quot;</span></span>
<span class="line"><span style="color:#393A34;">  default = </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">&quot;us-east-1&quot;</span><span style="color:#393A34;"> = </span><span style="color:#B56959;">&quot;ami-b374d5a5&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">&quot;us-west-2&quot;</span><span style="color:#393A34;"> = </span><span style="color:#B56959;">&quot;ami-fc0b939c&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5F15\u7528</span></span>
<span class="line"><span style="color:#393A34;">resource </span><span style="color:#B56959;">&quot;aws_instance&quot;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;example&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  ami           = var.amis</span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">var.region</span><span style="color:#8E8F8B;">]</span></span>
<span class="line"><span style="color:#393A34;">  instance_type = </span><span style="color:#B56959;">&quot;t2.micro&quot;</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="query-data-with-output-vars" tabindex="-1">Query Data with Output Vars <a class="header-anchor" href="#query-data-with-output-vars" aria-hidden="true">#</a></h2><h3 id="\u5B9A\u4E49\u8F93\u51FA" tabindex="-1">\u5B9A\u4E49\u8F93\u51FA <a class="header-anchor" href="#\u5B9A\u4E49\u8F93\u51FA" aria-hidden="true">#</a></h3><p>\u521B\u5EFA\u8F93\u51FA\u6587\u4EF6<code>outputest.tf</code>, \u793A\u4F8B\u5185\u5BB9\u5982\u4E0B\u6240\u793A:</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">output </span><span style="color:#C98A7D;">&quot;ip&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  value = aws_eip.ip.public_ip</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">output </span><span style="color:#B56959;">&quot;ip&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  value = aws_eip.ip.public_ip</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528\u547D\u4EE4\u884C<code>terraform output ip</code>\u4E5F\u53EF\u4EE5\u83B7\u5F97\u6240\u9700\u7684\u8F93\u51FA\u53D8\u91CF.</p>`,23),o=[e];function t(c,r,i,y,d,u){return a(),n("div",null,o)}var h=s(l,[["render",t]]);export{D as __pageData,h as default};
