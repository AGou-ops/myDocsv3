import{_ as s,o as e,c as a,a as p}from"./app.1e6146c3.js";const v=JSON.parse('{"title":"ceph \u90E8\u7F72\u95EE\u9898\u6C47\u603B","description":"","frontmatter":{},"headers":[{"level":2,"title":"ceph\u90E8\u7F72\u95EE\u9898\u6C47\u603B","slug":"ceph\u90E8\u7F72\u95EE\u9898\u6C47\u603B"}],"relativePath":"LinuxBasics/FileSystem/Ceph/ceph \u90E8\u7F72\u95EE\u9898\u6C47\u603B.md","lastUpdated":1657272051000}'),n={name:"LinuxBasics/FileSystem/Ceph/ceph \u90E8\u7F72\u95EE\u9898\u6C47\u603B.md"},c=p(`<h1 id="ceph-\u90E8\u7F72\u95EE\u9898\u6C47\u603B" tabindex="-1">ceph \u90E8\u7F72\u95EE\u9898\u6C47\u603B <a class="header-anchor" href="#ceph-\u90E8\u7F72\u95EE\u9898\u6C47\u603B" aria-hidden="true">#</a></h1><h2 id="ceph\u90E8\u7F72\u95EE\u9898\u6C47\u603B" tabindex="-1">ceph\u90E8\u7F72\u95EE\u9898\u6C47\u603B <a class="header-anchor" href="#ceph\u90E8\u7F72\u95EE\u9898\u6C47\u603B" aria-hidden="true">#</a></h2><ol><li><p>\u8FD0\u884C<code>ceph-deploy --verion</code>\u6216\u8005\u76F8\u5173\u547D\u4EE4\u51FA\u73B0<code>Traceback (most recent call last): File &quot;/usr/bin/ceph-deploy&quot;, line 5, in &lt;module&gt; from pkg_resources import load_entry_point ImportError: No module named pkg_resources</code>\u62A5\u9519\u3002 \u89E3\u51B3\u65B9\u6CD5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">yum install -y python-setuptools</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">yum install -y python-setuptools</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u8FD0\u884C<code>ceph-deploy install</code>\u65F6\u51FA\u73B0<code>[ceph_deploy][ERROR ] RuntimeError: Failed to execute command: yum -y install yum-plugin-priorities</code>\u3002 \u89E3\u51B3\u65B9\u6CD5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u5C1D\u8BD5\u6E05\u7406yum\u7F13\u5B58\u5E76\u91CD\u5EFA\u7F13\u5B58</span></span>
<span class="line"><span style="color:#DBD7CA;">yum clean all</span></span>
<span class="line"><span style="color:#DBD7CA;">yum makecache</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u5C1D\u8BD5\u6E05\u7406yum\u7F13\u5B58\u5E76\u91CD\u5EFA\u7F13\u5B58</span></span>
<span class="line"><span style="color:#393A34;">yum clean all</span></span>
<span class="line"><span style="color:#393A34;">yum makecache</span></span>
<span class="line"></span></code></pre></div></li></ol><p>\u6216\u8005\u53EF\u80FD\u662F\u7531\u4E8E\u7F51\u7EDC\u539F\u56E0\uFF0C\u53EF\u4EE5\u5355\u72EC\u5BF9\u5931\u8D25\u7684\u8282\u70B9\u91CD\u65B0install\u4E00\u904D</p><ol start="3"><li><p>\u8FD0\u884C<code>ceph-deploy admin</code>\u5206\u53D1\u5BC6\u94A5\u65F6\u51FA\u73B0<code>[ceph_deploy.admin][ERROR ] RuntimeError: config file /etc/ceph/ceph.conf exists with different content; use --overwrite-conf to ov</code>\u3002 \u89E3\u51B3\u65B9\u6CD5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">ceph-deploy --overwrite-conf config push stor1 stor2 stor3</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">ceph-deploy --overwrite-conf config push stor1 stor2 stor3</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u6DFB\u52A0osd<code>ceph-deploy osd create</code>\u65F6\u51FA\u73B0<code>[ceph_deploy.osd][ERROR ] Failed to execute command: /usr/sbin/ceph-volume --cluster ceph lvm create --bluestore --data /dev/sdb</code>\u3002 \u89E3\u51B3\u65B9\u6CD5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">\u8FD9\u91CC\u7684key \u53EF\u4EE5\u4ECE</span><span style="color:#C98A7D;">\`ceph auth get client.bootstrap-osd\`</span><span style="color:#DBD7CA;"> \u91CC\u9762\u5F97\u5230</span></span>
<span class="line"><span style="color:#DBD7CA;">cat /var/lib/ceph/bootstrap-osd/ceph.keyring</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">client.bootstrap-osd</span><span style="color:#858585;">]</span></span>
<span class="line"><span style="color:#DBD7CA;">        key = AQD9qhRcBjs+MRAAKGOWtabeQlc/HvVa+yemv</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">\u8FD9\u91CC\u7684key \u53EF\u4EE5\u4ECE</span><span style="color:#B56959;">\`ceph auth get client.bootstrap-osd\`</span><span style="color:#393A34;"> \u91CC\u9762\u5F97\u5230</span></span>
<span class="line"><span style="color:#393A34;">cat /var/lib/ceph/bootstrap-osd/ceph.keyring</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">client.bootstrap-osd</span><span style="color:#8E8F8B;">]</span></span>
<span class="line"><span style="color:#393A34;">        key = AQD9qhRcBjs+MRAAKGOWtabeQlc/HvVa+yemv</span></span>
<span class="line"></span></code></pre></div></li></ol><p>\u5B9E\u5728\u4E0D\u884C\u6216\u8005\u5220\u9664\u6389\u9519\u8BEF\u8282\u70B9\u7684<code>/var/lib/ceph/bootstrap-osd/ceph.keyring</code>\uFF0C\u518D\u91CD\u65B0<code>ceph-deploy admin</code>\u4E00\u6B21</p><p>\u{1F642} \u7EC8\u6781\u65B9\u6CD5\uFF1A</p><p>\u5982\u679C\u5728\u67D0\u4E9B\u5730\u65B9\u78B0\u5230\u9EBB\u70E6\uFF0C\u60F3\u4ECE\u5934\u518D\u6765\uFF0C\u53EF\u4EE5\u7528\u4E0B\u5217\u547D\u4EE4\u6E05\u9664\u914D\u7F6E\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">ceph-deploy purgedata {ceph-node} [{ceph-node}]</span></span>
<span class="line"><span style="color:#dbd7ca;">ceph-deploy forgetkeys</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">ceph-deploy purgedata {ceph-node} [{ceph-node}]</span></span>
<span class="line"><span style="color:#393a34;">ceph-deploy forgetkeys</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>\u7528\u4E0B\u5217\u547D\u4EE4\u53EF\u4EE5\u8FDE Ceph \u5B89\u88C5\u5305\u4E00\u8D77\u6E05\u9664\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">ceph-deploy purge {ceph-node} [{ceph-node}]</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">ceph-deploy purge {ceph-node} [{ceph-node}]</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div>`,11),l=[c];function o(t,d,r,i,h,y){return e(),a("div",null,l)}var m=s(n,[["render",o]]);export{v as __pageData,m as default};
