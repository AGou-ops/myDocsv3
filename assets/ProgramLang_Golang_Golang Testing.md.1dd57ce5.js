import{_ as s,o as n,c as a,a as p}from"./app.1e6146c3.js";const C=JSON.parse('{"title":"Golang \u6D4B\u8BD5","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5355\u5143\u6D4B\u8BD5","slug":"\u5355\u5143\u6D4B\u8BD5"},{"level":3,"title":"\u7B80\u5355\u793A\u4F8B","slug":"\u7B80\u5355\u793A\u4F8B"},{"level":3,"title":"\u62A5\u544A\u65B9\u6CD5","slug":"\u62A5\u544A\u65B9\u6CD5"},{"level":2,"title":"\u57FA\u51C6\u6D4B\u8BD5","slug":"\u57FA\u51C6\u6D4B\u8BD5"},{"level":3,"title":"\u7B80\u5355\u6837\u4F8B","slug":"\u7B80\u5355\u6837\u4F8B"},{"level":2,"title":"\u53C2\u8003\u94FE\u63A5","slug":"\u53C2\u8003\u94FE\u63A5"}],"relativePath":"ProgramLang/Golang/Golang Testing.md","lastUpdated":1657272051000}'),l={name:"ProgramLang/Golang/Golang Testing.md"},o=p(`<h1 id="golang-\u6D4B\u8BD5" tabindex="-1">Golang \u6D4B\u8BD5 <a class="header-anchor" href="#golang-\u6D4B\u8BD5" aria-hidden="true">#</a></h1><h2 id="\u5355\u5143\u6D4B\u8BD5" tabindex="-1">\u5355\u5143\u6D4B\u8BD5 <a class="header-anchor" href="#\u5355\u5143\u6D4B\u8BD5" aria-hidden="true">#</a></h2><h3 id="\u7B80\u5355\u793A\u4F8B" tabindex="-1">\u7B80\u5355\u793A\u4F8B <a class="header-anchor" href="#\u7B80\u5355\u793A\u4F8B" aria-hidden="true">#</a></h3><p>\u4ECE\u4E00\u4E2A\u7B80\u5355\u7684\u6837\u4F8B\u5F00\u59CB\uFF1A</p><div class="language-go"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">(</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">&quot;</span><span style="color:#A1B567;">fmt</span><span style="color:#C98A7D;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#C98A7D;">&quot;</span><span style="color:#A1B567;">testing</span><span style="color:#C98A7D;">&quot;</span></span>
<span class="line"><span style="color:#858585;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">func</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">IntMin</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">a</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> b </span><span style="color:#CB7676;">int</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">int</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> a </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;"> b </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> a</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> b</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">func</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">TestIntMinBasic</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">t </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">testing</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">T</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;">		</span><span style="color:#758575;">// \u5355\u5143\u6D4B\u8BD5\u51FD\u6570\u683C\u5F0F\u4E3ATestXxx\uFF0C\u6D4B\u8BD5\u51FD\u6570\u7684\u7B7E\u540D\u5FC5\u987B\u63A5\u6536\u4E00\u4E2A\u6307\u5411 testing.T \u7C7B\u578B\u7684\u6307\u9488\uFF0C\u5E76\u4E14\u4E0D\u80FD\u8FD4\u56DE\u4EFB\u4F55\u503C</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#B8A965;">ans</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:=</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">IntMin</span><span style="color:#858585;">(</span><span style="color:#6394BF;">2</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">2</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> ans </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">2</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">        t</span><span style="color:#858585;">.</span><span style="color:#E0A569;">Errorf</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;IntMin(2, -2) = </span><span style="color:#D4976C;">%d</span><span style="color:#C98A7D;">; want -2&quot;</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> ans</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;">// Table-Driven Test\uFF0C\u8868\u683C\u9A71\u52A8\u578B\u6D4B\u8BD5\u3002</span></span>
<span class="line"><span style="color:#4D9375;">func</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">TestIntMinTableDriven</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">t </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">testing</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">T</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">var</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">tests</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[]</span><span style="color:#4D9375;">struct</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">        a</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> b </span><span style="color:#CB7676;">int</span></span>
<span class="line"><span style="color:#DBD7CA;">        want </span><span style="color:#CB7676;">int</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}{</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">{</span><span style="color:#6394BF;">0</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">1</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#858585;">},</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">{</span><span style="color:#6394BF;">1</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#858585;">},</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">{</span><span style="color:#6394BF;">2</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">2</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">2</span><span style="color:#858585;">},</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">{</span><span style="color:#6394BF;">0</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">1</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">1</span><span style="color:#858585;">},</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">{</span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">1</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">1</span><span style="color:#858585;">},</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">_</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">tt</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">range</span><span style="color:#DBD7CA;"> tests </span><span style="color:#858585;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#B8A965;">testname</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:=</span><span style="color:#DBD7CA;"> fmt</span><span style="color:#858585;">.</span><span style="color:#E0A569;">Sprintf</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;</span><span style="color:#D4976C;">%d</span><span style="color:#C98A7D;">,</span><span style="color:#D4976C;">%d</span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> tt</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">a</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> tt</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">b</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;">		</span><span style="color:#758575;">// \u6D4B\u8BD5\u540D\u79F0</span></span>
<span class="line"><span style="color:#DBD7CA;">        t</span><span style="color:#858585;">.</span><span style="color:#E0A569;">Run</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">testname</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">func</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">t </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">testing</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">T</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">            </span><span style="color:#B8A965;">ans</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:=</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">IntMin</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">tt</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">a</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> tt</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">b</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">            </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> ans </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CA;"> tt</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">want </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">                t</span><span style="color:#858585;">.</span><span style="color:#E0A569;">Errorf</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;got </span><span style="color:#D4976C;">%d</span><span style="color:#C98A7D;">, want </span><span style="color:#D4976C;">%d</span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> ans</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> tt</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">want</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">            </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">})</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1C6B48;">package</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">&quot;</span><span style="color:#6C7834;">fmt</span><span style="color:#B56959;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959;">&quot;</span><span style="color:#6C7834;">testing</span><span style="color:#B56959;">&quot;</span></span>
<span class="line"><span style="color:#8E8F8B;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">func</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">IntMin</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">a</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> b </span><span style="color:#AB5959;">int</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">int</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> a </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> b </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> a</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> b</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">func</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">TestIntMinBasic</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">t </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">testing</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">T</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;">		</span><span style="color:#A0ADA0;">// \u5355\u5143\u6D4B\u8BD5\u51FD\u6570\u683C\u5F0F\u4E3ATestXxx\uFF0C\u6D4B\u8BD5\u51FD\u6570\u7684\u7B7E\u540D\u5FC5\u987B\u63A5\u6536\u4E00\u4E2A\u6307\u5411 testing.T \u7C7B\u578B\u7684\u6307\u9488\uFF0C\u5E76\u4E14\u4E0D\u80FD\u8FD4\u56DE\u4EFB\u4F55\u503C</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">ans</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:=</span><span style="color:#393A34;"> </span><span style="color:#B58451;">IntMin</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> ans </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">2</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">        t</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">Errorf</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;IntMin(2, -2) = </span><span style="color:#A65E2B;">%d</span><span style="color:#B56959;">; want -2&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> ans</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// Table-Driven Test\uFF0C\u8868\u683C\u9A71\u52A8\u578B\u6D4B\u8BD5\u3002</span></span>
<span class="line"><span style="color:#1C6B48;">func</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">TestIntMinTableDriven</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">t </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">testing</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">T</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">var</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">tests</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[]</span><span style="color:#1C6B48;">struct</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        a</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> b </span><span style="color:#AB5959;">int</span></span>
<span class="line"><span style="color:#393A34;">        want </span><span style="color:#AB5959;">int</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">{</span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">{</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">{</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">{</span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">{</span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">_</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">tt</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">range</span><span style="color:#393A34;"> tests </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8C862B;">testname</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:=</span><span style="color:#393A34;"> fmt</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">Sprintf</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;</span><span style="color:#A65E2B;">%d</span><span style="color:#B56959;">,</span><span style="color:#A65E2B;">%d</span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> tt</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">a</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> tt</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">b</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;">		</span><span style="color:#A0ADA0;">// \u6D4B\u8BD5\u540D\u79F0</span></span>
<span class="line"><span style="color:#393A34;">        t</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">Run</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">testname</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">func</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">t </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">testing</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">T</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#8C862B;">ans</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:=</span><span style="color:#393A34;"> </span><span style="color:#B58451;">IntMin</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">tt</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">a</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> tt</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">b</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> ans </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> tt</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">want </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">                t</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">Errorf</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;got </span><span style="color:#A65E2B;">%d</span><span style="color:#B56959;">, want </span><span style="color:#A65E2B;">%d</span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> ans</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> tt</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">want</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">})</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528<code>go test</code>\u547D\u4EE4\u884C\u5DE5\u5177\u8FDB\u884C\u6D4B\u8BD5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">$ go </span><span style="color:#E0A569;">test</span><span style="color:#DBD7CA;"> -v -cover </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">FILENAME</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">			</span><span style="color:#758575;"># -v\u663E\u793A\u8BE6\u7EC6\u4FE1\u606F\uFF0C-cover\u663E\u793A\u6D4B\u8BD5\u8986\u76D6\u7387</span></span>
<span class="line"><span style="color:#758575;"># \u5982\u679C\u60F3\u6D4B\u8BD5\u5F53\u524D\u9879\u76EE\u6240\u6709\u6587\u4EF6\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4</span></span>
<span class="line"><span style="color:#DBD7CA;">$ go </span><span style="color:#E0A569;">test</span><span style="color:#DBD7CA;"> ./...</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">$ go </span><span style="color:#B58451;">test</span><span style="color:#393A34;"> -v -cover </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">FILENAME</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">			</span><span style="color:#A0ADA0;"># -v\u663E\u793A\u8BE6\u7EC6\u4FE1\u606F\uFF0C-cover\u663E\u793A\u6D4B\u8BD5\u8986\u76D6\u7387</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5982\u679C\u60F3\u6D4B\u8BD5\u5F53\u524D\u9879\u76EE\u6240\u6709\u6587\u4EF6\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4</span></span>
<span class="line"><span style="color:#393A34;">$ go </span><span style="color:#B58451;">test</span><span style="color:#393A34;"> ./...</span></span>
<span class="line"></span></code></pre></div><h3 id="\u62A5\u544A\u65B9\u6CD5" tabindex="-1">\u62A5\u544A\u65B9\u6CD5 <a class="header-anchor" href="#\u62A5\u544A\u65B9\u6CD5" aria-hidden="true">#</a></h3><p>\u5355\u5143\u6D4B\u8BD5\u4E2D\uFF0C\u4F20\u9012\u7ED9\u6D4B\u8BD5\u51FD\u6570\u7684\u53C2\u6570\u662F <code>*testing.T</code> \u7C7B\u578B\u3002\u5B83\u7528\u4E8E\u7BA1\u7406\u6D4B\u8BD5\u72B6\u6001\u5E76\u652F\u6301\u683C\u5F0F\u5316\u6D4B\u8BD5\u65E5\u5FD7\u3002\u6D4B\u8BD5\u65E5\u5FD7\u4F1A\u5728\u6267\u884C\u6D4B\u8BD5\u7684\u8FC7\u7A0B\u4E2D\u4E0D\u65AD\u7D2F\u79EF\uFF0C\u5E76\u5728\u6D4B\u8BD5\u5B8C\u6210\u65F6\u8F6C\u50A8\u81F3\u6807\u51C6\u8F93\u51FA\u3002</p><p>\u5F53\u6D4B\u8BD5\u51FD\u6570\u8FD4\u56DE\u65F6\uFF0C\u6216\u8005\u5F53\u6D4B\u8BD5\u51FD\u6570\u8C03\u7528 <code>FailNow</code>\u3001 <code>Fatal</code>\u3001<code>Fatalf</code>\u3001<code>SkipNow</code>\u3001<code>Skip</code>\u3001<code>Skipf</code> \u4E2D\u7684\u4EFB\u610F\u4E00\u4E2A\u65F6\uFF0C\u5219\u5BA3\u544A\u8BE5\u6D4B\u8BD5\u51FD\u6570\u7ED3\u675F\u3002\u8DDF <code>Parallel</code> \u65B9\u6CD5\u4E00\u6837\uFF0C\u4EE5\u4E0A\u63D0\u5230\u7684\u8FD9\u4E9B\u65B9\u6CD5\u53EA\u80FD\u5728\u8FD0\u884C\u6D4B\u8BD5\u51FD\u6570\u7684 goroutine \u4E2D\u8C03\u7528\u3002</p><p>\u81F3\u4E8E\u5176\u4ED6\u62A5\u544A\u65B9\u6CD5\uFF0C\u6BD4\u5982 <code>Log</code> \u4EE5\u53CA <code>Error</code> \u7684\u53D8\u79CD\uFF0C \u5219\u53EF\u4EE5\u5728\u591A\u4E2A goroutine \u4E2D\u540C\u65F6\u8FDB\u884C\u8C03\u7528\u3002</p><p>\u4E0A\u9762\u63D0\u5230\u7684\u7CFB\u5217\u5305\u62EC\u65B9\u6CD5\uFF0C\u5E26 <code>f</code> \u7684\u662F\u683C\u5F0F\u5316\u7684\uFF0C\u683C\u5F0F\u5316\u8BED\u6CD5\u53C2\u8003 <code>fmt</code> \u5305\u3002</p><p>T \u7C7B\u578B\u5185\u5D4C\u4E86 common \u7C7B\u578B\uFF0Ccommon \u63D0\u4F9B\u8FD9\u4E00\u7CFB\u5217\u65B9\u6CD5\uFF0C\u6211\u4EEC\u7ECF\u5E38\u4F1A\u7528\u5230\u7684\uFF08\u6CE8\u610F\uFF0C\u8FD9\u91CC\u8BF4\u7684\u6D4B\u8BD5\u4E2D\u65AD\uFF0C\u90FD\u662F\u6307\u5F53\u524D\u6D4B\u8BD5\u51FD\u6570\uFF09\uFF1A</p><p>1\uFF09\u5F53\u6211\u4EEC\u9047\u5230\u4E00\u4E2A\u65AD\u8A00\u9519\u8BEF\u7684\u65F6\u5019\uFF0C\u6807\u8BC6\u8FD9\u4E2A\u6D4B\u8BD5\u5931\u8D25\uFF0C\u4F1A\u4F7F\u7528\u5230\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">Fail : \u6D4B\u8BD5\u5931\u8D25\uFF0C\u6D4B\u8BD5\u7EE7\u7EED\uFF0C\u4E5F\u5C31\u662F\u4E4B\u540E\u7684\u4EE3\u7801\u4F9D\u7136\u4F1A\u6267\u884C</span></span>
<span class="line"><span style="color:#dbd7ca;">FailNow : \u6D4B\u8BD5\u5931\u8D25\uFF0C\u6D4B\u8BD5\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">Fail : \u6D4B\u8BD5\u5931\u8D25\uFF0C\u6D4B\u8BD5\u7EE7\u7EED\uFF0C\u4E5F\u5C31\u662F\u4E4B\u540E\u7684\u4EE3\u7801\u4F9D\u7136\u4F1A\u6267\u884C</span></span>
<span class="line"><span style="color:#393a34;">FailNow : \u6D4B\u8BD5\u5931\u8D25\uFF0C\u6D4B\u8BD5\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>\u5728 <code>FailNow</code> \u65B9\u6CD5\u5B9E\u73B0\u7684\u5185\u90E8\uFF0C\u662F\u901A\u8FC7\u8C03\u7528 <code>runtime.Goexit()</code> \u6765\u4E2D\u65AD\u6D4B\u8BD5\u7684\u3002</p><p>2\uFF09\u5F53\u6211\u4EEC\u9047\u5230\u4E00\u4E2A\u65AD\u8A00\u9519\u8BEF\uFF0C\u53EA\u5E0C\u671B\u8DF3\u8FC7\u8FD9\u4E2A\u9519\u8BEF\uFF0C\u4F46\u662F\u4E0D\u5E0C\u671B\u6807\u8BC6\u6D4B\u8BD5\u5931\u8D25\uFF0C\u4F1A\u4F7F\u7528\u5230\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">SkipNow : \u8DF3\u8FC7\u6D4B\u8BD5\uFF0C\u6D4B\u8BD5\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">SkipNow : \u8DF3\u8FC7\u6D4B\u8BD5\uFF0C\u6D4B\u8BD5\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>\u5728 <code>SkipNow</code> \u65B9\u6CD5\u5B9E\u73B0\u7684\u5185\u90E8\uFF0C\u662F\u901A\u8FC7\u8C03\u7528 <code>runtime.Goexit()</code> \u6765\u4E2D\u65AD\u6D4B\u8BD5\u7684\u3002</p><p>3\uFF09\u5F53\u6211\u4EEC\u53EA\u5E0C\u671B\u6253\u5370\u4FE1\u606F\uFF0C\u4F1A\u7528\u5230 :</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">Log : \u8F93\u51FA\u4FE1\u606F</span></span>
<span class="line"><span style="color:#dbd7ca;">Logf : \u8F93\u51FA\u683C\u5F0F\u5316\u7684\u4FE1\u606F</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">Log : \u8F93\u51FA\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393a34;">Logf : \u8F93\u51FA\u683C\u5F0F\u5316\u7684\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>\u6CE8\u610F\uFF1A\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5355\u5143\u6D4B\u8BD5\u6210\u529F\u65F6\uFF0C\u5B83\u4EEC\u6253\u5370\u7684\u4FE1\u606F\u4E0D\u4F1A\u8F93\u51FA\uFF0C\u53EF\u4EE5\u901A\u8FC7\u52A0\u4E0A <code>-v</code> \u9009\u9879\uFF0C\u8F93\u51FA\u8FD9\u4E9B\u4FE1\u606F\u3002\u4F46\u5BF9\u4E8E\u57FA\u51C6\u6D4B\u8BD5\uFF0C\u5B83\u4EEC\u603B\u662F\u4F1A\u88AB\u8F93\u51FA\u3002</p><p>4\uFF09\u5F53\u6211\u4EEC\u5E0C\u671B\u8DF3\u8FC7\u8FD9\u4E2A\u6D4B\u8BD5\uFF0C\u5E76\u4E14\u6253\u5370\u51FA\u4FE1\u606F\uFF0C\u4F1A\u7528\u5230\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">Skip : \u76F8\u5F53\u4E8E Log + SkipNow</span></span>
<span class="line"><span style="color:#dbd7ca;">Skipf : \u76F8\u5F53\u4E8E Logf + SkipNow</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">Skip : \u76F8\u5F53\u4E8E Log + SkipNow</span></span>
<span class="line"><span style="color:#393a34;">Skipf : \u76F8\u5F53\u4E8E Logf + SkipNow</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>5\uFF09\u5F53\u6211\u4EEC\u5E0C\u671B\u65AD\u8A00\u5931\u8D25\u7684\u65F6\u5019\uFF0C\u6807\u8BC6\u6D4B\u8BD5\u5931\u8D25\uFF0C\u5E76\u6253\u5370\u51FA\u5FC5\u8981\u7684\u4FE1\u606F\uFF0C<strong>\u4F46\u662F\u6D4B\u8BD5\u7EE7\u7EED</strong>\uFF0C\u4F1A\u7528\u5230\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">Error : \u76F8\u5F53\u4E8E Log + Fail</span></span>
<span class="line"><span style="color:#dbd7ca;">Errorf : \u76F8\u5F53\u4E8E Logf + Fail</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">Error : \u76F8\u5F53\u4E8E Log + Fail</span></span>
<span class="line"><span style="color:#393a34;">Errorf : \u76F8\u5F53\u4E8E Logf + Fail</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>6\uFF09\u5F53\u6211\u4EEC\u5E0C\u671B\u65AD\u8A00\u5931\u8D25\u7684\u65F6\u5019\uFF0C\u6807\u8BC6\u6D4B\u8BD5\u5931\u8D25\uFF0C\u6253\u5370\u51FA\u5FC5\u8981\u7684\u4FE1\u606F\uFF0C<strong>\u4F46\u4E2D\u65AD\u6D4B\u8BD5</strong>\uFF0C\u4F1A\u7528\u5230\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">Fatal : \u76F8\u5F53\u4E8E Log + FailNow</span></span>
<span class="line"><span style="color:#dbd7ca;">Fatalf : \u76F8\u5F53\u4E8E Logf + FailNow</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">Fatal : \u76F8\u5F53\u4E8E Log + FailNow</span></span>
<span class="line"><span style="color:#393a34;">Fatalf : \u76F8\u5F53\u4E8E Logf + FailNow</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><blockquote><p>\u6765\u6E90\uFF1A<a href="https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.1.html#t-%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.1.html#t-\u7C7B\u578B</a></p></blockquote><p>\u{1F60A}\u603B\u7ED3\uFF1A\u8BB0\u4F4F<code>Fail</code>\u3001<code>FailNow</code>\u3001<code>SkipNow</code>\u548C<code>Log</code>\uFF0C\u5176\u4ED6\u56DB\u79CD\u90FD\u662F\u7C7B\u4F3C\u4E8E\u8FD9\u4E09\u79CD\u7684\u5B9E\u73B0\u3002</p><h2 id="\u57FA\u51C6\u6D4B\u8BD5" tabindex="-1">\u57FA\u51C6\u6D4B\u8BD5 <a class="header-anchor" href="#\u57FA\u51C6\u6D4B\u8BD5" aria-hidden="true">#</a></h2><h3 id="\u7B80\u5355\u6837\u4F8B" tabindex="-1">\u7B80\u5355\u6837\u4F8B <a class="header-anchor" href="#\u7B80\u5355\u6837\u4F8B" aria-hidden="true">#</a></h3><div class="language-go"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">// fib.go</span></span>
<span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">func</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">fib</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">n </span><span style="color:#CB7676;">int</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">int</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> n </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CA;"> n </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">1</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">		</span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> n</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">fib</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">n</span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">2</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">fib</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">n</span><span style="color:#CB7676;">-</span><span style="color:#6394BF;">1</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#758575;">// fib_test.go</span></span>
<span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#A1B567;">testing</span><span style="color:#C98A7D;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">func</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">BenchmarkFib</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">b </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">testing</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">B</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    time</span><span style="color:#858585;">.</span><span style="color:#E0A569;">Sleep</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">time</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">Second </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">3</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#758575;">// \u6A21\u62DF\u8017\u65F6\u51C6\u5907\u4EFB\u52A1</span></span>
<span class="line"><span style="color:#DBD7CA;">	b</span><span style="color:#858585;">.</span><span style="color:#E0A569;">ResetTimer</span><span style="color:#858585;">()</span><span style="color:#DBD7CA;"> </span><span style="color:#758575;">// \u91CD\u7F6E\u5B9A\u65F6\u5668\uFF0Cb.StopTimer()\uFF0Cb.StartTimer()</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#4D9375;">for</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">n</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">:=</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#858585;">;</span><span style="color:#DBD7CA;"> n </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;"> b</span><span style="color:#858585;">.</span><span style="color:#DBD7CA;">N</span><span style="color:#858585;">;</span><span style="color:#DBD7CA;"> n</span><span style="color:#CB7676;">++</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">		</span><span style="color:#E0A569;">fib</span><span style="color:#858585;">(</span><span style="color:#6394BF;">30</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#758575;">// run fib(30) b.N times</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// fib.go</span></span>
<span class="line"><span style="color:#1C6B48;">package</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">func</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">fib</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">n </span><span style="color:#AB5959;">int</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">int</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> n </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> n </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> n</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#B58451;">fib</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">n</span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B58451;">fib</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">n</span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">// fib_test.go</span></span>
<span class="line"><span style="color:#1C6B48;">package</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">import</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#6C7834;">testing</span><span style="color:#B56959;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">func</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">BenchmarkFib</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">b </span><span style="color:#AB5959;">*</span><span style="color:#393A34;">testing</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">B</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    time</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">Sleep</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">time</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">Second </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u6A21\u62DF\u8017\u65F6\u51C6\u5907\u4EFB\u52A1</span></span>
<span class="line"><span style="color:#393A34;">	b</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">ResetTimer</span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// \u91CD\u7F6E\u5B9A\u65F6\u5668\uFF0Cb.StopTimer()\uFF0Cb.StartTimer()</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> n </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> b</span><span style="color:#8E8F8B;">.</span><span style="color:#393A34;">N</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> n</span><span style="color:#AB5959;">++</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#B58451;">fib</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">30</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// run fib(30) b.N times</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD0\u884C\u57FA\u51C6\u6D4B\u8BD5\u547D\u4EE4\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> go </span><span style="color:#E0A569;">test</span><span style="color:#DBD7CA;"> -bench=</span><span style="color:#C98A7D;">&quot;.*&quot;</span><span style="color:#DBD7CA;"> -benchtime=1s -count=3 -benchmem </span><span style="color:#E0A569;">.</span></span>
<span class="line"><span style="color:#DBD7CA;">goos: linux</span></span>
<span class="line"><span style="color:#DBD7CA;">goarch: amd64</span></span>
<span class="line"><span style="color:#DBD7CA;">pkg: benchmarkdemo</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu: Intel</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">R</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> Core</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">TM</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> i7-6500U CPU @ 2.50GHz</span></span>
<span class="line"><span style="color:#DBD7CA;">BenchmarkFib-4               246           4715823 ns/op               0 B/op          0 allocs/op</span></span>
<span class="line"><span style="color:#DBD7CA;">BenchmarkFib-4               236           4735137 ns/op               0 B/op          0 allocs/op</span></span>
<span class="line"><span style="color:#DBD7CA;">BenchmarkFib-4               253           4721660 ns/op               0 B/op          0 allocs/op</span></span>
<span class="line"><span style="color:#DBD7CA;">PASS</span></span>
<span class="line"><span style="color:#DBD7CA;">ok      benchmarkdemo   4.969s</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># ---- benchmark\u7ED3\u679C\u89E3\u91CA</span></span>
<span class="line"><span style="color:#758575;"># BenchmarkFib-4\uFF1A\u540E\u9762\u7684-4\u5373GOMAXPROCS\uFF0C\u9ED8\u8BA4\u7B49\u4E8ECPU\u7684\u6838\u5FC3\u6570\uFF0C\u8BE5\u503C\u53EF\u4EE5\u901A\u8FC7-cpu=2,4...\u6765\u8FDB\u884C\u4FEE\u6539\uFF1B</span></span>
<span class="line"><span style="color:#758575;"># 252\uFF1A\u8868\u793A\u8BE5\u6D4B\u8BD5\u7528\u4F8B\u603B\u5171\u6267\u884C\u4E86252\u6B21\uFF1B</span></span>
<span class="line"><span style="color:#758575;"># 4628531 ns/op\uFF1A\u8FD0\u884C\u6240\u7528\u65F6\u95F4\uFF0C\u5355\u4F4D\u7EB3\u79D2ns\uFF1B</span></span>
<span class="line"><span style="color:#758575;"># \u6700\u540E\u4E00\u884C4.961s\uFF1A\u6D4B\u8BD5\u6240\u7528\u7684\u65F6\u95F4\uFF0C\u4E4B\u6240\u4EE5\u4E0D\u4E0E\u53C2\u6570\u4E0A\u9762\u7684\u6570\u503C\u76F8\u540C\uFF0C\u662F\u56E0\u4E3A\u521B\u5EFA\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u5220\u9664\u6D4B\u8BD5\u7528\u4F8B\u9700\u8981\u4E00\u5B9A\u7684\u65F6\u95F4.</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> go </span><span style="color:#B58451;">test</span><span style="color:#393A34;"> -bench=</span><span style="color:#B56959;">&quot;.*&quot;</span><span style="color:#393A34;"> -benchtime=1s -count=3 -benchmem </span><span style="color:#B58451;">.</span></span>
<span class="line"><span style="color:#393A34;">goos: linux</span></span>
<span class="line"><span style="color:#393A34;">goarch: amd64</span></span>
<span class="line"><span style="color:#393A34;">pkg: benchmarkdemo</span></span>
<span class="line"><span style="color:#393A34;">cpu: Intel</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">R</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> Core</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">TM</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> i7-6500U CPU @ 2.50GHz</span></span>
<span class="line"><span style="color:#393A34;">BenchmarkFib-4               246           4715823 ns/op               0 B/op          0 allocs/op</span></span>
<span class="line"><span style="color:#393A34;">BenchmarkFib-4               236           4735137 ns/op               0 B/op          0 allocs/op</span></span>
<span class="line"><span style="color:#393A34;">BenchmarkFib-4               253           4721660 ns/op               0 B/op          0 allocs/op</span></span>
<span class="line"><span style="color:#393A34;">PASS</span></span>
<span class="line"><span style="color:#393A34;">ok      benchmarkdemo   4.969s</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># ---- benchmark\u7ED3\u679C\u89E3\u91CA</span></span>
<span class="line"><span style="color:#A0ADA0;"># BenchmarkFib-4\uFF1A\u540E\u9762\u7684-4\u5373GOMAXPROCS\uFF0C\u9ED8\u8BA4\u7B49\u4E8ECPU\u7684\u6838\u5FC3\u6570\uFF0C\u8BE5\u503C\u53EF\u4EE5\u901A\u8FC7-cpu=2,4...\u6765\u8FDB\u884C\u4FEE\u6539\uFF1B</span></span>
<span class="line"><span style="color:#A0ADA0;"># 252\uFF1A\u8868\u793A\u8BE5\u6D4B\u8BD5\u7528\u4F8B\u603B\u5171\u6267\u884C\u4E86252\u6B21\uFF1B</span></span>
<span class="line"><span style="color:#A0ADA0;"># 4628531 ns/op\uFF1A\u8FD0\u884C\u6240\u7528\u65F6\u95F4\uFF0C\u5355\u4F4D\u7EB3\u79D2ns\uFF1B</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u6700\u540E\u4E00\u884C4.961s\uFF1A\u6D4B\u8BD5\u6240\u7528\u7684\u65F6\u95F4\uFF0C\u4E4B\u6240\u4EE5\u4E0D\u4E0E\u53C2\u6570\u4E0A\u9762\u7684\u6570\u503C\u76F8\u540C\uFF0C\u662F\u56E0\u4E3A\u521B\u5EFA\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u5220\u9664\u6D4B\u8BD5\u7528\u4F8B\u9700\u8981\u4E00\u5B9A\u7684\u65F6\u95F4.</span></span>
<span class="line"></span></code></pre></div><p>\u4EE5\u4E0A\u53C2\u6570\u8BF4\u660E\uFF1A</p><ul><li><code>-bench &lt;regex_args&gt;</code>\uFF1A\u4F7F\u7528\u54EA\u4E9B\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u540E\u9762\u53EF\u4EE5\u8DDF\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5339\u914D\u6240\u8981\u4F7F\u7528\u7684\u6D4B\u8BD5\u7528\u4F8B\uFF1B</li><li><code>-benchtime &lt;time&gt;</code>\uFF1A\u6307\u5B9A\u57FA\u51C6\u6D4B\u8BD5\u65F6\u95F4\uFF0C\u9ED8\u8BA4<code>1s</code>\uFF0C\u4E5F\u53EF\u4EE5\u662F\u6B21\u6570\uFF0C\u53E6\u5916\uFF0C\u8FD8\u53EF\u4EE5\u8BBE\u7F6E<code>10x</code>\uFF0C\u8868\u793A\u8FD0\u884C\u5341\u904D\uFF1B</li><li><code>-count &lt;count&gt;</code>\uFF1A\u6307\u5B9A\u57FA\u51C6\u6D4B\u8BD5\u7684\u6B21\u6570\uFF1B</li><li><code>-benchmem</code>\uFF1A\u53EF\u4EE5\u5EA6\u91CF\u5185\u5B58\u5206\u914D\u7684\u6B21\u6570\uFF1B</li></ul><p><code>go test &lt;args&gt;</code>\u53C2\u8003\uFF1A<a href="https://pkg.go.dev/cmd/go#hdr-Testing_flags" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/cmd/go#hdr-Testing_flags</a></p><h2 id="\u53C2\u8003\u94FE\u63A5" tabindex="-1">\u53C2\u8003\u94FE\u63A5 <a class="header-anchor" href="#\u53C2\u8003\u94FE\u63A5" aria-hidden="true">#</a></h2><ul><li>golang \u6D4B\u8BD5\uFF1A<a href="https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.0.html" target="_blank" rel="noopener noreferrer">https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.0.html</a></li><li>golang \u6807\u51C6\u5E93\u4E2D\u6587\u6587\u6863\uFF1A<a href="http://cngolib.com/testing.html#t" target="_blank" rel="noopener noreferrer">http://cngolib.com/testing.html#t</a></li></ul>`,40),e=[o];function c(t,r,y,A,B,i){return n(),a("div",null,e)}var d=s(l,[["render",c]]);export{C as __pageData,d as default};
