import{_ as s,o as n,c as a,a as p}from"./app.1e6146c3.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Scripts/windows/\u901A\u7528\u4FEE\u6539dns.md","lastUpdated":1657272051000}'),l={name:"Scripts/windows/\u901A\u7528\u4FEE\u6539dns.md"},o=p(`<div class="language-bat"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#CB7676;">@</span><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">off</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">systeminfo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">OS \u540D\u79F0</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">&quot;</span><span style="color:#CB7676;">==</span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">7%&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">goto</span><span style="color:#DBD7CA;"> windows7</span></span>
<span class="line"><span style="color:#858585;">:</span><span style="color:#4D9375;">windows7</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u4E3BDNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#4D9375;">netsh</span><span style="color:#DBD7CA;"> interface ip </span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">dns name</span><span style="color:#CB7676;">=</span><span style="color:#C98A7D;">&quot;\u672C\u5730\u8FDE\u63A5&quot;</span><span style="color:#DBD7CA;"> source=static addr=114.114.114.114 register=PRIMARY</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u5907\u7528DNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#4D9375;">netsh</span><span style="color:#DBD7CA;"> interface ip add dns name=</span><span style="color:#C98A7D;">&quot;\u672C\u5730\u8FDE\u63A5&quot;</span><span style="color:#DBD7CA;"> addr=223.5.5.5 index=</span><span style="color:#6394BF;">2</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">OS \u540D\u79F0</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">&quot;</span><span style="color:#CB7676;">==</span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">10%&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">goto</span><span style="color:#DBD7CA;"> windows10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585;">:</span><span style="color:#4D9375;">windows10</span></span>
<span class="line"><span style="color:#758575;">:: BatchGotAdmin</span></span>
<span class="line"><span style="color:#858585;">:</span><span style="color:#4D9375;">-------------------------------------</span></span>
<span class="line"><span style="color:#4D9375;">REM</span><span style="color:#758575;"> --</span><span style="color:#FDAEB7;font-style:italic;">&gt;</span><span style="color:#758575;"> Check for permissions</span></span>
<span class="line"><span style="color:#CB7676;">&gt;</span><span style="color:#D4976C;">nul</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">2</span><span style="color:#CB7676;">&gt;&amp;</span><span style="color:#DBD7CA;">1 </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">SYSTEMROOT</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\system32\\cacls.exe&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">SYSTEMROOT</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\system32\\config\\system&quot;</span></span>
<span class="line"><span style="color:#4D9375;">REM</span><span style="color:#758575;"> --</span><span style="color:#FDAEB7;font-style:italic;">&gt;</span><span style="color:#758575;"> If error flag set, we do not have admin.</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> &#39;</span><span style="color:#858585;">%</span><span style="color:#B8A965;">errorlevel</span><span style="color:#858585;">%</span><span style="color:#DBD7CA;">&#39; </span><span style="color:#CB7676;">NEQ</span><span style="color:#DBD7CA;"> &#39;0&#39; </span><span style="color:#858585;">(</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> Requesting administrative privileges...</span></span>
<span class="line"><span style="color:#4D9375;">goto</span><span style="color:#DBD7CA;"> UACPrompt</span></span>
<span class="line"><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">(</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">goto</span><span style="color:#DBD7CA;"> gotAdmin </span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#858585;">:</span><span style="color:#4D9375;">UACPrompt</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> Set UAC = CreateObject</span><span style="color:#D4976C;">^</span><span style="color:#DBD7CA;">(</span><span style="color:#C98A7D;">&quot;Shell.Application&quot;</span><span style="color:#D4976C;">^</span><span style="color:#DBD7CA;">) </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">temp</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\getadmin.vbs&quot;</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> UAC.ShellExecute </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">~s0&quot;</span><span style="color:#DBD7CA;">, </span><span style="color:#C98A7D;">&quot;&quot;</span><span style="color:#DBD7CA;">, </span><span style="color:#C98A7D;">&quot;&quot;</span><span style="color:#DBD7CA;">, </span><span style="color:#C98A7D;">&quot;runas&quot;</span><span style="color:#DBD7CA;">, </span><span style="color:#6394BF;">1</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&gt;&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">temp</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\getadmin.vbs&quot;</span></span>
<span class="line"><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">temp</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\getadmin.vbs&quot;</span></span>
<span class="line"><span style="color:#4D9375;">exit</span><span style="color:#DBD7CA;"> /B</span></span>
<span class="line"><span style="color:#858585;">:</span><span style="color:#4D9375;">gotAdmin</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">exist</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">temp</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\getadmin.vbs&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">(</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">del</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">temp</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">\\getadmin.vbs&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#4D9375;">pushd</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">CD</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">&quot;</span></span>
<span class="line"><span style="color:#4D9375;">CD</span><span style="color:#DBD7CA;"> /D </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">%</span><span style="color:#C98A7D;">~dp0&quot;</span></span>
<span class="line"><span style="color:#858585;">:</span><span style="color:#4D9375;">--------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u4E3BDNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#4D9375;">netsh</span><span style="color:#DBD7CA;"> interface ip </span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">dns name</span><span style="color:#CB7676;">=</span><span style="color:#C98A7D;">&quot;\u4EE5\u592A\u7F51&quot;</span><span style="color:#DBD7CA;"> source=static addr=114.114.114.114 register=PRIMARY</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u5907\u7528DNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#4D9375;">netsh</span><span style="color:#DBD7CA;"> interface ip add dns name=</span><span style="color:#C98A7D;">&quot;\u4EE5\u592A\u7F51&quot;</span><span style="color:#DBD7CA;"> addr=223.5.5.5 index=</span><span style="color:#6394BF;">2</span></span>
<span class="line"><span style="color:#4D9375;">echo</span><span style="color:#DBD7CA;"> \u8BBE\u7F6E\u5B8C\u6210!</span></span>
<span class="line"><span style="color:#4D9375;">exit</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#AB5959;">@</span><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">off</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">systeminfo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">OS \u540D\u79F0</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">&quot;</span><span style="color:#AB5959;">==</span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">7%&quot;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">goto</span><span style="color:#393A34;"> windows7</span></span>
<span class="line"><span style="color:#8E8F8B;">:</span><span style="color:#1C6B48;">windows7</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u4E3BDNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#1C6B48;">netsh</span><span style="color:#393A34;"> interface ip </span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">dns name</span><span style="color:#AB5959;">=</span><span style="color:#B56959;">&quot;\u672C\u5730\u8FDE\u63A5&quot;</span><span style="color:#393A34;"> source=static addr=114.114.114.114 register=PRIMARY</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u5907\u7528DNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#1C6B48;">netsh</span><span style="color:#393A34;"> interface ip add dns name=</span><span style="color:#B56959;">&quot;\u672C\u5730\u8FDE\u63A5&quot;</span><span style="color:#393A34;"> addr=223.5.5.5 index=</span><span style="color:#296AA3;">2</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">OS \u540D\u79F0</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">&quot;</span><span style="color:#AB5959;">==</span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">10%&quot;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">goto</span><span style="color:#393A34;"> windows10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8E8F8B;">:</span><span style="color:#1C6B48;">windows10</span></span>
<span class="line"><span style="color:#A0ADA0;">:: BatchGotAdmin</span></span>
<span class="line"><span style="color:#8E8F8B;">:</span><span style="color:#1C6B48;">-------------------------------------</span></span>
<span class="line"><span style="color:#1C6B48;">REM</span><span style="color:#A0ADA0;"> --</span><span style="color:#B31D28;font-style:italic;">&gt;</span><span style="color:#A0ADA0;"> Check for permissions</span></span>
<span class="line"><span style="color:#AB5959;">&gt;</span><span style="color:#A65E2B;">nul</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">2</span><span style="color:#AB5959;">&gt;&amp;</span><span style="color:#393A34;">1 </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">SYSTEMROOT</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\system32\\cacls.exe&quot;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">SYSTEMROOT</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\system32\\config\\system&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">REM</span><span style="color:#A0ADA0;"> --</span><span style="color:#B31D28;font-style:italic;">&gt;</span><span style="color:#A0ADA0;"> If error flag set, we do not have admin.</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> &#39;</span><span style="color:#8E8F8B;">%</span><span style="color:#8C862B;">errorlevel</span><span style="color:#8E8F8B;">%</span><span style="color:#393A34;">&#39; </span><span style="color:#AB5959;">NEQ</span><span style="color:#393A34;"> &#39;0&#39; </span><span style="color:#8E8F8B;">(</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> Requesting administrative privileges...</span></span>
<span class="line"><span style="color:#1C6B48;">goto</span><span style="color:#393A34;"> UACPrompt</span></span>
<span class="line"><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">else</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">goto</span><span style="color:#393A34;"> gotAdmin </span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#8E8F8B;">:</span><span style="color:#1C6B48;">UACPrompt</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> Set UAC = CreateObject</span><span style="color:#A65E2B;">^</span><span style="color:#393A34;">(</span><span style="color:#B56959;">&quot;Shell.Application&quot;</span><span style="color:#A65E2B;">^</span><span style="color:#393A34;">) </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">temp</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\getadmin.vbs&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> UAC.ShellExecute </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">~s0&quot;</span><span style="color:#393A34;">, </span><span style="color:#B56959;">&quot;&quot;</span><span style="color:#393A34;">, </span><span style="color:#B56959;">&quot;&quot;</span><span style="color:#393A34;">, </span><span style="color:#B56959;">&quot;runas&quot;</span><span style="color:#393A34;">, </span><span style="color:#296AA3;">1</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&gt;&gt;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">temp</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\getadmin.vbs&quot;</span></span>
<span class="line"><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">temp</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\getadmin.vbs&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">exit</span><span style="color:#393A34;"> /B</span></span>
<span class="line"><span style="color:#8E8F8B;">:</span><span style="color:#1C6B48;">gotAdmin</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">exist</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">temp</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\getadmin.vbs&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">del</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">temp</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">\\getadmin.vbs&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#1C6B48;">pushd</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">CD</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">CD</span><span style="color:#393A34;"> /D </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">%</span><span style="color:#B56959;">~dp0&quot;</span></span>
<span class="line"><span style="color:#8E8F8B;">:</span><span style="color:#1C6B48;">--------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u4E3BDNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#1C6B48;">netsh</span><span style="color:#393A34;"> interface ip </span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">dns name</span><span style="color:#AB5959;">=</span><span style="color:#B56959;">&quot;\u4EE5\u592A\u7F51&quot;</span><span style="color:#393A34;"> source=static addr=114.114.114.114 register=PRIMARY</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> \u6B63\u5728\u8BBE\u7F6E\u672C\u673A\u5907\u7528DNS ,\u8BF7\u7A0D\u7B49\u2026\u2026</span></span>
<span class="line"><span style="color:#1C6B48;">netsh</span><span style="color:#393A34;"> interface ip add dns name=</span><span style="color:#B56959;">&quot;\u4EE5\u592A\u7F51&quot;</span><span style="color:#393A34;"> addr=223.5.5.5 index=</span><span style="color:#296AA3;">2</span></span>
<span class="line"><span style="color:#1C6B48;">echo</span><span style="color:#393A34;"> \u8BBE\u7F6E\u5B8C\u6210!</span></span>
<span class="line"><span style="color:#1C6B48;">exit</span></span>
<span class="line"></span></code></pre></div>`,1),e=[o];function t(c,r,y,D,B,A){return n(),a("div",null,e)}var u=s(l,[["render",t]]);export{C as __pageData,u as default};
