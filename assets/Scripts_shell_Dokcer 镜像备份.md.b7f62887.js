import{_ as s,o as a,c as n,a as p}from"./app.1e6146c3.js";const D=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Scripts/shell/Dokcer \u955C\u50CF\u5907\u4EFD.md","lastUpdated":1657272051000}'),l={name:"Scripts/shell/Dokcer \u955C\u50CF\u5907\u4EFD.md"},o=p('<div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">#!/bin/bash</span></span>\n<span class="line"><span style="color:#DBD7CA;">GREEN_COLOR=</span><span style="color:#C98A7D;">&#39;\\e[032m&#39;</span><span style="color:#DBD7CA;">   </span><span style="color:#758575;">#\u7EFF     </span></span>\n<span class="line"><span style="color:#DBD7CA;">RED_COLOR=</span><span style="color:#C98A7D;">&#39;\\e[031m&#39;</span><span style="color:#DBD7CA;">     </span><span style="color:#758575;">#\u7EA2</span></span>\n<span class="line"><span style="color:#DBD7CA;">YELLOW_COLOR=</span><span style="color:#C98A7D;">&#39;\\e[033m&#39;</span><span style="color:#DBD7CA;">  </span><span style="color:#758575;">#\u9EC4</span></span>\n<span class="line"><span style="color:#DBD7CA;">BLACK_COLOR=</span><span style="color:#C98A7D;">&#39;\\e[0m&#39;</span><span style="color:#DBD7CA;">     </span><span style="color:#758575;">#\u9ED1</span></span>\n<span class="line"><span style="color:#CB7676;">declare</span><span style="color:#DBD7CA;"> image_id=</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">`docker images </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> tail -20 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;">  awk &#39;{print $3}&#39;`</span><span style="color:#858585;">)</span></span>\n<span class="line"><span style="color:#CB7676;">declare</span><span style="color:#DBD7CA;"> image_name=</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">`docker images </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> tail -20 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;">  awk &#39;{print $1}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk -F/ &#39;{print $NF}&#39;`</span><span style="color:#858585;">)</span></span>\n<span class="line"><span style="color:#CB7676;">declare</span><span style="color:#DBD7CA;"> image_version=</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">`docker images </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> tail -20 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2}&#39;`</span><span style="color:#858585;">)</span></span>\n<span class="line"><span style="color:#CB7676;">declare</span><span style="color:#DBD7CA;"> image_nameqc=</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">`docker images </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> tail -20 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;">  awk &#39;{print $1}&#39;`</span><span style="color:#858585;">)</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="color:#4D9375;">for</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">i</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">in</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">${</span><span style="color:#CB7676;">!</span><span style="color:#B8A965;">image_id</span><span style="color:#858585;">[</span><span style="color:#B8A965;">@</span><span style="color:#858585;">]}</span></span>\n<span class="line"><span style="color:#4D9375;">do</span></span>\n<span class="line"><span style="color:#DBD7CA;">        docker save </span><span style="color:#858585;">${</span><span style="color:#B8A965;">image_id</span><span style="color:#858585;">[</span><span style="color:#B8A965;">i</span><span style="color:#858585;">]}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">${</span><span style="color:#B8A965;">image_name</span><span style="color:#858585;">[</span><span style="color:#B8A965;">i</span><span style="color:#858585;">]}</span><span style="color:#DBD7CA;">_</span><span style="color:#858585;">${</span><span style="color:#B8A965;">image_version</span><span style="color:#858585;">[</span><span style="color:#B8A965;">i</span><span style="color:#858585;">]}</span><span style="color:#DBD7CA;">.tar.gz</span></span>\n<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-eq</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>\n<span class="line"><span style="color:#DBD7CA;">                </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> -e </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">${</span><span style="color:#C98A7D;">YELLOW_COLOR</span><span style="color:#858585;">}${</span><span style="color:#C98A7D;">image_id</span><span style="color:#858585;">[</span><span style="color:#C98A7D;">i</span><span style="color:#858585;">]}</span><span style="color:#C98A7D;"> </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">BLACK_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;"> in </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">YELLOW_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;"> </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">image_nameqc</span><span style="color:#858585;">[</span><span style="color:#C98A7D;">i</span><span style="color:#858585;">]}</span><span style="color:#C98A7D;"> </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">BLACK_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;"> =====&gt; </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">GREEN_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;">back finish!!!</span><span style="color:#858585;">${</span><span style="color:#C98A7D;">BLACK_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;"> =====&gt; back file is </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">RED_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;"> </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">image_name</span><span style="color:#858585;">[</span><span style="color:#C98A7D;">i</span><span style="color:#858585;">]}</span><span style="color:#C98A7D;">_</span><span style="color:#858585;">${</span><span style="color:#C98A7D;">image_version</span><span style="color:#858585;">[</span><span style="color:#C98A7D;">i</span><span style="color:#858585;">]}</span><span style="color:#C98A7D;">.tar.gz </span><span style="color:#858585;">${</span><span style="color:#C98A7D;">BLACK_COLOR</span><span style="color:#858585;">}</span><span style="color:#C98A7D;">&quot;</span></span>\n<span class="line"><span style="color:#DBD7CA;">                </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&quot;</span></span>\n<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#4D9375;">fi</span></span>\n<span class="line"><span style="color:#4D9375;">done</span></span>\n<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">#!/bin/bash</span></span>\n<span class="line"><span style="color:#393A34;">GREEN_COLOR=</span><span style="color:#B56959;">&#39;\\e[032m&#39;</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#\u7EFF     </span></span>\n<span class="line"><span style="color:#393A34;">RED_COLOR=</span><span style="color:#B56959;">&#39;\\e[031m&#39;</span><span style="color:#393A34;">     </span><span style="color:#A0ADA0;">#\u7EA2</span></span>\n<span class="line"><span style="color:#393A34;">YELLOW_COLOR=</span><span style="color:#B56959;">&#39;\\e[033m&#39;</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;">#\u9EC4</span></span>\n<span class="line"><span style="color:#393A34;">BLACK_COLOR=</span><span style="color:#B56959;">&#39;\\e[0m&#39;</span><span style="color:#393A34;">     </span><span style="color:#A0ADA0;">#\u9ED1</span></span>\n<span class="line"><span style="color:#AB5959;">declare</span><span style="color:#393A34;"> image_id=</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">`docker images </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> tail -20 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;">  awk &#39;{print $3}&#39;`</span><span style="color:#8E8F8B;">)</span></span>\n<span class="line"><span style="color:#AB5959;">declare</span><span style="color:#393A34;"> image_name=</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">`docker images </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> tail -20 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;">  awk &#39;{print $1}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk -F/ &#39;{print $NF}&#39;`</span><span style="color:#8E8F8B;">)</span></span>\n<span class="line"><span style="color:#AB5959;">declare</span><span style="color:#393A34;"> image_version=</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">`docker images </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> tail -20 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2}&#39;`</span><span style="color:#8E8F8B;">)</span></span>\n<span class="line"><span style="color:#AB5959;">declare</span><span style="color:#393A34;"> image_nameqc=</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">`docker images </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -Ev &#39;^k8s|^harbor|^rancher&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> tail -20 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;">  awk &#39;{print $1}&#39;`</span><span style="color:#8E8F8B;">)</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">in</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">${</span><span style="color:#AB5959;">!</span><span style="color:#8C862B;">image_id</span><span style="color:#8E8F8B;">[</span><span style="color:#8C862B;">@</span><span style="color:#8E8F8B;">]}</span></span>\n<span class="line"><span style="color:#1C6B48;">do</span></span>\n<span class="line"><span style="color:#393A34;">        docker save </span><span style="color:#8E8F8B;">${</span><span style="color:#8C862B;">image_id</span><span style="color:#8E8F8B;">[</span><span style="color:#8C862B;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">${</span><span style="color:#8C862B;">image_name</span><span style="color:#8E8F8B;">[</span><span style="color:#8C862B;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#393A34;">_</span><span style="color:#8E8F8B;">${</span><span style="color:#8C862B;">image_version</span><span style="color:#8E8F8B;">[</span><span style="color:#8C862B;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#393A34;">.tar.gz</span></span>\n<span class="line"><span style="color:#393A34;">        </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-eq</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>\n<span class="line"><span style="color:#393A34;">                </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> -e </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">YELLOW_COLOR</span><span style="color:#8E8F8B;">}${</span><span style="color:#B56959;">image_id</span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#B56959;"> </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">BLACK_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> in </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">YELLOW_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">image_nameqc</span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#B56959;"> </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">BLACK_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> =====&gt; </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">GREEN_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;">back finish!!!</span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">BLACK_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> =====&gt; back file is </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">RED_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">image_name</span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#B56959;">_</span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">image_version</span><span style="color:#8E8F8B;">[</span><span style="color:#B56959;">i</span><span style="color:#8E8F8B;">]}</span><span style="color:#B56959;">.tar.gz </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">BLACK_COLOR</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;">&quot;</span></span>\n<span class="line"><span style="color:#393A34;">                </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&quot;</span></span>\n<span class="line"><span style="color:#393A34;">        </span><span style="color:#1C6B48;">fi</span></span>\n<span class="line"><span style="color:#1C6B48;">done</span></span>\n<span class="line"></span></code></pre></div>',1),e=[o];function c(r,t,y,B,A,i){return a(),n("div",null,e)}var _=s(l,[["render",c]]);export{D as __pageData,_ as default};
