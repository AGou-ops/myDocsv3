import{_ as s,o as n,c as a,a as l}from"./app.1e6146c3.js";const g=JSON.parse('{"title":"CentOS \u7CFB\u7EDF\u4FE1\u606F\u7EDF\u8BA1","description":"","frontmatter":{},"headers":[],"relativePath":"Scripts/shell/CentOS sys information.md","lastUpdated":1657272051000}'),p={name:"Scripts/shell/CentOS sys information.md"},o=l(`<h1 id="centos-\u7CFB\u7EDF\u4FE1\u606F\u7EDF\u8BA1" tabindex="-1">CentOS \u7CFB\u7EDF\u4FE1\u606F\u7EDF\u8BA1 <a class="header-anchor" href="#centos-\u7CFB\u7EDF\u4FE1\u606F\u7EDF\u8BA1" aria-hidden="true">#</a></h1><p>\u811A\u672C\u5185\u5BB9\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">#!/bin/bash</span></span>
<span class="line"><span style="color:#758575;">##Filename:     CentOS_Check_Script.sh</span></span>
<span class="line"><span style="color:#758575;">##Date:         2019-03-01</span></span>
<span class="line"><span style="color:#758575;">##Description:  Security detection script</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#                        Epoint health check script                      #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#\u8B66\u544A:\u672C\u811A\u672C\u53EA\u662F\u4E00\u4E2A\u68C0\u67E5\u7684\u64CD\u4F5C,\u672A\u5BF9\u670D\u52A1\u5668\u505A\u4EFB\u4F55\u4FEE\u6539,\u7BA1\u7406\u5458\u53EF\u4EE5\u6839\u636E\u6B64\u62A5\u544A #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#\u8FDB\u884C\u76F8\u5E94\u7684\u5B89\u5168\u6574\u6539                                                      #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#758575;">#read -p &quot;=====================Are You Ready,Please press enter==================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#                               \u4E3B\u673A\u5B89\u5168\u68C0\u6D4B                             #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u7CFB\u7EDF\u57FA\u672C\u4FE1\u606F&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">hostname=</span><span style="color:#C98A7D;">$(uname -n)</span></span>
<span class="line"><span style="color:#DBD7CA;">system=</span><span style="color:#C98A7D;">$(cat /etc/os-release </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep &quot;^NAME&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk -F</span><span style="color:#D4976C;">\\&quot;</span><span style="color:#C98A7D;"> &#39;{print $2}&#39;)</span></span>
<span class="line"><span style="color:#DBD7CA;">version=</span><span style="color:#C98A7D;">$(cat /etc/redhat-release </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4$5}&#39;)</span></span>
<span class="line"><span style="color:#DBD7CA;">kernel=</span><span style="color:#C98A7D;">$(uname -r)</span></span>
<span class="line"><span style="color:#DBD7CA;">platform=</span><span style="color:#C98A7D;">$(uname -p)</span></span>
<span class="line"><span style="color:#DBD7CA;">address=</span><span style="color:#C98A7D;">$(ip addr </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep inet </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -v &quot;inet6&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -v &quot;127.0.0.1&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{ print $2; }&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> tr &#39;\\n&#39; &#39;\\t&#39; )</span></span>
<span class="line"><span style="color:#DBD7CA;">cpumodel=</span><span style="color:#C98A7D;">$(cat /proc/cpuinfo </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep name </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f2 -d: </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> uniq)</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu=</span><span style="color:#C98A7D;">$(cat /proc/cpuinfo </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep &#39;processor&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sort </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> uniq </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> wc -l)</span></span>
<span class="line"><span style="color:#DBD7CA;">machinemodel=</span><span style="color:#C98A7D;">$(dmidecode </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep &quot;Product Name&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed &#39;s/^[ \\t]*//g&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> tr &#39;\\n&#39; &#39;\\t&#39; )</span></span>
<span class="line"><span style="color:#DBD7CA;">date=</span><span style="color:#C98A7D;">$(date)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u4E3B\u673A\u540D:           </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">hostname&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u540D\u79F0:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">system&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u7248\u672C:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">version&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5185\u6838\u7248\u672C:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">kernel&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u7C7B\u578B:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">platform&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u672C\u673AIP\u5730\u5740:       </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">address&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU\u578B\u53F7:          </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">cpumodel&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU\u6838\u6570:          </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">cpu&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u673A\u5668\u578B\u53F7:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">machinemodel&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u65F6\u95F4:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">date&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">summemory=</span><span style="color:#C98A7D;">$(free -h </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;">grep &quot;Mem:&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2}&#39;)</span></span>
<span class="line"><span style="color:#DBD7CA;">freememory=</span><span style="color:#C98A7D;">$(free -h </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;">grep &quot;Mem:&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4}&#39;)</span></span>
<span class="line"><span style="color:#DBD7CA;">usagememory=</span><span style="color:#C98A7D;">$(free -h </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;">grep &quot;Mem:&quot; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $3}&#39;)</span></span>
<span class="line"><span style="color:#DBD7CA;">uptime=</span><span style="color:#C98A7D;">$(uptime </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2&quot; &quot;$3&quot; &quot;$4&quot; &quot;$5}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed &#39;s/,$//g&#39;)</span></span>
<span class="line"><span style="color:#DBD7CA;">loadavg=</span><span style="color:#C98A7D;">$(uptime </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $9&quot; &quot;$10&quot; &quot;$11&quot; &quot;$12&quot; &quot;$13}&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u603B\u5185\u5B58\u5927\u5C0F:           </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">summemory&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5DF2\u4F7F\u7528\u5185\u5B58\u5927\u5C0F:       </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">usagememory&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u53EF\u4F7F\u7528\u5185\u5B58\u5927\u5C0F:       </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">freememory&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u8FD0\u884C\u65F6\u95F4:         </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">uptime&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u8D1F\u8F7D:             </span><span style="color:#858585;">$</span><span style="color:#C98A7D;">loadavg&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5185\u5B58\u72B6\u6001:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">vmstat 2 5</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u50F5\u5C38\u8FDB\u7A0B:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">ps -ef </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep zombie </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v grep</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 1 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u65E0\u50F5\u5C38\u8FDB\u7A0B&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u6709\u50F5\u5C38\u8FDB\u7A0B------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u8017CPU\u6700\u591A\u7684\u8FDB\u7A0B:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">ps auxf </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">sort -nr -k 3 </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">head -5</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u8017\u5185\u5B58\u6700\u591A\u7684\u8FDB\u7A0B:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">ps auxf </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">sort -nr -k 4 </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">head -5</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u73AF\u5883\u53D8\u91CF:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">env</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u8DEF\u7531\u8868:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">route -n</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u76D1\u542C\u7AEF\u53E3:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">netstat -tunlp</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u5F53\u524D\u5EFA\u7ACB\u7684\u8FDE\u63A5:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">netstat -n </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> awk </span><span style="color:#C98A7D;">&#39;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&#39;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5F00\u673A\u542F\u52A8\u7684\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">systemctl list-unit-files </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep enabled</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u7CFB\u7EDF\u7528\u6237\u60C5\u51B5&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u6D3B\u52A8\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">w </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> tail -n +2</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u6240\u6709\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">cut -d: -f1,2,3,4 /etc/passwd</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u6240\u6709\u7EC4:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">cut -d: -f1,2,3 /etc/group</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u5F53\u524D\u7528\u6237\u7684\u8BA1\u5212\u4EFB\u52A1:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">crontab -l</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8EAB\u4EFD\u9274\u522B\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">grep -i </span><span style="color:#C98A7D;">&quot;^password.*requisite.*pam_cracklib.so&quot;</span><span style="color:#DBD7CA;"> /etc/pam.d/system-auth  </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u5BC6\u7801\u590D\u6742\u5EA6:\u5DF2\u8BBE\u7F6E&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">    grep -i </span><span style="color:#C98A7D;">&quot;pam_pwquality\\.so&quot;</span><span style="color:#DBD7CA;"> /etc/pam.d/system-auth </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u5BC6\u7801\u590D\u6742\u5EA6:\u5DF2\u8BBE\u7F6E&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">	</span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u5BC6\u7801\u590D\u6742\u5EA6:\u672A\u8BBE\u7F6E,\u8BF7\u52A0\u56FA\u5BC6\u7801--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">awk -F</span><span style="color:#C98A7D;">&quot;:&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;{if($2!~/^!|^*/){print &quot;&gt;&gt;&gt;(&quot;$1&quot;)&quot; &quot; \u662F\u4E00\u4E2A\u672A\u88AB\u9501\u5B9A\u7684\u8D26\u6237,\u8BF7\u7BA1\u7406\u5458\u68C0\u67E5\u662F\u5426\u662F\u53EF\u7591\u8D26\u6237--------[\u9700\u8C03\u6574]&quot;}}&#39;</span><span style="color:#DBD7CA;"> /etc/shadow</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">more /etc/login.defs </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -E </span><span style="color:#C98A7D;">&quot;PASS_MAX_DAYS&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v </span><span style="color:#C98A7D;">&quot;#&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">awk -F</span><span style="color:#C98A7D;">&#39; &#39;</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&#39;{if($2!=90){print &quot;&gt;&gt;&gt;\u5BC6\u7801\u8FC7\u671F\u5929\u6570\u662F&quot;$2&quot;\u5929,\u8BF7\u7BA1\u7406\u5458\u6539\u621090\u5929------[\u9700\u8C03\u6574]&quot;}}&#39;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">grep -i </span><span style="color:#C98A7D;">&quot;^auth.*required.*pam_tally2.so.*$&quot;</span><span style="color:#DBD7CA;"> /etc/pam.d/sshd  </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u767B\u5165\u5931\u8D25\u5904\u7406:\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u767B\u5165\u5931\u8D25\u5904\u7406:\u672A\u5F00\u542F,\u8BF7\u52A0\u56FA\u767B\u5165\u5931\u8D25\u9501\u5B9A\u529F\u80FD----------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8BBF\u95EE\u63A7\u5236\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u4E2D\u5B58\u5728\u4EE5\u4E0B\u975E\u7CFB\u7EDF\u9ED8\u8BA4\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">more /etc/passwd </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">awk -F </span><span style="color:#C98A7D;">&quot;:&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;{if($3&gt;500){print &quot;&gt;&gt;&gt;/etc/passwd\u91CC\u9762\u7684&quot;$1 &quot;\u7684UID\u4E3A&quot;$3&quot;\uFF0C\u8BE5\u8D26\u6237\u975E\u7CFB\u7EDF\u9ED8\u8BA4\u8D26\u6237\uFF0C\u8BF7\u7BA1\u7406\u5458\u786E\u8BA4\u662F\u5426\u4E3A\u53EF\u7591\u8D26\u6237--------[\u9700\u8C03\u6574]&quot;}}&#39;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u7279\u6743\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">awk -F: </span><span style="color:#C98A7D;">&#39;$3==0 {print $1}&#39;</span><span style="color:#DBD7CA;"> /etc/passwd</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u4E2D\u7A7A\u53E3\u4EE4\u8D26\u6237:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">awk -F: </span><span style="color:#C98A7D;">&#39;($2==&quot;!!&quot;) {print $1&quot;\u8BE5\u8D26\u6237\u4E3A\u7A7A\u53E3\u4EE4\u8D26\u6237\uFF0C\u8BF7\u7BA1\u7406\u5458\u786E\u8BA4\u662F\u5426\u4E3A\u65B0\u589E\u8D26\u6237\uFF0C\u5982\u679C\u4E3A\u65B0\u5EFA\u8D26\u6237\uFF0C\u8BF7\u914D\u7F6E\u5BC6\u7801-------[\u9700\u8C03\u6574]&quot;}&#39;</span><span style="color:#DBD7CA;"> /etc/shadow</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u5B89\u5168\u5BA1\u8BA1&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6B63\u5E38\u60C5\u51B5\u4E0B\u767B\u5F55\u5230\u672C\u673A30\u5929\u5185\u7684\u6240\u6709\u7528\u6237\u7684\u5386\u53F2\u8BB0\u5F55:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">last </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> head -n 30</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u67E5\u770Bsyslog\u65E5\u5FD7\u5BA1\u8BA1\u670D\u52A1\u662F\u5426\u5F00\u542F:&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> service rsyslog status </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> egrep </span><span style="color:#C98A7D;">&quot; active \\(running&quot;</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,syslog\u670D\u52A1\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,syslog\u670D\u52A1\u672A\u5F00\u542F\uFF0C\u5EFA\u8BAE\u901A\u8FC7service rsyslog start\u5F00\u542F\u65E5\u5FD7\u5BA1\u8BA1\u529F\u80FD---------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u67E5\u770Bsyslog\u65E5\u5FD7\u662F\u5426\u5F00\u542F\u5916\u53D1:&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> more /etc/rsyslog.conf </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> egrep </span><span style="color:#C98A7D;">&quot;@...\\.|@..\\.|@.\\.|\\*.\\* @...\\.|\\*\\.\\* @..\\.|\\*\\.\\* @.\\.&quot;</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,\u5BA2\u6237\u7AEFsyslog\u65E5\u5FD7\u5DF2\u5F00\u542F\u5916\u53D1--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,\u5BA2\u6237\u7AEFsyslog\u65E5\u5FD7\u672A\u5F00\u542F\u5916\u53D1---------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5BA1\u8BA1\u7684\u8981\u7D20\u548C\u5BA1\u8BA1\u65E5\u5FD7:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">more /etc/rsyslog.conf  </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v </span><span style="color:#C98A7D;">&quot;^[$|#]&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v </span><span style="color:#C98A7D;">&quot;^$&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u4E2D\u5173\u952E\u6587\u4EF6\u4FEE\u6539\u65F6\u95F4:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">ls -ltr /bin/ls /bin/login /etc/passwd  /bin/ps /etc/shadow</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">awk </span><span style="color:#C98A7D;">&#39;{print &quot;&gt;&gt;&gt;\u6587\u4EF6\u540D\uFF1A&quot;$9&quot;  &quot;&quot;\u6700\u540E\u4FEE\u6539\u65F6\u95F4\uFF1A&quot;$6&quot; &quot;$7&quot; &quot;$8}&#39;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span></span>
<span class="line"><span style="color:#C98A7D;">###############################################################################################</span></span>
<span class="line"><span style="color:#C98A7D;">#   ls\u6587\u4EF6:\u662F\u5B58\u50A8ls\u547D\u4EE4\u7684\u529F\u80FD\u51FD\u6570,\u88AB\u5220\u9664\u4EE5\u540E,\u5C31\u65E0\u6CD5\u6267\u884Cls\u547D\u4EE4                                 #</span></span>
<span class="line"><span style="color:#C98A7D;">#   login\u6587\u4EF6:login\u662F\u63A7\u5236\u7528\u6237\u767B\u5F55\u7684\u6587\u4EF6,\u4E00\u65E6\u88AB\u7BE1\u6539\u6216\u5220\u9664,\u7CFB\u7EDF\u5C06\u65E0\u6CD5\u5207\u6362\u7528\u6237\u6216\u767B\u9646\u7528\u6237         #</span></span>
<span class="line"><span style="color:#C98A7D;">#   /etc/passwd\u662F\u4E00\u4E2A\u6587\u4EF6,\u4E3B\u8981\u662F\u4FDD\u5B58\u7528\u6237\u4FE1\u606F                                                  #</span></span>
<span class="line"><span style="color:#C98A7D;">#   /bin/ps \u8FDB\u7A0B\u67E5\u770B\u547D\u4EE4\u529F\u80FD\u652F\u6301\u6587\u4EF6,\u6587\u4EF6\u635F\u574F\u6216\u88AB\u66F4\u6539\u540E,\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528ps\u547D\u4EE4                    #</span></span>
<span class="line"><span style="color:#C98A7D;">#   /etc/shadow\u662F/etc/passwd\u7684\u5F71\u5B50\u6587\u4EF6,\u5BC6\u7801\u5B58\u653E\u5728\u8BE5\u6587\u4EF6\u5F53\u4E2D,\u5E76\u4E14\u53EA\u6709root\u7528\u6237\u53EF\u8BFB              #</span></span>
<span class="line"><span style="color:#C98A7D;">###############################################################################################&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u68C0\u67E5\u91CD\u8981\u65E5\u5FD7\u6587\u4EF6\u662F\u5426\u5B58\u5728:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">log_secure=/var/log/secure</span></span>
<span class="line"><span style="color:#DBD7CA;">log_messages=/var/log/messages</span></span>
<span class="line"><span style="color:#DBD7CA;">log_cron=/var/log/cron</span></span>
<span class="line"><span style="color:#DBD7CA;">log_boot=/var/log/boot.log</span></span>
<span class="line"><span style="color:#DBD7CA;">log_dmesg=/var/log/dmesg</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-e</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">$</span><span style="color:#C98A7D;">log_secure&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/secure\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/secure\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-e</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">$</span><span style="color:#C98A7D;">log_messages&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/messages\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/messages\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-e</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">$</span><span style="color:#C98A7D;">log_cron&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/cron\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/cron\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-e</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">$</span><span style="color:#C98A7D;">log_boot&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/boot.log\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/boot.log\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-e</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;</span><span style="color:#858585;">$</span><span style="color:#C98A7D;">log_dmesg&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/dmesg\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;/var/log/dmesg\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u5269\u4F59\u4FE1\u606F\u4FDD\u62A4&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5206\u533A\u60C5\u51B5:&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5982\u679C\u78C1\u76D8\u7A7A\u95F4\u5229\u7528\u7387\u8FC7\u9AD8\uFF0C\u8BF7\u53CA\u65F6\u8C03\u6574---------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">df -h</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u53EF\u7528\u5757\u8BBE\u5907\u4FE1\u606F:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">lsblk</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6587\u4EF6\u7CFB\u7EDF\u4FE1\u606F:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">more /etc/fstab  </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v </span><span style="color:#C98A7D;">&quot;^#&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v </span><span style="color:#C98A7D;">&quot;^$&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u5165\u4FB5\u9632\u8303\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7CFB\u7EDF\u5165\u4FB5\u884C\u4E3A:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">more /var/log/secure </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">grep refused</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6709\u5165\u4FB5\u884C\u4E3A\uFF0C\u8BF7\u5206\u6790\u5904\u7406--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u65E0\u5165\u4FB5\u884C\u4E3A&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7528\u6237\u9519\u8BEF\u767B\u5165\u5217\u8868:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">lastb </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> head </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 1 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u65E0\u7528\u6237\u9519\u8BEF\u767B\u5165\u5217\u8868&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u7528\u6237\u9519\u8BEF\u767B\u5165--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    lastb </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> head </span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;ssh\u66B4\u529B\u767B\u5165\u4FE1\u606F:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">more /var/log/secure </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep  </span><span style="color:#C98A7D;">&quot;Failed&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 1 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u65E0ssh\u66B4\u529B\u767B\u5165\u4FE1\u606F&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">    more /var/log/secure</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">awk </span><span style="color:#C98A7D;">&#39;/Failed/{print $(NF-3)}&#39;</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">sort</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">uniq -c</span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">awk </span><span style="color:#C98A7D;">&#39;{print &quot;&gt;&gt;&gt;\u767B\u5165\u5931\u8D25\u7684IP\u548C\u5C1D\u8BD5\u6B21\u6570: &quot;$2&quot;=&quot;$1&quot;\u6B21---------[\u9700\u8C03\u6574]&quot;;}&#39;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u6076\u610F\u4EE3\u7801\u9632\u8303&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u68C0\u67E5\u662F\u5426\u5B89\u88C5\u75C5\u6BD2\u8F6F\u4EF6:&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">crontab -l </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep clamscan.sh </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u5DF2\u5B89\u88C5ClamAV\u6740\u6BD2\u8F6F\u4EF6&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  crontab -l </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep freshclam.sh </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /dev/null</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u5DF2\u90E8\u7F72\u5B9A\u65F6\u66F4\u65B0\u75C5\u6BD2\u5E93&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u672A\u5B89\u88C5ClamAV\u6740\u6BD2\u8F6F\u4EF6,\u8BF7\u90E8\u7F72\u6740\u6BD2\u8F6F\u4EF6\u52A0\u56FA\u4E3B\u673A\u9632\u62A4--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot; &quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8D44\u6E90\u63A7\u5236\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86xinetd\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> ps -elf </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">grep xinet </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;">grep -v </span><span style="color:#C98A7D;">&quot;grep xinet&quot;</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;xinetd\u670D\u52A1\u6B63\u5728\u8FD0\u884C\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u53EF\u4EE5\u628Axinetd\u670D\u52A1\u5173\u95ED--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;xinetd\u670D\u52A1\u672A\u5F00\u542F-------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86ssh\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> service sshd status </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -E </span><span style="color:#C98A7D;">&quot;listening on|active \\(running\\)&quot;</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;SSH\u670D\u52A1\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;SSH\u670D\u52A1\u672A\u5F00\u542F--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86Telnet-Server\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> more /etc/xinetd.d/telnetd </span><span style="color:#CB7676;">2&gt;&amp;1|</span><span style="color:#DBD7CA;">grep -E </span><span style="color:#C98A7D;">&quot;disable=no&quot;</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;Telnet-Server\u670D\u52A1\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;Telnet-Server\u670D\u52A1\u672A\u5F00\u542F--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">ps axu </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep iptables </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v grep </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CA;"> ps axu </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep firewalld </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -v grep </span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u9632\u706B\u5899\u5DF2\u542F\u7528&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">iptables -nvL --line-numbers</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u9632\u706B\u5899\u672A\u542F\u7528--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;">  </span><span style="color:#C98A7D;">&quot;\u67E5\u770B\u7CFB\u7EDFSSH\u8FDC\u7A0B\u8BBF\u95EE\u8BBE\u7F6E\u7B56\u7565(host.deny\u62D2\u7EDD\u5217\u8868):&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> more /etc/hosts.deny </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -E </span><span style="color:#C98A7D;">&quot;sshd&quot;</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u5DF2\u8BBE\u7F6E--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u672A\u8BBE\u7F6E--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u67E5\u770B\u7CFB\u7EDFSSH\u8FDC\u7A0B\u8BBF\u95EE\u8BBE\u7F6E\u7B56\u7565(hosts.allow\u5141\u8BB8\u5217\u8868):&quot;</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> more /etc/hosts.allow </span><span style="color:#CB7676;">|</span><span style="color:#DBD7CA;"> grep -E </span><span style="color:#C98A7D;">&quot;sshd&quot;</span><span style="color:#CB7676;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u5DF2\u8BBE\u7F6E--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u672A\u8BBE\u7F6E--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5F53hosts.allow\u548Chost.deny\u76F8\u51B2\u7A81\u65F6,\u4EE5hosts.allow\u8BBE\u7F6E\u4E3A\u51C6&quot;</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">grep -i </span><span style="color:#C98A7D;">&quot;TMOUT&quot;</span><span style="color:#DBD7CA;"> /etc/profile /etc/bashrc</span></span>
<span class="line"><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">$</span><span style="color:#B8A965;">?</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CA;"> 0 </span><span style="color:#858585;">]</span><span style="color:#CB7676;">;</span><span style="color:#4D9375;">then</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u5DF2\u8BBE\u7F6E\u767B\u5165\u8D85\u65F6\u9650\u5236&quot;</span></span>
<span class="line"><span style="color:#4D9375;">else</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;\u672A\u8BBE\u7F6E\u767B\u5165\u8D85\u65F6\u9650\u5236,\u8BF7\u8BBE\u7F6E,\u8BBE\u7F6E\u65B9\u6CD5:\u5728/etc/profile\u6216\u8005/etc/bashrc\u91CC\u9762\u6DFB\u52A0\u53C2\u6570TMOUT=600 --------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#4D9375;">fi</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;end&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">#!/bin/bash</span></span>
<span class="line"><span style="color:#A0ADA0;">##Filename:     CentOS_Check_Script.sh</span></span>
<span class="line"><span style="color:#A0ADA0;">##Date:         2019-03-01</span></span>
<span class="line"><span style="color:#A0ADA0;">##Description:  Security detection script</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#                        Epoint health check script                      #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#\u8B66\u544A:\u672C\u811A\u672C\u53EA\u662F\u4E00\u4E2A\u68C0\u67E5\u7684\u64CD\u4F5C,\u672A\u5BF9\u670D\u52A1\u5668\u505A\u4EFB\u4F55\u4FEE\u6539,\u7BA1\u7406\u5458\u53EF\u4EE5\u6839\u636E\u6B64\u62A5\u544A #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#\u8FDB\u884C\u76F8\u5E94\u7684\u5B89\u5168\u6574\u6539                                                      #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#A0ADA0;">#read -p &quot;=====================Are You Ready,Please press enter==================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#                               \u4E3B\u673A\u5B89\u5168\u68C0\u6D4B                             #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;#                                                                        #&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;##########################################################################&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u7CFB\u7EDF\u57FA\u672C\u4FE1\u606F&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#393A34;">hostname=</span><span style="color:#B56959;">$(uname -n)</span></span>
<span class="line"><span style="color:#393A34;">system=</span><span style="color:#B56959;">$(cat /etc/os-release </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep &quot;^NAME&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk -F</span><span style="color:#A65E2B;">\\&quot;</span><span style="color:#B56959;"> &#39;{print $2}&#39;)</span></span>
<span class="line"><span style="color:#393A34;">version=</span><span style="color:#B56959;">$(cat /etc/redhat-release </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4$5}&#39;)</span></span>
<span class="line"><span style="color:#393A34;">kernel=</span><span style="color:#B56959;">$(uname -r)</span></span>
<span class="line"><span style="color:#393A34;">platform=</span><span style="color:#B56959;">$(uname -p)</span></span>
<span class="line"><span style="color:#393A34;">address=</span><span style="color:#B56959;">$(ip addr </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep inet </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -v &quot;inet6&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -v &quot;127.0.0.1&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{ print $2; }&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> tr &#39;\\n&#39; &#39;\\t&#39; )</span></span>
<span class="line"><span style="color:#393A34;">cpumodel=</span><span style="color:#B56959;">$(cat /proc/cpuinfo </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep name </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f2 -d: </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> uniq)</span></span>
<span class="line"><span style="color:#393A34;">cpu=</span><span style="color:#B56959;">$(cat /proc/cpuinfo </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep &#39;processor&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sort </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> uniq </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> wc -l)</span></span>
<span class="line"><span style="color:#393A34;">machinemodel=</span><span style="color:#B56959;">$(dmidecode </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep &quot;Product Name&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed &#39;s/^[ \\t]*//g&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> tr &#39;\\n&#39; &#39;\\t&#39; )</span></span>
<span class="line"><span style="color:#393A34;">date=</span><span style="color:#B56959;">$(date)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u4E3B\u673A\u540D:           </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">hostname&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u540D\u79F0:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">system&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u7248\u672C:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">version&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5185\u6838\u7248\u672C:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">kernel&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u7C7B\u578B:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">platform&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u672C\u673AIP\u5730\u5740:       </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">address&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU\u578B\u53F7:          </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">cpumodel&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU\u6838\u6570:          </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">cpu&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u673A\u5668\u578B\u53F7:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">machinemodel&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u65F6\u95F4:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">date&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#393A34;">summemory=</span><span style="color:#B56959;">$(free -h </span><span style="color:#AB5959;">|</span><span style="color:#B56959;">grep &quot;Mem:&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2}&#39;)</span></span>
<span class="line"><span style="color:#393A34;">freememory=</span><span style="color:#B56959;">$(free -h </span><span style="color:#AB5959;">|</span><span style="color:#B56959;">grep &quot;Mem:&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4}&#39;)</span></span>
<span class="line"><span style="color:#393A34;">usagememory=</span><span style="color:#B56959;">$(free -h </span><span style="color:#AB5959;">|</span><span style="color:#B56959;">grep &quot;Mem:&quot; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $3}&#39;)</span></span>
<span class="line"><span style="color:#393A34;">uptime=</span><span style="color:#B56959;">$(uptime </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2&quot; &quot;$3&quot; &quot;$4&quot; &quot;$5}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed &#39;s/,$//g&#39;)</span></span>
<span class="line"><span style="color:#393A34;">loadavg=</span><span style="color:#B56959;">$(uptime </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $9&quot; &quot;$10&quot; &quot;$11&quot; &quot;$12&quot; &quot;$13}&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u603B\u5185\u5B58\u5927\u5C0F:           </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">summemory&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5DF2\u4F7F\u7528\u5185\u5B58\u5927\u5C0F:       </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">usagememory&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u53EF\u4F7F\u7528\u5185\u5B58\u5927\u5C0F:       </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">freememory&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u8FD0\u884C\u65F6\u95F4:         </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">uptime&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u8D1F\u8F7D:             </span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">loadavg&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5185\u5B58\u72B6\u6001:&quot;</span></span>
<span class="line"><span style="color:#393A34;">vmstat 2 5</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u50F5\u5C38\u8FDB\u7A0B:&quot;</span></span>
<span class="line"><span style="color:#393A34;">ps -ef </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep zombie </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v grep</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 1 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u65E0\u50F5\u5C38\u8FDB\u7A0B&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u6709\u50F5\u5C38\u8FDB\u7A0B------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u8017CPU\u6700\u591A\u7684\u8FDB\u7A0B:&quot;</span></span>
<span class="line"><span style="color:#393A34;">ps auxf </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">sort -nr -k 3 </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">head -5</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u8017\u5185\u5B58\u6700\u591A\u7684\u8FDB\u7A0B:&quot;</span></span>
<span class="line"><span style="color:#393A34;">ps auxf </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">sort -nr -k 4 </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">head -5</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u73AF\u5883\u53D8\u91CF:&quot;</span></span>
<span class="line"><span style="color:#393A34;">env</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u8DEF\u7531\u8868:&quot;</span></span>
<span class="line"><span style="color:#393A34;">route -n</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u76D1\u542C\u7AEF\u53E3:&quot;</span></span>
<span class="line"><span style="color:#393A34;">netstat -tunlp</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u5F53\u524D\u5EFA\u7ACB\u7684\u8FDE\u63A5:&quot;</span></span>
<span class="line"><span style="color:#393A34;">netstat -n </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> awk </span><span style="color:#B56959;">&#39;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&#39;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5F00\u673A\u542F\u52A8\u7684\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#393A34;">systemctl list-unit-files </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep enabled</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u7CFB\u7EDF\u7528\u6237\u60C5\u51B5&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u6D3B\u52A8\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#393A34;">w </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> tail -n +2</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u6240\u6709\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#393A34;">cut -d: -f1,2,3,4 /etc/passwd</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u6240\u6709\u7EC4:&quot;</span></span>
<span class="line"><span style="color:#393A34;">cut -d: -f1,2,3 /etc/group</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u5F53\u524D\u7528\u6237\u7684\u8BA1\u5212\u4EFB\u52A1:&quot;</span></span>
<span class="line"><span style="color:#393A34;">crontab -l</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8EAB\u4EFD\u9274\u522B\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#393A34;">grep -i </span><span style="color:#B56959;">&quot;^password.*requisite.*pam_cracklib.so&quot;</span><span style="color:#393A34;"> /etc/pam.d/system-auth  </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u5BC6\u7801\u590D\u6742\u5EA6:\u5DF2\u8BBE\u7F6E&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">    grep -i </span><span style="color:#B56959;">&quot;pam_pwquality\\.so&quot;</span><span style="color:#393A34;"> /etc/pam.d/system-auth </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u5BC6\u7801\u590D\u6742\u5EA6:\u5DF2\u8BBE\u7F6E&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u5BC6\u7801\u590D\u6742\u5EA6:\u672A\u8BBE\u7F6E,\u8BF7\u52A0\u56FA\u5BC6\u7801--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#393A34;">awk -F</span><span style="color:#B56959;">&quot;:&quot;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;{if($2!~/^!|^*/){print &quot;&gt;&gt;&gt;(&quot;$1&quot;)&quot; &quot; \u662F\u4E00\u4E2A\u672A\u88AB\u9501\u5B9A\u7684\u8D26\u6237,\u8BF7\u7BA1\u7406\u5458\u68C0\u67E5\u662F\u5426\u662F\u53EF\u7591\u8D26\u6237--------[\u9700\u8C03\u6574]&quot;}}&#39;</span><span style="color:#393A34;"> /etc/shadow</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#393A34;">more /etc/login.defs </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -E </span><span style="color:#B56959;">&quot;PASS_MAX_DAYS&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v </span><span style="color:#B56959;">&quot;#&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">awk -F</span><span style="color:#B56959;">&#39; &#39;</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&#39;{if($2!=90){print &quot;&gt;&gt;&gt;\u5BC6\u7801\u8FC7\u671F\u5929\u6570\u662F&quot;$2&quot;\u5929,\u8BF7\u7BA1\u7406\u5458\u6539\u621090\u5929------[\u9700\u8C03\u6574]&quot;}}&#39;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#393A34;">grep -i </span><span style="color:#B56959;">&quot;^auth.*required.*pam_tally2.so.*$&quot;</span><span style="color:#393A34;"> /etc/pam.d/sshd  </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u767B\u5165\u5931\u8D25\u5904\u7406:\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u767B\u5165\u5931\u8D25\u5904\u7406:\u672A\u5F00\u542F,\u8BF7\u52A0\u56FA\u767B\u5165\u5931\u8D25\u9501\u5B9A\u529F\u80FD----------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8BBF\u95EE\u63A7\u5236\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u4E2D\u5B58\u5728\u4EE5\u4E0B\u975E\u7CFB\u7EDF\u9ED8\u8BA4\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#393A34;">more /etc/passwd </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">awk -F </span><span style="color:#B56959;">&quot;:&quot;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;{if($3&gt;500){print &quot;&gt;&gt;&gt;/etc/passwd\u91CC\u9762\u7684&quot;$1 &quot;\u7684UID\u4E3A&quot;$3&quot;\uFF0C\u8BE5\u8D26\u6237\u975E\u7CFB\u7EDF\u9ED8\u8BA4\u8D26\u6237\uFF0C\u8BF7\u7BA1\u7406\u5458\u786E\u8BA4\u662F\u5426\u4E3A\u53EF\u7591\u8D26\u6237--------[\u9700\u8C03\u6574]&quot;}}&#39;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u7279\u6743\u7528\u6237:&quot;</span></span>
<span class="line"><span style="color:#393A34;">awk -F: </span><span style="color:#B56959;">&#39;$3==0 {print $1}&#39;</span><span style="color:#393A34;"> /etc/passwd</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u4E2D\u7A7A\u53E3\u4EE4\u8D26\u6237:&quot;</span></span>
<span class="line"><span style="color:#393A34;">awk -F: </span><span style="color:#B56959;">&#39;($2==&quot;!!&quot;) {print $1&quot;\u8BE5\u8D26\u6237\u4E3A\u7A7A\u53E3\u4EE4\u8D26\u6237\uFF0C\u8BF7\u7BA1\u7406\u5458\u786E\u8BA4\u662F\u5426\u4E3A\u65B0\u589E\u8D26\u6237\uFF0C\u5982\u679C\u4E3A\u65B0\u5EFA\u8D26\u6237\uFF0C\u8BF7\u914D\u7F6E\u5BC6\u7801-------[\u9700\u8C03\u6574]&quot;}&#39;</span><span style="color:#393A34;"> /etc/shadow</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u5B89\u5168\u5BA1\u8BA1&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6B63\u5E38\u60C5\u51B5\u4E0B\u767B\u5F55\u5230\u672C\u673A30\u5929\u5185\u7684\u6240\u6709\u7528\u6237\u7684\u5386\u53F2\u8BB0\u5F55:&quot;</span></span>
<span class="line"><span style="color:#393A34;">last </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> head -n 30</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u67E5\u770Bsyslog\u65E5\u5FD7\u5BA1\u8BA1\u670D\u52A1\u662F\u5426\u5F00\u542F:&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> service rsyslog status </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> egrep </span><span style="color:#B56959;">&quot; active \\(running&quot;</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,syslog\u670D\u52A1\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,syslog\u670D\u52A1\u672A\u5F00\u542F\uFF0C\u5EFA\u8BAE\u901A\u8FC7service rsyslog start\u5F00\u542F\u65E5\u5FD7\u5BA1\u8BA1\u529F\u80FD---------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u67E5\u770Bsyslog\u65E5\u5FD7\u662F\u5426\u5F00\u542F\u5916\u53D1:&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> more /etc/rsyslog.conf </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> egrep </span><span style="color:#B56959;">&quot;@...\\.|@..\\.|@.\\.|\\*.\\* @...\\.|\\*\\.\\* @..\\.|\\*\\.\\* @.\\.&quot;</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,\u5BA2\u6237\u7AEFsyslog\u65E5\u5FD7\u5DF2\u5F00\u542F\u5916\u53D1--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u7ECF\u5206\u6790,\u5BA2\u6237\u7AEFsyslog\u65E5\u5FD7\u672A\u5F00\u542F\u5916\u53D1---------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5BA1\u8BA1\u7684\u8981\u7D20\u548C\u5BA1\u8BA1\u65E5\u5FD7:&quot;</span></span>
<span class="line"><span style="color:#393A34;">more /etc/rsyslog.conf  </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v </span><span style="color:#B56959;">&quot;^[$|#]&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v </span><span style="color:#B56959;">&quot;^$&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u4E2D\u5173\u952E\u6587\u4EF6\u4FEE\u6539\u65F6\u95F4:&quot;</span></span>
<span class="line"><span style="color:#393A34;">ls -ltr /bin/ls /bin/login /etc/passwd  /bin/ps /etc/shadow</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">awk </span><span style="color:#B56959;">&#39;{print &quot;&gt;&gt;&gt;\u6587\u4EF6\u540D\uFF1A&quot;$9&quot;  &quot;&quot;\u6700\u540E\u4FEE\u6539\u65F6\u95F4\uFF1A&quot;$6&quot; &quot;$7&quot; &quot;$8}&#39;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span></span>
<span class="line"><span style="color:#B56959;">###############################################################################################</span></span>
<span class="line"><span style="color:#B56959;">#   ls\u6587\u4EF6:\u662F\u5B58\u50A8ls\u547D\u4EE4\u7684\u529F\u80FD\u51FD\u6570,\u88AB\u5220\u9664\u4EE5\u540E,\u5C31\u65E0\u6CD5\u6267\u884Cls\u547D\u4EE4                                 #</span></span>
<span class="line"><span style="color:#B56959;">#   login\u6587\u4EF6:login\u662F\u63A7\u5236\u7528\u6237\u767B\u5F55\u7684\u6587\u4EF6,\u4E00\u65E6\u88AB\u7BE1\u6539\u6216\u5220\u9664,\u7CFB\u7EDF\u5C06\u65E0\u6CD5\u5207\u6362\u7528\u6237\u6216\u767B\u9646\u7528\u6237         #</span></span>
<span class="line"><span style="color:#B56959;">#   /etc/passwd\u662F\u4E00\u4E2A\u6587\u4EF6,\u4E3B\u8981\u662F\u4FDD\u5B58\u7528\u6237\u4FE1\u606F                                                  #</span></span>
<span class="line"><span style="color:#B56959;">#   /bin/ps \u8FDB\u7A0B\u67E5\u770B\u547D\u4EE4\u529F\u80FD\u652F\u6301\u6587\u4EF6,\u6587\u4EF6\u635F\u574F\u6216\u88AB\u66F4\u6539\u540E,\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528ps\u547D\u4EE4                    #</span></span>
<span class="line"><span style="color:#B56959;">#   /etc/shadow\u662F/etc/passwd\u7684\u5F71\u5B50\u6587\u4EF6,\u5BC6\u7801\u5B58\u653E\u5728\u8BE5\u6587\u4EF6\u5F53\u4E2D,\u5E76\u4E14\u53EA\u6709root\u7528\u6237\u53EF\u8BFB              #</span></span>
<span class="line"><span style="color:#B56959;">###############################################################################################&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u68C0\u67E5\u91CD\u8981\u65E5\u5FD7\u6587\u4EF6\u662F\u5426\u5B58\u5728:&quot;</span></span>
<span class="line"><span style="color:#393A34;">log_secure=/var/log/secure</span></span>
<span class="line"><span style="color:#393A34;">log_messages=/var/log/messages</span></span>
<span class="line"><span style="color:#393A34;">log_cron=/var/log/cron</span></span>
<span class="line"><span style="color:#393A34;">log_boot=/var/log/boot.log</span></span>
<span class="line"><span style="color:#393A34;">log_dmesg=/var/log/dmesg</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-e</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">log_secure&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/secure\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/secure\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-e</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">log_messages&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/messages\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/messages\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-e</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">log_cron&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/cron\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/cron\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-e</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">log_boot&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/boot.log\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/boot.log\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-e</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#B56959;">log_dmesg&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/dmesg\u65E5\u5FD7\u6587\u4EF6\u5B58\u5728&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;/var/log/dmesg\u65E5\u5FD7\u6587\u4EF6\u4E0D\u5B58\u5728--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u5269\u4F59\u4FE1\u606F\u4FDD\u62A4&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5206\u533A\u60C5\u51B5:&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5982\u679C\u78C1\u76D8\u7A7A\u95F4\u5229\u7528\u7387\u8FC7\u9AD8\uFF0C\u8BF7\u53CA\u65F6\u8C03\u6574---------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#393A34;">df -h</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u53EF\u7528\u5757\u8BBE\u5907\u4FE1\u606F:&quot;</span></span>
<span class="line"><span style="color:#393A34;">lsblk</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6587\u4EF6\u7CFB\u7EDF\u4FE1\u606F:&quot;</span></span>
<span class="line"><span style="color:#393A34;">more /etc/fstab  </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v </span><span style="color:#B56959;">&quot;^#&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v </span><span style="color:#B56959;">&quot;^$&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u5165\u4FB5\u9632\u8303\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7CFB\u7EDF\u5165\u4FB5\u884C\u4E3A:&quot;</span></span>
<span class="line"><span style="color:#393A34;">more /var/log/secure </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">grep refused</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6709\u5165\u4FB5\u884C\u4E3A\uFF0C\u8BF7\u5206\u6790\u5904\u7406--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u65E0\u5165\u4FB5\u884C\u4E3A&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7528\u6237\u9519\u8BEF\u767B\u5165\u5217\u8868:&quot;</span></span>
<span class="line"><span style="color:#393A34;">lastb </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> head </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 1 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u65E0\u7528\u6237\u9519\u8BEF\u767B\u5165\u5217\u8868&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u7528\u6237\u9519\u8BEF\u767B\u5165--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#393A34;">    lastb </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> head </span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;ssh\u66B4\u529B\u767B\u5165\u4FE1\u606F:&quot;</span></span>
<span class="line"><span style="color:#393A34;">more /var/log/secure </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep  </span><span style="color:#B56959;">&quot;Failed&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 1 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u65E0ssh\u66B4\u529B\u767B\u5165\u4FE1\u606F&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">    more /var/log/secure</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">awk </span><span style="color:#B56959;">&#39;/Failed/{print $(NF-3)}&#39;</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">sort</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">uniq -c</span><span style="color:#AB5959;">|</span><span style="color:#393A34;">awk </span><span style="color:#B56959;">&#39;{print &quot;&gt;&gt;&gt;\u767B\u5165\u5931\u8D25\u7684IP\u548C\u5C1D\u8BD5\u6B21\u6570: &quot;$2&quot;=&quot;$1&quot;\u6B21---------[\u9700\u8C03\u6574]&quot;;}&#39;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u6076\u610F\u4EE3\u7801\u9632\u8303&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u68C0\u67E5\u662F\u5426\u5B89\u88C5\u75C5\u6BD2\u8F6F\u4EF6:&quot;</span></span>
<span class="line"><span style="color:#393A34;">crontab -l </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep clamscan.sh </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u5DF2\u5B89\u88C5ClamAV\u6740\u6BD2\u8F6F\u4EF6&quot;</span></span>
<span class="line"><span style="color:#393A34;">  crontab -l </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep freshclam.sh </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /dev/null</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u5DF2\u90E8\u7F72\u5B9A\u65F6\u66F4\u65B0\u75C5\u6BD2\u5E93&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u672A\u5B89\u88C5ClamAV\u6740\u6BD2\u8F6F\u4EF6,\u8BF7\u90E8\u7F72\u6740\u6BD2\u8F6F\u4EF6\u52A0\u56FA\u4E3B\u673A\u9632\u62A4--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot; &quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\u8D44\u6E90\u63A7\u5236\u5B89\u5168&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86xinetd\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> ps -elf </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">grep xinet </span><span style="color:#AB5959;">|</span><span style="color:#393A34;">grep -v </span><span style="color:#B56959;">&quot;grep xinet&quot;</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;xinetd\u670D\u52A1\u6B63\u5728\u8FD0\u884C\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u53EF\u4EE5\u628Axinetd\u670D\u52A1\u5173\u95ED--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;xinetd\u670D\u52A1\u672A\u5F00\u542F-------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86ssh\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> service sshd status </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -E </span><span style="color:#B56959;">&quot;listening on|active \\(running\\)&quot;</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;SSH\u670D\u52A1\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;SSH\u670D\u52A1\u672A\u5F00\u542F--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u67E5\u770B\u662F\u5426\u5F00\u542F\u4E86Telnet-Server\u670D\u52A1:&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> more /etc/xinetd.d/telnetd </span><span style="color:#AB5959;">2&gt;&amp;1|</span><span style="color:#393A34;">grep -E </span><span style="color:#B56959;">&quot;disable=no&quot;</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;Telnet-Server\u670D\u52A1\u5DF2\u5F00\u542F&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;Telnet-Server\u670D\u52A1\u672A\u5F00\u542F--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#393A34;">ps axu </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep iptables </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v grep </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> ps axu </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep firewalld </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -v grep </span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u9632\u706B\u5899\u5DF2\u542F\u7528&quot;</span></span>
<span class="line"><span style="color:#393A34;">iptables -nvL --line-numbers</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u9632\u706B\u5899\u672A\u542F\u7528--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;">  </span><span style="color:#B56959;">&quot;\u67E5\u770B\u7CFB\u7EDFSSH\u8FDC\u7A0B\u8BBF\u95EE\u8BBE\u7F6E\u7B56\u7565(host.deny\u62D2\u7EDD\u5217\u8868):&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> more /etc/hosts.deny </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -E </span><span style="color:#B56959;">&quot;sshd&quot;</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u5DF2\u8BBE\u7F6E--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u672A\u8BBE\u7F6E--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u67E5\u770B\u7CFB\u7EDFSSH\u8FDC\u7A0B\u8BBF\u95EE\u8BBE\u7F6E\u7B56\u7565(hosts.allow\u5141\u8BB8\u5217\u8868):&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> more /etc/hosts.allow </span><span style="color:#AB5959;">|</span><span style="color:#393A34;"> grep -E </span><span style="color:#B56959;">&quot;sshd&quot;</span><span style="color:#AB5959;">;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u5DF2\u8BBE\u7F6E--------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u8FDC\u7A0B\u8BBF\u95EE\u7B56\u7565\u672A\u8BBE\u7F6E--------[\u65E0\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5F53hosts.allow\u548Chost.deny\u76F8\u51B2\u7A81\u65F6,\u4EE5hosts.allow\u8BBE\u7F6E\u4E3A\u51C6&quot;</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;=============================dividing line================================&quot;</span></span>
<span class="line"><span style="color:#393A34;">grep -i </span><span style="color:#B56959;">&quot;TMOUT&quot;</span><span style="color:#393A34;"> /etc/profile /etc/bashrc</span></span>
<span class="line"><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">?</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> 0 </span><span style="color:#8E8F8B;">]</span><span style="color:#AB5959;">;</span><span style="color:#1C6B48;">then</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u5DF2\u8BBE\u7F6E\u767B\u5165\u8D85\u65F6\u9650\u5236&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">else</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;\u672A\u8BBE\u7F6E\u767B\u5165\u8D85\u65F6\u9650\u5236,\u8BF7\u8BBE\u7F6E,\u8BBE\u7F6E\u65B9\u6CD5:\u5728/etc/profile\u6216\u8005/etc/bashrc\u91CC\u9762\u6DFB\u52A0\u53C2\u6570TMOUT=600 --------[\u9700\u8C03\u6574]&quot;</span></span>
<span class="line"><span style="color:#1C6B48;">fi</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;end&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">#!/bin/bash</span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u8981\u76D1\u63A7\u7684\u672C\u5730\u670D\u52A1\u5668IP\u5730\u5740</span></span>
<span class="line"><span style="color:#DBD7CA;">IP=</span><span style="color:#C98A7D;">\`ifconfig </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep inet </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep -vE &#39;inet6|127.0.0.1&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;IP\u5730\u5740\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">IP</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6cpu\u603B\u6838\u6570</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_num=</span><span style="color:#C98A7D;">\`grep -c &quot;model name&quot; /proc/cpuinfo\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;cpu\u603B\u6838\u6570\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_num</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># 1\u3001\u83B7\u53D6CPU\u5229\u7528\u7387</span></span>
<span class="line"><span style="color:#758575;">################################################</span></span>
<span class="line"><span style="color:#758575;">#us \u7528\u6237\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#758575;">#sy \u5185\u6838\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#758575;">#ni \u7528\u6237\u8FDB\u7A0B\u7A7A\u95F4\u5185\u6539\u53D8\u8FC7\u4F18\u5148\u7EA7\u7684\u8FDB\u7A0B\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#758575;">#id \u7A7A\u95F2CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#758575;">#wa \u7B49\u5F85\u8F93\u5165\u8F93\u51FA\u7684CPU\u65F6\u95F4\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#758575;">#hi \u786C\u4EF6\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#758575;">#si \u8F6F\u4EF6\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#758575;">#################################################</span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u7528\u6237\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_user=</span><span style="color:#C98A7D;">\`top -b -n 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Cpu </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7528\u6237\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_user</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u5185\u6838\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_system=</span><span style="color:#C98A7D;">\`top -b -n 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Cpu </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5185\u6838\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_system</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u7A7A\u95F2CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_idle=</span><span style="color:#C98A7D;">\`top -b -n 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Cpu </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $8}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7A7A\u95F2CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_idle</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u7B49\u5F85\u8F93\u5165\u8F93\u51FA\u5360CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_iowait=</span><span style="color:#C98A7D;">\`top -b -n 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Cpu </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $10}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7B49\u5F85\u8F93\u5165\u8F93\u51FA\u5360CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_iowait</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;">#2\u3001\u83B7\u53D6CPU\u4E0A\u4E0B\u6587\u5207\u6362\u548C\u4E2D\u65AD\u6B21\u6570</span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6CPU\u4E2D\u65AD\u6B21\u6570</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_interrupt=</span><span style="color:#C98A7D;">\`vmstat -n 1 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed -n 3p </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $11}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU\u4E2D\u65AD\u6B21\u6570\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_interrupt</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6CPU\u4E0A\u4E0B\u6587\u5207\u6362\u6B21\u6570</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_context_switch=</span><span style="color:#C98A7D;">\`vmstat -n 1 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed -n 3p </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $12}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU\u4E0A\u4E0B\u6587\u5207\u6362\u6B21\u6570\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_context_switch</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;">#3\u3001\u83B7\u53D6CPU\u8D1F\u8F7D\u4FE1\u606F</span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6CPU15\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_load_15min=</span><span style="color:#C98A7D;">\`uptime </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $11}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &#39;,&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU 15\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_load_15min</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6CPU5\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_load_5min=</span><span style="color:#C98A7D;">\`uptime </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $10}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &#39;,&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU 5\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_load_5min</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6CPU1\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_load_1min=</span><span style="color:#C98A7D;">\`uptime </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $9}&#39; </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> cut -f 1 -d &#39;,&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU 1\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_load_1min</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u4EFB\u52A1\u961F\u5217(\u5C31\u7EEA\u72B6\u6001\u7B49\u5F85\u7684\u8FDB\u7A0B\u6570)</span></span>
<span class="line"><span style="color:#DBD7CA;">cpu_task_length=</span><span style="color:#C98A7D;">\`vmstat -n 1 1 </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed -n 3p </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $1}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;CPU\u4EFB\u52A1\u961F\u5217\u957F\u5EA6\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">cpu_task_length</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;">#4\u3001\u83B7\u53D6\u5185\u5B58\u4FE1\u606F</span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u7269\u7406\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_total=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Mem </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u7269\u7406\u5185\u5B58\u603B\u91CF\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_total</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u64CD\u4F5C\u7CFB\u7EDF\u5DF2\u4F7F\u7528\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_sys_used=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Mem </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $3}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5DF2\u4F7F\u7528\u5185\u5B58\u603B\u91CF(\u64CD\u4F5C\u7CFB\u7EDF)\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_sys_used</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u64CD\u4F5C\u7CFB\u7EDF\u672A\u4F7F\u7528\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_sys_free=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Mem </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5269\u4F59\u5185\u5B58\u603B\u91CF(\u64CD\u4F5C\u7CFB\u7EDF)\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_sys_free</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u5E94\u7528\u7A0B\u5E8F\u5DF2\u4F7F\u7528\u7684\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_user_used=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed -n 3p </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $3}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5DF2\u4F7F\u7528\u5185\u5B58\u603B\u91CF(\u5E94\u7528\u7A0B\u5E8F)\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_user_used</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u5E94\u7528\u7A0B\u5E8F\u672A\u4F7F\u7528\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_user_free=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> sed -n 3p </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5269\u4F59\u5185\u5B58\u603B\u91CF(\u5E94\u7528\u7A0B\u5E8F)\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_user_free</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u4EA4\u6362\u5206\u533A\u603B\u5927\u5C0F</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_swap_total=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Swap </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $2}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u4EA4\u6362\u5206\u533A\u603B\u5927\u5C0F\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_swap_total</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u5DF2\u4F7F\u7528\u4EA4\u6362\u5206\u533A\u5927\u5C0F</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_swap_used=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Swap </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $3}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5DF2\u4F7F\u7528\u4EA4\u6362\u5206\u533A\u5927\u5C0F\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_swap_used</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u83B7\u53D6\u5269\u4F59\u4EA4\u6362\u5206\u533A\u5927\u5C0F</span></span>
<span class="line"><span style="color:#DBD7CA;">mem_swap_free=</span><span style="color:#C98A7D;">\`free </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep Swap </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5269\u4F59\u4EA4\u6362\u5206\u533A\u5927\u5C0F\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">mem_swap_free</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;">#5\u3001\u83B7\u53D6\u78C1\u76D8I/O\u7EDF\u8BA1\u4FE1\u606F</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6307\u5B9A\u8BBE\u5907(/dev/sda)\u7684\u7EDF\u8BA1\u4FE1\u606F&quot;</span></span>
<span class="line"><span style="color:#758575;"># \u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u8BFB\u8BF7\u6C42\u6B21\u6570</span></span>
<span class="line"><span style="color:#DBD7CA;">disk_sda_rs=</span><span style="color:#C98A7D;">\`iostat -kx </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep sda</span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u8BFB\u8BF7\u6C42\u6B21\u6570\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">disk_sda_rs</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u5199\u8BF7\u6C42\u6B21\u6570</span></span>
<span class="line"><span style="color:#DBD7CA;">disk_sda_ws=</span><span style="color:#C98A7D;">\`iostat -kx </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep sda</span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $5}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u5199\u8BF7\u6C42\u6B21\u6570\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">disk_sda_ws</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u961F\u5217\u957F\u5EA6\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#DBD7CA;">disk_sda_avgqu_sz=</span><span style="color:#C98A7D;">\`iostat -kx </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep sda</span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $9}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u961F\u5217\u957F\u5EA6\u5E73\u5747\u503C&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">disk_sda_avgqu_sz</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u6BCF\u6B21\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u5E73\u5747\u65F6\u95F4</span></span>
<span class="line"><span style="color:#DBD7CA;">disk_sda_await=</span><span style="color:#C98A7D;">\`iostat -kx </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep sda</span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $10}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u6BCF\u6B21\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u5E73\u5747\u65F6\u95F4\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">disk_sda_await</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u670D\u52A1\u65F6\u95F4\u5747\u503C</span></span>
<span class="line"><span style="color:#DBD7CA;">disk_sda_svctm=</span><span style="color:#C98A7D;">\`iostat -kx </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep sda</span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $11}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u670D\u52A1\u65F6\u95F4\u5747\u503C\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">disk_sda_svctm</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#758575;"># \u5411\u8BBE\u5907\u53D1\u8D77I/O\u8BF7\u6C42\u7684CPU\u65F6\u95F4\u767E\u5206\u5360\u6BD4</span></span>
<span class="line"><span style="color:#DBD7CA;">disk_sda_util=</span><span style="color:#C98A7D;">\`iostat -kx </span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> grep sda</span><span style="color:#CB7676;">|</span><span style="color:#C98A7D;"> awk &#39;{print $12}&#39;\`</span></span>
<span class="line"><span style="color:#E0A569;">echo</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u5411\u8BBE\u5907\u53D1\u8D77I/O\u8BF7\u6C42\u7684CPU\u65F6\u95F4\u767E\u5206\u5360\u6BD4\uFF1A&quot;</span><span style="color:#858585;">$</span><span style="color:#B8A965;">disk_sda_util</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">#!/bin/bash</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u8981\u76D1\u63A7\u7684\u672C\u5730\u670D\u52A1\u5668IP\u5730\u5740</span></span>
<span class="line"><span style="color:#393A34;">IP=</span><span style="color:#B56959;">\`ifconfig </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep inet </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep -vE &#39;inet6|127.0.0.1&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;IP\u5730\u5740\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">IP</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6cpu\u603B\u6838\u6570</span></span>
<span class="line"><span style="color:#393A34;">cpu_num=</span><span style="color:#B56959;">\`grep -c &quot;model name&quot; /proc/cpuinfo\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;cpu\u603B\u6838\u6570\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_num</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># 1\u3001\u83B7\u53D6CPU\u5229\u7528\u7387</span></span>
<span class="line"><span style="color:#A0ADA0;">################################################</span></span>
<span class="line"><span style="color:#A0ADA0;">#us \u7528\u6237\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#A0ADA0;">#sy \u5185\u6838\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#A0ADA0;">#ni \u7528\u6237\u8FDB\u7A0B\u7A7A\u95F4\u5185\u6539\u53D8\u8FC7\u4F18\u5148\u7EA7\u7684\u8FDB\u7A0B\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#A0ADA0;">#id \u7A7A\u95F2CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#A0ADA0;">#wa \u7B49\u5F85\u8F93\u5165\u8F93\u51FA\u7684CPU\u65F6\u95F4\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#A0ADA0;">#hi \u786C\u4EF6\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#A0ADA0;">#si \u8F6F\u4EF6\u4E2D\u65AD</span></span>
<span class="line"><span style="color:#A0ADA0;">#################################################</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u7528\u6237\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">cpu_user=</span><span style="color:#B56959;">\`top -b -n 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Cpu </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7528\u6237\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_user</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u5185\u6838\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">cpu_system=</span><span style="color:#B56959;">\`top -b -n 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Cpu </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5185\u6838\u7A7A\u95F4\u5360\u7528CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_system</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u7A7A\u95F2CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">cpu_idle=</span><span style="color:#B56959;">\`top -b -n 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Cpu </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $8}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7A7A\u95F2CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_idle</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u7B49\u5F85\u8F93\u5165\u8F93\u51FA\u5360CPU\u767E\u5206\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">cpu_iowait=</span><span style="color:#B56959;">\`top -b -n 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Cpu </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $10}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &quot;%&quot;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7B49\u5F85\u8F93\u5165\u8F93\u51FA\u5360CPU\u767E\u5206\u6BD4\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_iowait</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;">#2\u3001\u83B7\u53D6CPU\u4E0A\u4E0B\u6587\u5207\u6362\u548C\u4E2D\u65AD\u6B21\u6570</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6CPU\u4E2D\u65AD\u6B21\u6570</span></span>
<span class="line"><span style="color:#393A34;">cpu_interrupt=</span><span style="color:#B56959;">\`vmstat -n 1 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed -n 3p </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $11}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU\u4E2D\u65AD\u6B21\u6570\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_interrupt</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6CPU\u4E0A\u4E0B\u6587\u5207\u6362\u6B21\u6570</span></span>
<span class="line"><span style="color:#393A34;">cpu_context_switch=</span><span style="color:#B56959;">\`vmstat -n 1 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed -n 3p </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $12}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU\u4E0A\u4E0B\u6587\u5207\u6362\u6B21\u6570\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_context_switch</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;">#3\u3001\u83B7\u53D6CPU\u8D1F\u8F7D\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6CPU15\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#393A34;">cpu_load_15min=</span><span style="color:#B56959;">\`uptime </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $11}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &#39;,&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU 15\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_load_15min</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6CPU5\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#393A34;">cpu_load_5min=</span><span style="color:#B56959;">\`uptime </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $10}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &#39;,&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU 5\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_load_5min</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6CPU1\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#393A34;">cpu_load_1min=</span><span style="color:#B56959;">\`uptime </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $9}&#39; </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> cut -f 1 -d &#39;,&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU 1\u5206\u949F\u524D\u5230\u73B0\u5728\u7684\u8D1F\u8F7D\u5E73\u5747\u503C\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_load_1min</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u4EFB\u52A1\u961F\u5217(\u5C31\u7EEA\u72B6\u6001\u7B49\u5F85\u7684\u8FDB\u7A0B\u6570)</span></span>
<span class="line"><span style="color:#393A34;">cpu_task_length=</span><span style="color:#B56959;">\`vmstat -n 1 1 </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed -n 3p </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $1}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;CPU\u4EFB\u52A1\u961F\u5217\u957F\u5EA6\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">cpu_task_length</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;">#4\u3001\u83B7\u53D6\u5185\u5B58\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u7269\u7406\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#393A34;">mem_total=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Mem </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u7269\u7406\u5185\u5B58\u603B\u91CF\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_total</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u64CD\u4F5C\u7CFB\u7EDF\u5DF2\u4F7F\u7528\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#393A34;">mem_sys_used=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Mem </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $3}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5DF2\u4F7F\u7528\u5185\u5B58\u603B\u91CF(\u64CD\u4F5C\u7CFB\u7EDF)\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_sys_used</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u64CD\u4F5C\u7CFB\u7EDF\u672A\u4F7F\u7528\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#393A34;">mem_sys_free=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Mem </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5269\u4F59\u5185\u5B58\u603B\u91CF(\u64CD\u4F5C\u7CFB\u7EDF)\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_sys_free</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u5E94\u7528\u7A0B\u5E8F\u5DF2\u4F7F\u7528\u7684\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#393A34;">mem_user_used=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed -n 3p </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $3}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5DF2\u4F7F\u7528\u5185\u5B58\u603B\u91CF(\u5E94\u7528\u7A0B\u5E8F)\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_user_used</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u5E94\u7528\u7A0B\u5E8F\u672A\u4F7F\u7528\u5185\u5B58\u603B\u91CF</span></span>
<span class="line"><span style="color:#393A34;">mem_user_free=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> sed -n 3p </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5269\u4F59\u5185\u5B58\u603B\u91CF(\u5E94\u7528\u7A0B\u5E8F)\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_user_free</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u4EA4\u6362\u5206\u533A\u603B\u5927\u5C0F</span></span>
<span class="line"><span style="color:#393A34;">mem_swap_total=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Swap </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $2}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u4EA4\u6362\u5206\u533A\u603B\u5927\u5C0F\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_swap_total</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u5DF2\u4F7F\u7528\u4EA4\u6362\u5206\u533A\u5927\u5C0F</span></span>
<span class="line"><span style="color:#393A34;">mem_swap_used=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Swap </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $3}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5DF2\u4F7F\u7528\u4EA4\u6362\u5206\u533A\u5927\u5C0F\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_swap_used</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u83B7\u53D6\u5269\u4F59\u4EA4\u6362\u5206\u533A\u5927\u5C0F</span></span>
<span class="line"><span style="color:#393A34;">mem_swap_free=</span><span style="color:#B56959;">\`free </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep Swap </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5269\u4F59\u4EA4\u6362\u5206\u533A\u5927\u5C0F\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">mem_swap_free</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">#5\u3001\u83B7\u53D6\u78C1\u76D8I/O\u7EDF\u8BA1\u4FE1\u606F</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6307\u5B9A\u8BBE\u5907(/dev/sda)\u7684\u7EDF\u8BA1\u4FE1\u606F&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u8BFB\u8BF7\u6C42\u6B21\u6570</span></span>
<span class="line"><span style="color:#393A34;">disk_sda_rs=</span><span style="color:#B56959;">\`iostat -kx </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep sda</span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $4}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u8BFB\u8BF7\u6C42\u6B21\u6570\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">disk_sda_rs</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u5199\u8BF7\u6C42\u6B21\u6570</span></span>
<span class="line"><span style="color:#393A34;">disk_sda_ws=</span><span style="color:#B56959;">\`iostat -kx </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep sda</span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $5}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6BCF\u79D2\u5411\u8BBE\u5907\u53D1\u8D77\u7684\u5199\u8BF7\u6C42\u6B21\u6570\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">disk_sda_ws</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u961F\u5217\u957F\u5EA6\u5E73\u5747\u503C</span></span>
<span class="line"><span style="color:#393A34;">disk_sda_avgqu_sz=</span><span style="color:#B56959;">\`iostat -kx </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep sda</span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $9}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u961F\u5217\u957F\u5EA6\u5E73\u5747\u503C&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">disk_sda_avgqu_sz</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u6BCF\u6B21\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u5E73\u5747\u65F6\u95F4</span></span>
<span class="line"><span style="color:#393A34;">disk_sda_await=</span><span style="color:#B56959;">\`iostat -kx </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep sda</span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $10}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u6BCF\u6B21\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u8BF7\u6C42\u5E73\u5747\u65F6\u95F4\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">disk_sda_await</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u670D\u52A1\u65F6\u95F4\u5747\u503C</span></span>
<span class="line"><span style="color:#393A34;">disk_sda_svctm=</span><span style="color:#B56959;">\`iostat -kx </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep sda</span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $11}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5411\u8BBE\u5907\u53D1\u8D77\u7684I/O\u670D\u52A1\u65F6\u95F4\u5747\u503C\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">disk_sda_svctm</span></span>
<span class="line"><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5411\u8BBE\u5907\u53D1\u8D77I/O\u8BF7\u6C42\u7684CPU\u65F6\u95F4\u767E\u5206\u5360\u6BD4</span></span>
<span class="line"><span style="color:#393A34;">disk_sda_util=</span><span style="color:#B56959;">\`iostat -kx </span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> grep sda</span><span style="color:#AB5959;">|</span><span style="color:#B56959;"> awk &#39;{print $12}&#39;\`</span></span>
<span class="line"><span style="color:#B58451;">echo</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u5411\u8BBE\u5907\u53D1\u8D77I/O\u8BF7\u6C42\u7684CPU\u65F6\u95F4\u767E\u5206\u5360\u6BD4\uFF1A&quot;</span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">disk_sda_util</span></span>
<span class="line"></span></code></pre></div>`,4),t=[o];function e(c,r,y,A,B,i){return n(),a("div",null,t)}var u=s(p,[["render",e]]);export{g as __pageData,u as default};
