import{_ as s,o as n,c as a,a as l}from"./app.1e6146c3.js";const i=JSON.parse('{"title":"MySQL\u6E38\u6807","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u6E38\u6807\u8BED\u6CD5","slug":"\u6E38\u6807\u8BED\u6CD5"},{"level":2,"title":"\u793A\u4F8B","slug":"\u793A\u4F8B"}],"relativePath":"LinuxBasics/DataBases/MySQL/MySQL Cursor.md","lastUpdated":1657272051000}'),p={name:"LinuxBasics/DataBases/MySQL/MySQL Cursor.md"},o=l(`<h1 id="mysql\u6E38\u6807" tabindex="-1">MySQL\u6E38\u6807 <a class="header-anchor" href="#mysql\u6E38\u6807" aria-hidden="true">#</a></h1><p>\u6E38\u6807\uFF08Cursor\uFF09\u662F\u5904\u7406\u6570\u636E\u7684\u4E00\u79CD\u65B9\u6CD5\uFF0C\u4E3A\u4E86\u67E5\u770B\u6216\u8005\u5904\u7406\u7ED3\u679C\u96C6\u4E2D\u7684\u6570\u636E\uFF0C\u6E38\u6807\u63D0\u4F9B\u4E86\u5728\u7ED3\u679C\u96C6\u4E2D\u4E00\u6B21\u4E00\u884C\u904D\u5386\u6570\u636E\u7684\u80FD\u529B\u3002\u26A0\uFE0F<strong>\u6E38\u6807\u53EA\u80FD\u5728\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u4E2D\u4F7F\u7528\u3002</strong></p><p>\u6E38\u6807\u7684\u5904\u7406\u8FC7\u7A0B\uFF1A4\u6B65</p><ul><li><p>\u58F0\u660E\u6E38\u6807<code>declare</code>\uFF1A\u6CA1\u6709\u68C0\u7D22\u6570\u636E\uFF0C\u53EA\u662F\u5B9A\u4E49\u8981\u4F7F\u7528\u7684select\u8BED\u53E5</p></li><li><p>\u6253\u5F00\u6E38\u6807<code>open</code>\uFF1A\u6253\u5F00\u6E38\u6807\u4EE5\u4F9B\u4F7F\u7528\uFF0C\u7528\u4E0A\u4E00\u6B65\u5B9A\u4E49\u7684select\u8BED\u53E5\u628A\u6570\u636E\u5B9E\u9645\u68C0\u7D22\u51FA\u6765</p></li><li><p>\u68C0\u7D22\u6E38\u6807<code>fetch</code>\uFF1A\u5BF9\u4E8E\u586B\u6709\u6570\u636E\u7684\u6E38\u6807\uFF0C\u6839\u636E\u9700\u8981\u53D6\u51FA(\u68C0\u7D22)\u5404\u884C</p></li><li><p>\u5173\u95ED\u6E38\u6807<code>close</code>\uFF1A\u5728\u7ED3\u675F\u6E38\u6807\u4F7F\u7528\u65F6\uFF0C\u5FC5\u987B\u5173\u95ED\u6E38\u6807</p></li></ul><h2 id="\u6E38\u6807\u8BED\u6CD5" tabindex="-1">\u6E38\u6807\u8BED\u6CD5 <a class="header-anchor" href="#\u6E38\u6807\u8BED\u6CD5" aria-hidden="true">#</a></h2><p>\u58F0\u660E\u6E38\u6807\uFF1A</p><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u6E38\u6807\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">CURSOR</span><span style="color:#DBD7CA;"> FOR </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u67E5\u8BE2\u8BED\u53E5</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u6E38\u6807\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">CURSOR</span><span style="color:#393A34;"> FOR </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u67E5\u8BE2\u8BED\u53E5</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6253\u5F00\u6E38\u6807\uFF1A</p><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">OPEN</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u6E38\u6807\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1C6B48;">OPEN</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u6E38\u6807\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">;</span></span>
<span class="line"></span></code></pre></div><p>\u904D\u5386\u6E38\u6807\uFF1A</p><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">FETCH</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u6E38\u6807\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">INTO</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u53D8\u91CF\u5217\u8868</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1C6B48;">FETCH</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u6E38\u6807\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">INTO</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u53D8\u91CF\u5217\u8868</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5173\u95ED\u6E38\u6807\uFF1A</p><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#4D9375;">CLOSE</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u6E38\u6807\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#1C6B48;">CLOSE</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u6E38\u6807\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u793A\u4F8B" tabindex="-1">\u793A\u4F8B <a class="header-anchor" href="#\u793A\u4F8B" aria-hidden="true">#</a></h2><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">/*\u5220\u9664\u51FD\u6570*/</span></span>
<span class="line"><span style="color:#4D9375;">DROP</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">FUNCTION</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">IF</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">EXISTS</span><span style="color:#DBD7CA;"> fun1;</span></span>
<span class="line"><span style="color:#758575;">/*\u58F0\u660E\u7ED3\u675F\u7B26\u4E3A$*/</span></span>
<span class="line"><span style="color:#DBD7CA;">DELIMITER $</span></span>
<span class="line"><span style="color:#758575;">/*\u521B\u5EFA\u51FD\u6570*/</span></span>
<span class="line"><span style="color:#4D9375;">CREATE</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">FUNCTION</span><span style="color:#DBD7CA;"> fun1(v_max_a </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">RETURNS</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">int</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">BEGIN</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u7528\u4E8E\u4FDD\u5B58\u7ED3\u679C*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> v_total </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">DEFAULT</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u521B\u5EFA\u4E00\u4E2A\u53D8\u91CF\uFF0C\u7528\u6765\u4FDD\u5B58\u5F53\u524D\u884C\u4E2Da\u7684\u503C*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> v_a </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">DEFAULT</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u521B\u5EFA\u4E00\u4E2A\u53D8\u91CF\uFF0C\u7528\u6765\u4FDD\u5B58\u5F53\u524D\u884C\u4E2Db\u7684\u503C*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> v_b </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">DEFAULT</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u521B\u5EFA\u6E38\u6807\u7ED3\u675F\u6807\u5FD7\u53D8\u91CF*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> v_done </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">DEFAULT</span><span style="color:#DBD7CA;"> FALSE;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u521B\u5EFA\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> cur_test1 </span><span style="color:#4D9375;">CURSOR</span><span style="color:#DBD7CA;"> FOR </span><span style="color:#4D9375;">SELECT</span><span style="color:#DBD7CA;"> a,b </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> test1 </span><span style="color:#4D9375;">where</span><span style="color:#DBD7CA;"> a</span><span style="color:#CB7676;">&lt;=</span><span style="color:#DBD7CA;">v_max_a;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u8BBE\u7F6E\u6E38\u6807\u7ED3\u675F\u65F6v_done\u7684\u503C\u4E3Atrue\uFF0C\u53EF\u4EE5v_done\u6765\u5224\u65AD\u6E38\u6807\u662F\u5426\u7ED3\u675F\u4E86*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">DECLARE</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">CONTINUE</span><span style="color:#DBD7CA;"> HANDLER FOR </span><span style="color:#4D9375;">NOT</span><span style="color:#DBD7CA;"> FOUND </span><span style="color:#4D9375;">SET</span><span style="color:#DBD7CA;"> v_done</span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;">TRUE;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u8BBE\u7F6Ev_total\u521D\u59CB\u503C*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">SET</span><span style="color:#DBD7CA;"> v_total </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u6253\u5F00\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">OPEN</span><span style="color:#DBD7CA;"> cur_test1;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u4F7F\u7528Loop\u5FAA\u73AF\u904D\u5386\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    a:</span><span style="color:#4D9375;">LOOP</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#758575;">/*\u5148\u83B7\u53D6\u5F53\u524D\u884C\u7684\u6570\u636E\uFF0C\u7136\u540E\u5C06\u5F53\u524D\u884C\u7684\u6570\u636E\u653E\u5165v_a,v_b\u4E2D\uFF0C\u5982\u679C\u5F53\u524D\u884C\u65E0\u6570\u636E\uFF0Cv_done\u4F1A\u88AB\u7F6E\u4E3Atrue*/</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#4D9375;">FETCH</span><span style="color:#DBD7CA;"> cur_test1 </span><span style="color:#4D9375;">INTO</span><span style="color:#DBD7CA;"> v_a, v_b;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#758575;">/*\u901A\u8FC7v_done\u6765\u5224\u65AD\u6E38\u6807\u662F\u5426\u7ED3\u675F\u4E86\uFF0C\u9000\u51FA\u5FAA\u73AF*/</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> v_done </span><span style="color:#4D9375;">THEN</span></span>
<span class="line"><span style="color:#DBD7CA;">        LEAVE a;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#4D9375;">END</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">IF</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#758575;">/*\u5BF9v_total\u503C\u7D2F\u52A0\u5904\u7406*/</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#4D9375;">SET</span><span style="color:#DBD7CA;"> v_total </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> v_total </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CA;"> v_a </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CA;"> v_b;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">END</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">LOOP</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u5173\u95ED\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">CLOSE</span><span style="color:#DBD7CA;"> cur_test1;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#758575;">/*\u8FD4\u56DE\u7ED3\u679C*/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">RETURN</span><span style="color:#DBD7CA;"> v_total;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">END</span><span style="color:#DBD7CA;"> $</span></span>
<span class="line"><span style="color:#758575;">/*\u7ED3\u675F\u7B26\u7F6E\u4E3A;*/</span></span>
<span class="line"><span style="color:#DBD7CA;">DELIMITER ;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">/*\u5220\u9664\u51FD\u6570*/</span></span>
<span class="line"><span style="color:#1C6B48;">DROP</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">FUNCTION</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">IF</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">EXISTS</span><span style="color:#393A34;"> fun1;</span></span>
<span class="line"><span style="color:#A0ADA0;">/*\u58F0\u660E\u7ED3\u675F\u7B26\u4E3A$*/</span></span>
<span class="line"><span style="color:#393A34;">DELIMITER $</span></span>
<span class="line"><span style="color:#A0ADA0;">/*\u521B\u5EFA\u51FD\u6570*/</span></span>
<span class="line"><span style="color:#1C6B48;">CREATE</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">FUNCTION</span><span style="color:#393A34;"> fun1(v_max_a </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">RETURNS</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">int</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">BEGIN</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u7528\u4E8E\u4FDD\u5B58\u7ED3\u679C*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> v_total </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">DEFAULT</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u521B\u5EFA\u4E00\u4E2A\u53D8\u91CF\uFF0C\u7528\u6765\u4FDD\u5B58\u5F53\u524D\u884C\u4E2Da\u7684\u503C*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> v_a </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">DEFAULT</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u521B\u5EFA\u4E00\u4E2A\u53D8\u91CF\uFF0C\u7528\u6765\u4FDD\u5B58\u5F53\u524D\u884C\u4E2Db\u7684\u503C*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> v_b </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">DEFAULT</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u521B\u5EFA\u6E38\u6807\u7ED3\u675F\u6807\u5FD7\u53D8\u91CF*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> v_done </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">DEFAULT</span><span style="color:#393A34;"> FALSE;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u521B\u5EFA\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> cur_test1 </span><span style="color:#1C6B48;">CURSOR</span><span style="color:#393A34;"> FOR </span><span style="color:#1C6B48;">SELECT</span><span style="color:#393A34;"> a,b </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> test1 </span><span style="color:#1C6B48;">where</span><span style="color:#393A34;"> a</span><span style="color:#AB5959;">&lt;=</span><span style="color:#393A34;">v_max_a;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u8BBE\u7F6E\u6E38\u6807\u7ED3\u675F\u65F6v_done\u7684\u503C\u4E3Atrue\uFF0C\u53EF\u4EE5v_done\u6765\u5224\u65AD\u6E38\u6807\u662F\u5426\u7ED3\u675F\u4E86*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">DECLARE</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">CONTINUE</span><span style="color:#393A34;"> HANDLER FOR </span><span style="color:#1C6B48;">NOT</span><span style="color:#393A34;"> FOUND </span><span style="color:#1C6B48;">SET</span><span style="color:#393A34;"> v_done</span><span style="color:#AB5959;">=</span><span style="color:#393A34;">TRUE;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u8BBE\u7F6Ev_total\u521D\u59CB\u503C*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">SET</span><span style="color:#393A34;"> v_total </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u6253\u5F00\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">OPEN</span><span style="color:#393A34;"> cur_test1;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u4F7F\u7528Loop\u5FAA\u73AF\u904D\u5386\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#393A34;">    a:</span><span style="color:#1C6B48;">LOOP</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A0ADA0;">/*\u5148\u83B7\u53D6\u5F53\u524D\u884C\u7684\u6570\u636E\uFF0C\u7136\u540E\u5C06\u5F53\u524D\u884C\u7684\u6570\u636E\u653E\u5165v_a,v_b\u4E2D\uFF0C\u5982\u679C\u5F53\u524D\u884C\u65E0\u6570\u636E\uFF0Cv_done\u4F1A\u88AB\u7F6E\u4E3Atrue*/</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1C6B48;">FETCH</span><span style="color:#393A34;"> cur_test1 </span><span style="color:#1C6B48;">INTO</span><span style="color:#393A34;"> v_a, v_b;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A0ADA0;">/*\u901A\u8FC7v_done\u6765\u5224\u65AD\u6E38\u6807\u662F\u5426\u7ED3\u675F\u4E86\uFF0C\u9000\u51FA\u5FAA\u73AF*/</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> v_done </span><span style="color:#1C6B48;">THEN</span></span>
<span class="line"><span style="color:#393A34;">        LEAVE a;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1C6B48;">END</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">IF</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A0ADA0;">/*\u5BF9v_total\u503C\u7D2F\u52A0\u5904\u7406*/</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1C6B48;">SET</span><span style="color:#393A34;"> v_total </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> v_total </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> v_a </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> v_b;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">END</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">LOOP</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u5173\u95ED\u6E38\u6807*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">CLOSE</span><span style="color:#393A34;"> cur_test1;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">/*\u8FD4\u56DE\u7ED3\u679C*/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">RETURN</span><span style="color:#393A34;"> v_total;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">END</span><span style="color:#393A34;"> $</span></span>
<span class="line"><span style="color:#A0ADA0;">/*\u7ED3\u675F\u7B26\u7F6E\u4E3A;*/</span></span>
<span class="line"><span style="color:#393A34;">DELIMITER ;</span></span>
<span class="line"></span></code></pre></div><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> delimiter $$</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">create</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">procedure</span><span style="color:#DBD7CA;"> number_of_players(</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">out</span><span style="color:#DBD7CA;"> pnumber </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">begin</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> a_playerno </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;">;  </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> found bool </span><span style="color:#CB7676;">default</span><span style="color:#DBD7CA;"> true;\u3000\u3000\u5FAA\u73AF\u63A7\u5236\u53D8\u91CF\uFF0C\u5176\u503C\u4E3Afalse\u65F6\u5FAA\u73AF\u7ED3\u675F   </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> c_players </span><span style="color:#4D9375;">cursor</span><span style="color:#DBD7CA;"> for</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">select</span><span style="color:#DBD7CA;"> playerno </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> PLAYERS;  \u2460\u58F0\u660E\u6E38\u6807</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">continue</span><span style="color:#DBD7CA;"> handler for </span><span style="color:#4D9375;">not</span><span style="color:#DBD7CA;"> found</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> found</span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;">false;  \u58F0\u660E\u5F02\u5E38\u5904\u7406\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> pnumber</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">open</span><span style="color:#DBD7CA;"> c_players;  \u2461\u6253\u5F00\u6E38\u6807</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">fetch</span><span style="color:#DBD7CA;"> c_players </span><span style="color:#4D9375;">into</span><span style="color:#DBD7CA;"> a_playerno;  \u2462\u68C0\u7D22\u6E38\u6807(\u68C0\u7D22\u7B2C\u4E00\u884C)</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">while</span><span style="color:#DBD7CA;"> found do</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> pnumber</span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;">pnumber</span><span style="color:#CB7676;">+</span><span style="color:#6394BF;">1</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">fetch</span><span style="color:#DBD7CA;"> c_players </span><span style="color:#4D9375;">into</span><span style="color:#DBD7CA;"> a_playerno;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">end</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">while</span><span style="color:#DBD7CA;">;  \u5FAA\u73AF\u68C0\u7D22\u5176\u4F59\u884C</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">close</span><span style="color:#DBD7CA;"> c_players;  \u2463\u5173\u95ED\u6E38\u6807</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">end</span><span style="color:#DBD7CA;">$$</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> delimiter ;</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">call</span><span style="color:#DBD7CA;"> number_of_players(@pnumber);</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">select</span><span style="color:#DBD7CA;"> @pnumber;</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">| @pnumber |</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">|       </span><span style="color:#6394BF;">14</span><span style="color:#DBD7CA;"> |</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">select</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">count</span><span style="color:#DBD7CA;">(</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">) </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> PLAYERS;</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">| </span><span style="color:#E0A569;">count</span><span style="color:#DBD7CA;">(</span><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;">) |</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">|       </span><span style="color:#6394BF;">14</span><span style="color:#DBD7CA;"> |</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> delimiter $$</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">create</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">procedure</span><span style="color:#393A34;"> number_of_players(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">out</span><span style="color:#393A34;"> pnumber </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">begin</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> a_playerno </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;">;  </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> found bool </span><span style="color:#AB5959;">default</span><span style="color:#393A34;"> true;\u3000\u3000\u5FAA\u73AF\u63A7\u5236\u53D8\u91CF\uFF0C\u5176\u503C\u4E3Afalse\u65F6\u5FAA\u73AF\u7ED3\u675F   </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> c_players </span><span style="color:#1C6B48;">cursor</span><span style="color:#393A34;"> for</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">select</span><span style="color:#393A34;"> playerno </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> PLAYERS;  \u2460\u58F0\u660E\u6E38\u6807</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">continue</span><span style="color:#393A34;"> handler for </span><span style="color:#1C6B48;">not</span><span style="color:#393A34;"> found</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> found</span><span style="color:#AB5959;">=</span><span style="color:#393A34;">false;  \u58F0\u660E\u5F02\u5E38\u5904\u7406\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> pnumber</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">open</span><span style="color:#393A34;"> c_players;  \u2461\u6253\u5F00\u6E38\u6807</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">fetch</span><span style="color:#393A34;"> c_players </span><span style="color:#1C6B48;">into</span><span style="color:#393A34;"> a_playerno;  \u2462\u68C0\u7D22\u6E38\u6807(\u68C0\u7D22\u7B2C\u4E00\u884C)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">while</span><span style="color:#393A34;"> found do</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> pnumber</span><span style="color:#AB5959;">=</span><span style="color:#393A34;">pnumber</span><span style="color:#AB5959;">+</span><span style="color:#296AA3;">1</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">fetch</span><span style="color:#393A34;"> c_players </span><span style="color:#1C6B48;">into</span><span style="color:#393A34;"> a_playerno;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">end</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">while</span><span style="color:#393A34;">;  \u5FAA\u73AF\u68C0\u7D22\u5176\u4F59\u884C</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">close</span><span style="color:#393A34;"> c_players;  \u2463\u5173\u95ED\u6E38\u6807</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">end</span><span style="color:#393A34;">$$</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> delimiter ;</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">call</span><span style="color:#393A34;"> number_of_players(@pnumber);</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">select</span><span style="color:#393A34;"> @pnumber;</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">| @pnumber |</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">|       </span><span style="color:#296AA3;">14</span><span style="color:#393A34;"> |</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">select</span><span style="color:#393A34;"> </span><span style="color:#B58451;">count</span><span style="color:#393A34;">(</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">) </span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> PLAYERS;</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">| </span><span style="color:#B58451;">count</span><span style="color:#393A34;">(</span><span style="color:#AB5959;">*</span><span style="color:#393A34;">) |</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">|       </span><span style="color:#296AA3;">14</span><span style="color:#393A34;"> |</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"></span></code></pre></div><div class="language-sql"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> delimiter $$</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">create</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">procedure</span><span style="color:#DBD7CA;"> number_penalties(</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">in</span><span style="color:#DBD7CA;"> p_playerno </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">out</span><span style="color:#DBD7CA;"> pnumber </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">begin</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> a_playerno </span><span style="color:#4D9375;">int</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> found bool </span><span style="color:#CB7676;">default</span><span style="color:#DBD7CA;"> true;  \u5FAA\u73AF\u63A7\u5236\u53D8\u91CF</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> c_players </span><span style="color:#4D9375;">cursor</span><span style="color:#DBD7CA;"> for  \u58F0\u660E\u6E38\u6807</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">select</span><span style="color:#DBD7CA;"> playerno</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">from</span><span style="color:#DBD7CA;"> PENALTIES</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">where</span><span style="color:#DBD7CA;"> playerno </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> p_playerno;  \u5305\u542B\u53D8\u91CFp_playerno</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">declare</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">continue</span><span style="color:#DBD7CA;"> handler for </span><span style="color:#4D9375;">not</span><span style="color:#DBD7CA;"> found</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> found</span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;">false;  \u58F0\u660E\u5F02\u5E38\u5904\u7406\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> pnumber</span><span style="color:#CB7676;">=</span><span style="color:#6394BF;">0</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;">  </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">open</span><span style="color:#DBD7CA;"> c_players;  \u6253\u5F00\u6E38\u6807</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">fetch</span><span style="color:#DBD7CA;"> c_players </span><span style="color:#4D9375;">into</span><span style="color:#DBD7CA;"> a_playerno;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">while</span><span style="color:#DBD7CA;"> found do    \u5FAA\u73AF\u68C0\u7D22\u6E38\u6807\u6BCF\u4E00\u884C</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">set</span><span style="color:#DBD7CA;"> pnumber</span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;">pnumber</span><span style="color:#CB7676;">+</span><span style="color:#6394BF;">1</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000\u3000\u3000</span><span style="color:#4D9375;">fetch</span><span style="color:#DBD7CA;"> c_players </span><span style="color:#4D9375;">into</span><span style="color:#DBD7CA;"> a_playerno;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">end</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">while</span><span style="color:#DBD7CA;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> \u3000\u3000</span><span style="color:#4D9375;">close</span><span style="color:#DBD7CA;"> c_players;  \u5173\u95ED\u6E38\u6807</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">-&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">end</span><span style="color:#DBD7CA;">$$</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> delimiter ;</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">call</span><span style="color:#DBD7CA;"> number_penalties(</span><span style="color:#6394BF;">44</span><span style="color:#DBD7CA;">,@pnumber);</span></span>
<span class="line"><span style="color:#DBD7CA;">mysql</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">select</span><span style="color:#DBD7CA;"> @pnumber;</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">| @pnumber |</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"><span style="color:#DBD7CA;">|        </span><span style="color:#6394BF;">3</span><span style="color:#DBD7CA;"> |</span></span>
<span class="line"><span style="color:#CB7676;">+</span><span style="color:#758575;">----------+</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> delimiter $$</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">create</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">procedure</span><span style="color:#393A34;"> number_penalties(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">in</span><span style="color:#393A34;"> p_playerno </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">out</span><span style="color:#393A34;"> pnumber </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">begin</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> a_playerno </span><span style="color:#1C6B48;">int</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> found bool </span><span style="color:#AB5959;">default</span><span style="color:#393A34;"> true;  \u5FAA\u73AF\u63A7\u5236\u53D8\u91CF</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> c_players </span><span style="color:#1C6B48;">cursor</span><span style="color:#393A34;"> for  \u58F0\u660E\u6E38\u6807</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">select</span><span style="color:#393A34;"> playerno</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">from</span><span style="color:#393A34;"> PENALTIES</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">where</span><span style="color:#393A34;"> playerno </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> p_playerno;  \u5305\u542B\u53D8\u91CFp_playerno</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">declare</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">continue</span><span style="color:#393A34;"> handler for </span><span style="color:#1C6B48;">not</span><span style="color:#393A34;"> found</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> found</span><span style="color:#AB5959;">=</span><span style="color:#393A34;">false;  \u58F0\u660E\u5F02\u5E38\u5904\u7406\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> pnumber</span><span style="color:#AB5959;">=</span><span style="color:#296AA3;">0</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">open</span><span style="color:#393A34;"> c_players;  \u6253\u5F00\u6E38\u6807</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">fetch</span><span style="color:#393A34;"> c_players </span><span style="color:#1C6B48;">into</span><span style="color:#393A34;"> a_playerno;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">while</span><span style="color:#393A34;"> found do    \u5FAA\u73AF\u68C0\u7D22\u6E38\u6807\u6BCF\u4E00\u884C</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">set</span><span style="color:#393A34;"> pnumber</span><span style="color:#AB5959;">=</span><span style="color:#393A34;">pnumber</span><span style="color:#AB5959;">+</span><span style="color:#296AA3;">1</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000\u3000\u3000</span><span style="color:#1C6B48;">fetch</span><span style="color:#393A34;"> c_players </span><span style="color:#1C6B48;">into</span><span style="color:#393A34;"> a_playerno;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">end</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">while</span><span style="color:#393A34;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> \u3000\u3000</span><span style="color:#1C6B48;">close</span><span style="color:#393A34;"> c_players;  \u5173\u95ED\u6E38\u6807</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">-&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">end</span><span style="color:#393A34;">$$</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> delimiter ;</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">call</span><span style="color:#393A34;"> number_penalties(</span><span style="color:#296AA3;">44</span><span style="color:#393A34;">,@pnumber);</span></span>
<span class="line"><span style="color:#393A34;">mysql</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">select</span><span style="color:#393A34;"> @pnumber;</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">| @pnumber |</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"><span style="color:#393A34;">|        </span><span style="color:#296AA3;">3</span><span style="color:#393A34;"> |</span></span>
<span class="line"><span style="color:#AB5959;">+</span><span style="color:#A0ADA0;">----------+</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u793A\u4F8B\u5747\u6765\u6E90\u4E8E\u7F51\u7EDC\u3002</p></blockquote>`,18),e=[o];function c(t,r,y,A,D,B){return n(),a("div",null,e)}var d=s(p,[["render",c]]);export{i as __pageData,d as default};
