import{_ as s,o as a,c as n,a as l}from"./app.1e6146c3.js";const b=JSON.parse('{"title":"SAMBA \u57FA\u7840\u53CA\u5B9E\u6218","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4F7F\u7528yum\u5B89\u88C5SMABA","slug":"\u4F7F\u7528yum\u5B89\u88C5smaba"},{"level":2,"title":"SAMBA\u7684\u7B80\u5355\u4F7F\u7528(\u5355\u7528\u6237)","slug":"samba\u7684\u7B80\u5355\u4F7F\u7528-\u5355\u7528\u6237"},{"level":2,"title":"SAMBA\u5171\u4EAB\u76EE\u5F55","slug":"samba\u5171\u4EAB\u76EE\u5F55"},{"level":2,"title":"smb.conf \u914D\u7F6E\u8BE6\u89E3","slug":"smb-conf-\u914D\u7F6E\u8BE6\u89E3"},{"level":2,"title":"Windows/Linux\u5BA2\u6237\u7AEF\u6302\u8F7DSAMBA","slug":"windows-linux\u5BA2\u6237\u7AEF\u6302\u8F7Dsamba"},{"level":2,"title":"pdbedit(\u589E\u5220\u7528\u6237 --> passdb.tdb \u5E93\u4E2D)","slug":"pdbedit-\u589E\u5220\u7528\u6237-passdb-tdb-\u5E93\u4E2D"},{"level":2,"title":"smbpasswd(\u589E\u5220\u7528\u6237 --> \u5355\u72EC\u6587\u4EF6\u4E2D)","slug":"smbpasswd-\u589E\u5220\u7528\u6237-\u5355\u72EC\u6587\u4EF6\u4E2D"},{"level":2,"title":"smbclient(\u5BA2\u6237\u7AEF\u5DE5\u5177)","slug":"smbclient-\u5BA2\u6237\u7AEF\u5DE5\u5177"},{"level":2,"title":"SWAT\u7684\u5B89\u88C5","slug":"swat\u7684\u5B89\u88C5"},{"level":2,"title":"\u914D\u7F6E\u4E0E\u542F\u52A8","slug":"\u914D\u7F6E\u4E0E\u542F\u52A8"}],"relativePath":"LinuxBasics/FileSystem/SAMBA \u57FA\u7840\u53CA\u5B9E\u6218.md","lastUpdated":1657272051000}'),p={name:"LinuxBasics/FileSystem/SAMBA \u57FA\u7840\u53CA\u5B9E\u6218.md"},e=l(`<blockquote><p>Samba\u662F\u5728Linux\u548CUNIX\u7CFB\u7EDF\u4E0A\u5B9E\u73B0SMB\u534F\u8BAE\u7684\u4E00\u4E2A\u514D\u8D39\u8F6F\u4EF6\uFF0C\u4E3B\u8981\u7528\u4E8E\u5B9E\u73B0Windows\u548CLinux\u4E4B\u95F4\u4E92\u76F8\u5171\u4EAB\u8D44\u6E90.</p></blockquote><h1 id="samba-\u57FA\u7840\u53CA\u5B9E\u6218" tabindex="-1">SAMBA \u57FA\u7840\u53CA\u5B9E\u6218 <a class="header-anchor" href="#samba-\u57FA\u7840\u53CA\u5B9E\u6218" aria-hidden="true">#</a></h1><p><code>SMB\uFF08Server Message Block\uFF09\u901A\u4FE1\u534F\u8BAE</code>\uFF1A\u662F\u5FAE\u8F6F\uFF08Microsoft\uFF09\u548C\u82F1\u7279\u5C14(Intel)\u57281987\u5E74\u5236\u5B9A\u7684\u534F\u8BAE\uFF0C\u4E3B\u8981\u662F\u4F5C\u4E3AMicrosoft\u7F51\u7EDC\u7684\u901A\u8BAF\u534F\u8BAE\uFF0CSMB\u534F\u8BAE\u5728\u5C40\u57DF\u7F51\u4E0A\u7528\u4E8E\u670D\u52A1\u5668\u6587\u4EF6\u8BBF\u95EE\u548C\u6253\u5370\u7684\u534F\u8BAE\u3002SMB \u662F\u5728\u4F1A\u8BDD\u5C42\uFF08session layer\uFF09\u548C\u8868\u793A\u5C42\uFF08presentation layer\uFF09\u4EE5\u53CA\u5C0F\u90E8\u5206\u5E94\u7528\u5C42\uFF08application layer\uFF09\u7684\u534F\u8BAE\u3002</p><p><code>CIFS (Common Internet File System)</code>\uFF1A\u901A\u7528Internet\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5728windows\u4E3B\u673A\u4E4B\u95F4\u8FDB\u884C\u7F51\u7EDC\u6587\u4EF6\u5171\u4EAB\u662F\u901A\u8FC7\u4F7F\u7528\u5FAE\u8F6F\u516C\u53F8\u81EA\u5DF1\u7684CIFS\u670D\u52A1\u5B9E\u73B0\u7684\uFF0C\u4F8B\u5982\uFF1AWindows\u7684\u7F51\u4E0A\u90BB\u5C45\u529F\u80FD</p><p>SMB\u534F\u8BAE\u7684\u5B9E\u73B0\u5728Windows\u4E0A\u662F<code>CIFS</code>\uFF0C\u5728Linux\u7CFB\u7EDF\u4E0A\u662F<code>SMABA</code></p><blockquote><p>Samba\u670D\u52A1\u91C7\u7528C/S\u6A21\u5F0F,\uFF0C\u5176\u5DE5\u4F5C\u673A\u5236\u662F\u8BA9<code>NetBIOS</code>\uFF08Windows \u7F51\u4E0A\u90BB\u5C45\u7684\u901A\u4FE1\u534F\u8BAE\uFF09\u548C<code>SMB</code>\u4E24\u4E2A\u534F\u8BAE\u8FD0\u884C\u4E8ETCP/IP\u901A\u4FE1\u534F\u8BAE\u4E4B\u4E0A\uFF0C\u5E76\u4E14\u7528NetBIOS\u534F\u8BAE\u8BA9Windows\u5728\u201C\u7F51\u4E0A\u90BB\u5C45\u201D\u4E2D\u80FD\u6D4F\u89C8Linux\u670D\u52A1\u5668\u3002Samba\u670D\u52A1\u5668\u65E2\u53EF\u4EE5\u5145\u5F53\u6587\u4EF6\u5171\u4EAB\u670D\u52A1\u5668\uFF0C\u4E5F\u53EF\u4EE5\u5145\u5F53\u4E00\u4E2ASamba\u7684\u5BA2\u6237\u7AEF\uFF0C\u4F8B\u5982\uFF0C\u4E00\u53F0\u5728Linux \u4E0B\u5DF2\u7ECF\u67B6\u8BBE\u597D\u7684Samba\u670D\u52A1\u5668\uFF0Cwindows\u5BA2\u6237\u7AEF\u5C31\u53EF\u4EE5\u901A\u8FC7SMB\u534F\u8BAE\u5171\u4EABSamba\u670D\u52A1\u5668\u4E0A\u7684\u8D44\u6E90\u6587\u4EF6\uFF0C\u540C\u65F6\uFF0CSamba\u670D\u52A1\u5668\u4E5F\u53EF\u4EE5\u8BBF\u95EE\u7F51\u7EDC\u4E2D \u5176\u5B83windows\u7CFB\u7EDF\u6216\u8005Linux\u7CFB\u7EDF\u5171\u4EAB\u51FA\u6765\u7684\u6587\u4EF6</p><p>FROM:<a href="https://blog.51cto.com/itwish/2174270" target="_blank" rel="noopener noreferrer">https://blog.51cto.com/itwish/2174270</a></p></blockquote><h1 id="\u6240\u9700\u8F6F\u4EF6\u53CA\u5B88\u62A4\u8FDB\u7A0B\u8BF4\u660E" tabindex="-1">\u6240\u9700\u8F6F\u4EF6\u53CA\u5B88\u62A4\u8FDB\u7A0B\u8BF4\u660E <a class="header-anchor" href="#\u6240\u9700\u8F6F\u4EF6\u53CA\u5B88\u62A4\u8FDB\u7A0B\u8BF4\u660E" aria-hidden="true">#</a></h1><p>Samba\u6240\u9700\u8F6F\u4EF6\u5305\u62EC\uFF1A</p><ul><li>Samba\uFF08\u670D\u52A1\u5668\u7AEF\u8F6F\u4EF6\u5305\uFF09</li><li>Samba-client\uFF08\u5BA2\u6237\u7AEF\u8F6F\u4EF6\u5305\uFF09</li><li>Samba-common\uFF08Samba\u516C\u5171\u6587\u4EF6\u8F6F\u4EF6\u5305\uFF09</li><li>Samba-Winbind\uFF08\u4F7F\u7528 Windows \u57DF\u63A7\u5236\u5668\u7BA1\u7406 Linux \u5E10\u6237\uFF09</li></ul><p>Samba\u7531<code>smbd </code>\u548C <code>nmbd</code>\u4E24\u4E2A\u5B88\u62A4\u8FDB\u7A0B\u7EC4\u6210\uFF1A</p><ul><li><p><code>smbd</code>\u670D\u52A1\u8FDB\u7A0B\u662FSamba\u7684\u6838\u5FC3\u542F\u52A8\u670D\u52A1\uFF0C\u7528\u4E8E\u63D0\u4F9B<code>smb/cifs</code>\u670D\u52A1\uFF0C\u4E3B\u8981\u8D1F\u8D23\u5EFA\u7ACB Linux Samba\u670D\u52A1\u5668\u4E0ESamba\u5BA2\u6237\u673A\u4E4B\u95F4\u7684\u5BF9\u8BDD\uFF0C\u4E3A\u5BA2\u6237\u7AEF\u63D0\u4F9B\u6587\u4EF6\u5171\u4EAB\u4E0E\u6253\u5370\u673A\u670D\u52A1\u53CA\u8D1F\u8D23\u7528\u6237\u6743\u9650\u9A8C\u8BC1\u4EE5\u53CA\u9501\u529F\u80FD\uFF0Csmdb\u9ED8\u8BA4\u76D1\u542C\u7AEF\u53E3\u662F <strong>139 \u4E0E 445 TCP</strong>\u7AEF\u53E3</p></li><li><p><code>nmbd</code>\u8FDB\u7A0B\u63D0\u4F9B<code>NetBIOS</code>\u540D\u79F0\u670D\u52A1\uFF0C\u7528\u4E8E\u5B9E\u73B0Windows\u8BBF\u95EELinux\u6587\u4EF6\uFF0C\u4EE5\u6EE1\u8DB3\u57FA\u4E8ECommon Internet File System(<code>CIFS</code>)\u534F\u8BAE\u7684\u5171\u4EAB\u8BBF\u95EE\u73AF\u5883\uFF08\u7C7B\u4F3C\u4E0EDNS\u5B9E\u73B0\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u628ALinux\u7CFB\u7EDF\u5171\u4EAB\u7684\u5DE5\u4F5C\u7EC4\u540D\u79F0\u4E0E\u5176IP\u5BF9\u5E94\u8D77\u6765\uFF09\uFF0CSamba\u901A\u8FC7nmb \u670D\u52A1\u542F\u52A8 nmbd\u8FDB\u7A0B\uFF0C\u8BE5\u8FDB\u7A0B<strong>\u9ED8\u8BA4\u76D1\u542C\u7684\u662F137\u4E0E 138 UDP</strong>\u7AEF\u53E3</p></li></ul><h1 id="samba\u5B89\u88C5\u4E0E\u4F7F\u7528" tabindex="-1">SAMBA\u5B89\u88C5\u4E0E\u4F7F\u7528 <a class="header-anchor" href="#samba\u5B89\u88C5\u4E0E\u4F7F\u7528" aria-hidden="true">#</a></h1><h2 id="\u4F7F\u7528yum\u5B89\u88C5smaba" tabindex="-1">\u4F7F\u7528yum\u5B89\u88C5SMABA <a class="header-anchor" href="#\u4F7F\u7528yum\u5B89\u88C5smaba" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u670D\u52A1\u5668\u7AEF\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#DBD7CA;">yum install -y smaba</span></span>
<span class="line"><span style="color:#758575;"># \u5BA2\u6237\u7AEF\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#DBD7CA;">yum install -y smaba-client</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u670D\u52A1\u5668\u7AEF\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#393A34;">yum install -y smaba</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5BA2\u6237\u7AEF\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#393A34;">yum install -y smaba-client</span></span>
<span class="line"></span></code></pre></div><h2 id="samba\u7684\u7B80\u5355\u4F7F\u7528-\u5355\u7528\u6237" tabindex="-1">SAMBA\u7684\u7B80\u5355\u4F7F\u7528(\u5355\u7528\u6237) <a class="header-anchor" href="#samba\u7684\u7B80\u5355\u4F7F\u7528-\u5355\u7528\u6237" aria-hidden="true">#</a></h2><p>\u26A0\uFE0F\u7528\u6237\u521B\u5EFA\u7684\u5171\u4EAB\u76EE\u5F55\u914D\u7F6E\u6587\u4EF6\u4E3A<code>/var/lib/samba/usershares </code></p><ol><li>\u4FEE\u6539<code>smb.conf</code>\u53C2\u6570\uFF08\u4E0D\u4FEE\u6539\u9ED8\u8BA4\u4E5F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884Csamba\uFF09\uFF1A</li></ol><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;">#======================= Global Settings =====================================</span></span>
<span class="line"><span style="color:#758575;"># ----------------------- Network-Related Options -------------------------</span></span>
<span class="line"><span style="color:#758575;"># interfaces\u9009\u9879\uFF0C\u503C\u53EF\u4EE5\u4F7F\u7528\u7F51\u5361\u540D\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7F51\u5361\u5730\u5740\uFF0C\u9ED8\u8BA4\u4E3A\u6240\u6709\u5730\u5740\uFF0C\u6BD4\u5982\uFF1A</span></span>
<span class="line"><span style="color:#DBD7CA;">interfaces = lo ens33 172.16.122.			</span><span style="color:#758575;"># \u7B80\u5355\u5199\u6CD5172.16.122.	\u8868\u793A172.16.122.0/24\u7F51\u6BB5\u7684\u5730\u5740</span></span>
<span class="line"><span style="color:#758575;"># --------------------------- Logging Options -----------------------------</span></span>
<span class="line"><span style="color:#758575;"># \u65E5\u5FD7\u6EDA\u52A8\u5206\u5272</span></span>
<span class="line"><span style="color:#758575;"># log file = specify where log files are written to and how they are split</span></span>
<span class="line"><span style="color:#758575;"># log files split per-machine:</span></span>
<span class="line"><span style="color:#DBD7CA;">        log file = /var/log/samba/log.%m		</span><span style="color:#758575;"># \u6587\u4EF6\u540D\u79F0</span></span>
<span class="line"><span style="color:#858585;">        </span><span style="color:#758575;"># maximum size of 50KB per log file, then rotate:</span></span>
<span class="line"><span style="color:#DBD7CA;">        max log size = 50				</span><span style="color:#758575;"># \u5355\u4E2A\u65E5\u5FD7\u6587\u4EF6\u6700\u5927\u5927\u5C0F</span></span>
<span class="line"><span style="color:#758575;"># ----------------------- Standalone Server Options ------------------------</span></span>
<span class="line"><span style="color:#DBD7CA;">        security = user			</span><span style="color:#758575;"># \u7CFB\u7EDF\u7528\u6237\u5B89\u5168\u6A21\u5F0F\uFF0C\u4F7F\u7528\u7684\u662F\u7CFB\u7EDF\u7684\u7528\u6237</span></span>
<span class="line"><span style="color:#DBD7CA;">        passdb backend = tdbsam			</span><span style="color:#758575;"># \u5BC6\u7801\u4E0D\u662F\u7CFB\u7EDF\u7528\u6237\u7684\u5BC6\u7801</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">#======================= Global Settings =====================================</span></span>
<span class="line"><span style="color:#A0ADA0;"># ----------------------- Network-Related Options -------------------------</span></span>
<span class="line"><span style="color:#A0ADA0;"># interfaces\u9009\u9879\uFF0C\u503C\u53EF\u4EE5\u4F7F\u7528\u7F51\u5361\u540D\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7F51\u5361\u5730\u5740\uFF0C\u9ED8\u8BA4\u4E3A\u6240\u6709\u5730\u5740\uFF0C\u6BD4\u5982\uFF1A</span></span>
<span class="line"><span style="color:#393A34;">interfaces = lo ens33 172.16.122.			</span><span style="color:#A0ADA0;"># \u7B80\u5355\u5199\u6CD5172.16.122.	\u8868\u793A172.16.122.0/24\u7F51\u6BB5\u7684\u5730\u5740</span></span>
<span class="line"><span style="color:#A0ADA0;"># --------------------------- Logging Options -----------------------------</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u65E5\u5FD7\u6EDA\u52A8\u5206\u5272</span></span>
<span class="line"><span style="color:#A0ADA0;"># log file = specify where log files are written to and how they are split</span></span>
<span class="line"><span style="color:#A0ADA0;"># log files split per-machine:</span></span>
<span class="line"><span style="color:#393A34;">        log file = /var/log/samba/log.%m		</span><span style="color:#A0ADA0;"># \u6587\u4EF6\u540D\u79F0</span></span>
<span class="line"><span style="color:#8E8F8B;">        </span><span style="color:#A0ADA0;"># maximum size of 50KB per log file, then rotate:</span></span>
<span class="line"><span style="color:#393A34;">        max log size = 50				</span><span style="color:#A0ADA0;"># \u5355\u4E2A\u65E5\u5FD7\u6587\u4EF6\u6700\u5927\u5927\u5C0F</span></span>
<span class="line"><span style="color:#A0ADA0;"># ----------------------- Standalone Server Options ------------------------</span></span>
<span class="line"><span style="color:#393A34;">        security = user			</span><span style="color:#A0ADA0;"># \u7CFB\u7EDF\u7528\u6237\u5B89\u5168\u6A21\u5F0F\uFF0C\u4F7F\u7528\u7684\u662F\u7CFB\u7EDF\u7684\u7528\u6237</span></span>
<span class="line"><span style="color:#393A34;">        passdb backend = tdbsam			</span><span style="color:#A0ADA0;"># \u5BC6\u7801\u4E0D\u662F\u7CFB\u7EDF\u7528\u6237\u7684\u5BC6\u7801</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>\u68C0\u67E5\u914D\u7F6E\u6587\u4EF6\u8BED\u6CD5\u9519\u8BEF\uFF0C\u4F7F\u7528\u547D\u4EE4<code>testparm</code>\u5373\u53EF</li><li>\u8BED\u6CD5\u68C0\u67E5\u65E0\u9519\u8BEF\u7684\u8BDD\uFF0C\u53EF\u4EE5\u76F4\u63A5\u542F\u52A8samba\u670D\u52A1</li></ol><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">systemctl start nmbd smb</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">systemctl start nmbd smb</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>\u521B\u5EFA\u7528\u6237</li></ol><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">useradd smb			</span><span style="color:#758575;"># \u53EF\u4EE5\u4E0D\u6307\u5B9A\u7528\u6237\u5BC6\u7801</span></span>
<span class="line"><span style="color:#758575;"># \u4F7F\u7528\u4F7F\u7528smbpasswd\u4E3A\u8BE5\u7528\u6237\u6307\u5B9Asamba\u5BC6\u7801</span></span>
<span class="line"><span style="color:#DBD7CA;">smbpasswd -a smb</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> \u6CE8\u610F\uFF1A\u9996\u6B21\u521B\u5EFA\u7528\u6237\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528</span><span style="color:#C98A7D;">\`-a\`</span><span style="color:#DBD7CA;">\u9009\u9879</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">useradd smb			</span><span style="color:#A0ADA0;"># \u53EF\u4EE5\u4E0D\u6307\u5B9A\u7528\u6237\u5BC6\u7801</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u4F7F\u7528\u4F7F\u7528smbpasswd\u4E3A\u8BE5\u7528\u6237\u6307\u5B9Asamba\u5BC6\u7801</span></span>
<span class="line"><span style="color:#393A34;">smbpasswd -a smb</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> \u6CE8\u610F\uFF1A\u9996\u6B21\u521B\u5EFA\u7528\u6237\u7684\u65F6\u5019\u9700\u8981\u4F7F\u7528</span><span style="color:#B56959;">\`-a\`</span><span style="color:#393A34;">\u9009\u9879</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>\u5BA2\u6237\u7AEF\u6302\u8F7Dsamba</li></ol><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u5217\u51FA\u670D\u52A1\u5668\u7AEF\u7684samba\u5171\u4EAB\u76EE\u5F55</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient -L 172.16.122.132 -U smb</span></span>
<span class="line"><span style="color:#758575;"># \u4EA4\u4E92\u5F0F\u547D\u4EE4\u884C\u8FDE\u63A5\u4F7F\u7528samba</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient //172.16.122.132/smb -U smb</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u5217\u51FA\u670D\u52A1\u5668\u7AEF\u7684samba\u5171\u4EAB\u76EE\u5F55</span></span>
<span class="line"><span style="color:#393A34;">smbclient -L 172.16.122.132 -U smb</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u4EA4\u4E92\u5F0F\u547D\u4EE4\u884C\u8FDE\u63A5\u4F7F\u7528samba</span></span>
<span class="line"><span style="color:#393A34;">smbclient //172.16.122.132/smb -U smb</span></span>
<span class="line"></span></code></pre></div><h2 id="samba\u5171\u4EAB\u76EE\u5F55" tabindex="-1">SAMBA\u5171\u4EAB\u76EE\u5F55 <a class="header-anchor" href="#samba\u5171\u4EAB\u76EE\u5F55" aria-hidden="true">#</a></h2><ol><li>\u7F16\u8F91<code>smb.conf</code>\u914D\u7F6E\u6587\u4EF6\uFF0C\u6DFB\u52A0\u81EA\u5B9A\u4E49\u5171\u4EAB\u76EE\u5F55</li></ol><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9</span></span>
<span class="line"><span style="color:#758575;">####</span></span>
<span class="line"><span style="color:#858585;">[</span><span style="color:#DBD7CA;">sharing</span><span style="color:#858585;">]</span></span>
<span class="line"><span style="color:#DBD7CA;">	comment = sharing samba files</span></span>
<span class="line"><span style="color:#DBD7CA;">	path = /data/samba</span></span>
<span class="line"><span style="color:#DBD7CA;">	public = yes</span></span>
<span class="line"><span style="color:#DBD7CA;">	writable = yes</span></span>
<span class="line"><span style="color:#DBD7CA;">	browseable =yes</span></span>
<span class="line"><span style="color:#758575;">####</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9</span></span>
<span class="line"><span style="color:#A0ADA0;">####</span></span>
<span class="line"><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">sharing</span><span style="color:#8E8F8B;">]</span></span>
<span class="line"><span style="color:#393A34;">	comment = sharing samba files</span></span>
<span class="line"><span style="color:#393A34;">	path = /data/samba</span></span>
<span class="line"><span style="color:#393A34;">	public = yes</span></span>
<span class="line"><span style="color:#393A34;">	writable = yes</span></span>
<span class="line"><span style="color:#393A34;">	browseable =yes</span></span>
<span class="line"><span style="color:#A0ADA0;">####</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>\u68C0\u67E5\u8BED\u6CD5\u9519\u8BEF<code>testparm</code></li><li>\u91CD\u542F<code>nmb</code>\u548C<code>smb</code>\u670D\u52A1</li><li>\u5BA2\u6237\u7AEF\u67E5\u770B\u5E76\u4F7F\u7528</li></ol><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u67E5\u770B</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient -L 172.16.122.132 -U smb</span></span>
<span class="line"><span style="color:#758575;">#### \u7ED3\u679C</span></span>
<span class="line"><span style="color:#DBD7CA;">Sharename       Type      Comment</span></span>
<span class="line"><span style="color:#DBD7CA;">        ---------       ----      -------</span></span>
<span class="line"><span style="color:#DBD7CA;">       </span><span style="color:#C98A7D;">\` sharing         Disk      sharing samba files\`</span></span>
<span class="line"><span style="color:#DBD7CA;">        IPC$            IPC       IPC Service </span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">Samba Server Version 4.9.1</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#DBD7CA;">        smb             Disk      Home Directories</span></span>
<span class="line"><span style="color:#758575;">####</span></span>
<span class="line"><span style="color:#758575;"># cli\u4F7F\u7528</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient //172.16.122.132/sharing -U smb%123</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u67E5\u770B</span></span>
<span class="line"><span style="color:#393A34;">smbclient -L 172.16.122.132 -U smb</span></span>
<span class="line"><span style="color:#A0ADA0;">#### \u7ED3\u679C</span></span>
<span class="line"><span style="color:#393A34;">Sharename       Type      Comment</span></span>
<span class="line"><span style="color:#393A34;">        ---------       ----      -------</span></span>
<span class="line"><span style="color:#393A34;">       </span><span style="color:#B56959;">\` sharing         Disk      sharing samba files\`</span></span>
<span class="line"><span style="color:#393A34;">        IPC$            IPC       IPC Service </span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">Samba Server Version 4.9.1</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#393A34;">        smb             Disk      Home Directories</span></span>
<span class="line"><span style="color:#A0ADA0;">####</span></span>
<span class="line"><span style="color:#A0ADA0;"># cli\u4F7F\u7528</span></span>
<span class="line"><span style="color:#393A34;">smbclient //172.16.122.132/sharing -U smb%123</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>\u53EF\u4EE5\u4F7F\u7528facl\u6765\u9488\u5BF9\u67D0\u4E9B\u7528\u6237\u8FDB\u884C\u6743\u9650\u63A7\u5236</li></ol><h2 id="smb-conf-\u914D\u7F6E\u8BE6\u89E3" tabindex="-1">smb.conf \u914D\u7F6E\u8BE6\u89E3 <a class="header-anchor" href="#smb-conf-\u914D\u7F6E\u8BE6\u89E3" aria-hidden="true">#</a></h2><p><a href="./smb.conf\u8BE6\u89E3.html">smb.conf\u6587\u4EF6\u8BE6\u89E3</a></p><h2 id="windows-linux\u5BA2\u6237\u7AEF\u6302\u8F7Dsamba" tabindex="-1">Windows/Linux\u5BA2\u6237\u7AEF\u6302\u8F7DSAMBA <a class="header-anchor" href="#windows-linux\u5BA2\u6237\u7AEF\u6302\u8F7Dsamba" aria-hidden="true">#</a></h2><p>\u5BF9\u4E8EWindows\u5BA2\u6237\u7AEF\u67E5\u770BLinux\u670D\u52A1\u5668\u7AEF\u5171\u4EAB\u6587\u4EF6\u800C\u8A00\uFF1A\u53EF\u4EE5\u901A\u8FC7<strong>\u7F51\u9875\u6D4F\u89C8\u5668</strong>\u3001<strong>\u6211\u7684\u7535\u8111</strong>\u6216\u8005<strong>\u7F51\u4E0A\u90BB\u5C45</strong>\u76F4\u63A5\u4F7F\u7528\uFF0C\u5177\u4F53\u65B9\u6CD5\u662F\u5728\u5730\u5740\u680F\u8F93\u5165</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u4F7F\u7528IP\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#D4976C;">\\\\</span><span style="color:#DBD7CA;">172.16.122.133</span><span style="color:#D4976C;">\\&lt;</span><span style="color:#DBD7CA;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575;"># \u4F7F\u7528\u57DF\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#D4976C;">\\\\</span><span style="color:#DBD7CA;">ZONE</span><span style="color:#D4976C;">\\&lt;</span><span style="color:#DBD7CA;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u4F7F\u7528IP\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#A65E2B;">\\\\</span><span style="color:#393A34;">172.16.122.133</span><span style="color:#A65E2B;">\\&lt;</span><span style="color:#393A34;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u4F7F\u7528\u57DF\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#A65E2B;">\\\\</span><span style="color:#393A34;">ZONE</span><span style="color:#A65E2B;">\\&lt;</span><span style="color:#393A34;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u5BF9\u4E8ELinux\u7528\u6237\u800C\u8A00\uFF1A\u6709\u4EE5\u4E0B\u4E09\u79CD\u65B9\u6CD5</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u65B9\u6CD5\u4E00\uFF1A\u4F7F\u7528smbclient\u5BA2\u6237\u7AEF\u5DE5\u5177</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient //172.16.122.133/</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> -U </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">USER_NAME</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575;"># \u65B9\u6CD5\u4E8C\uFF1A\u4F7F\u7528mount\u624B\u52A8\u6302\u8F7D</span></span>
<span class="line"><span style="color:#DBD7CA;">mount -t cifs  //172.16.122.133/</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> /mnt/samba -o username=</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">USER_NAME</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#758575;"># \u65B9\u6CD5\u4E09\uFF1A\u4F7F\u7528\`/etc/fstab\`\u5F00\u673A\u81EA\u52A8\u6302\u8F7D\uFF0C\u6DFB\u5165\u4EE5\u4E0B\u5185\u5BB9</span></span>
<span class="line"><span style="color:#758575;">####</span></span>
<span class="line"><span style="color:#DBD7CA;">//172.16.122.133/</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">	/mnt/samba	cifs	defaults,_netdev,user=suofeiya,password=suofeiya 0 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># \u6216\u8005</span></span>
<span class="line"><span style="color:#DBD7CA;">//172.16.122.133/</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;">	/mnt/samba	cifs	defaults,_netdev,credentials=/etc/samba/pwd.txt 0 0</span></span>
<span class="line"><span style="color:#758575;"># \`/etc/smaba/pwd.txt\`\u5185\u5BB9</span></span>
<span class="line"><span style="color:#DBD7CA;">username=suofeiya</span></span>
<span class="line"><span style="color:#DBD7CA;">password=suofeiya</span></span>
<span class="line"><span style="color:#758575;">####</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u65B9\u6CD5\u4E00\uFF1A\u4F7F\u7528smbclient\u5BA2\u6237\u7AEF\u5DE5\u5177</span></span>
<span class="line"><span style="color:#393A34;">smbclient //172.16.122.133/</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> -U </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">USER_NAME</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u65B9\u6CD5\u4E8C\uFF1A\u4F7F\u7528mount\u624B\u52A8\u6302\u8F7D</span></span>
<span class="line"><span style="color:#393A34;">mount -t cifs  //172.16.122.133/</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> /mnt/samba -o username=</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">USER_NAME</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u65B9\u6CD5\u4E09\uFF1A\u4F7F\u7528\`/etc/fstab\`\u5F00\u673A\u81EA\u52A8\u6302\u8F7D\uFF0C\u6DFB\u5165\u4EE5\u4E0B\u5185\u5BB9</span></span>
<span class="line"><span style="color:#A0ADA0;">####</span></span>
<span class="line"><span style="color:#393A34;">//172.16.122.133/</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">	/mnt/samba	cifs	defaults,_netdev,user=suofeiya,password=suofeiya 0 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># \u6216\u8005</span></span>
<span class="line"><span style="color:#393A34;">//172.16.122.133/</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">\u5171\u4EAB\u76EE\u5F55\u540D\u79F0</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;">	/mnt/samba	cifs	defaults,_netdev,credentials=/etc/samba/pwd.txt 0 0</span></span>
<span class="line"><span style="color:#A0ADA0;"># \`/etc/smaba/pwd.txt\`\u5185\u5BB9</span></span>
<span class="line"><span style="color:#393A34;">username=suofeiya</span></span>
<span class="line"><span style="color:#393A34;">password=suofeiya</span></span>
<span class="line"><span style="color:#A0ADA0;">####</span></span>
<span class="line"></span></code></pre></div><h1 id="pdbedit\u3001smbpasswd\u3001smbclient\u7684\u4F7F\u7528" tabindex="-1">pdbedit\u3001smbpasswd\u3001smbclient\u7684\u4F7F\u7528 <a class="header-anchor" href="#pdbedit\u3001smbpasswd\u3001smbclient\u7684\u4F7F\u7528" aria-hidden="true">#</a></h1><h2 id="pdbedit-\u589E\u5220\u7528\u6237-passdb-tdb-\u5E93\u4E2D" tabindex="-1">pdbedit(\u589E\u5220\u7528\u6237 --&gt; passdb.tdb \u5E93\u4E2D) <a class="header-anchor" href="#pdbedit-\u589E\u5220\u7528\u6237-passdb-tdb-\u5E93\u4E2D" aria-hidden="true">#</a></h2><p>\u53C2\u6570\u5217\u8868\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">\u2013a username		</span><span style="color:#758575;"># \u65B0\u5EFASamba\u8D26\u6237</span></span>
<span class="line"><span style="color:#DBD7CA;">\u2013x username		</span><span style="color:#758575;"># \u5220\u9664Samba\u8D26\u6237</span></span>
<span class="line"><span style="color:#DBD7CA;">\u2013L				</span><span style="color:#758575;"># \u5217\u51FASamba\u7528\u6237\u5217\u8868\uFF0C\u8BFB\u53D6passdb.tdb\u6570\u636E\u5E93\u6587\u4EF6</span></span>
<span class="line"><span style="color:#DBD7CA;">\u2013Lv				</span><span style="color:#758575;"># \u5217\u51FASamba\u7528\u6237\u5217\u8868\u7684\u8BE6\u7EC6\u4FE1\u606F</span></span>
<span class="line"><span style="color:#DBD7CA;">\u2013c </span><span style="color:#C98A7D;">&quot;[D]&quot;</span><span style="color:#DBD7CA;"> \u2013u username		</span><span style="color:#758575;"># \u6682\u505C\u8BE5Samba\u7528\u6237\u8D26\u53F7\u7684\u4F7F\u7528</span></span>
<span class="line"><span style="color:#DBD7CA;">\u2013c </span><span style="color:#C98A7D;">&quot;[]&quot;</span><span style="color:#DBD7CA;"> \u2013u username		</span><span style="color:#758575;"># \u6062\u590D\u8BE5Samba\u7528\u6237\u8D26\u53F7\u7684\u4F7F\u7528</span></span>
<span class="line"><span style="color:#DBD7CA;">-t 			</span><span style="color:#758575;"># \u4ECE\u6807\u51C6\u8F93\u51FA\u4E2D\u63A5\u53D7\u7528\u6237\u4FE1\u606F\uFF0C\u4E0D\u663E\u793A\u63D0\u793A\u7B26</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">\u2013a username		</span><span style="color:#A0ADA0;"># \u65B0\u5EFASamba\u8D26\u6237</span></span>
<span class="line"><span style="color:#393A34;">\u2013x username		</span><span style="color:#A0ADA0;"># \u5220\u9664Samba\u8D26\u6237</span></span>
<span class="line"><span style="color:#393A34;">\u2013L				</span><span style="color:#A0ADA0;"># \u5217\u51FASamba\u7528\u6237\u5217\u8868\uFF0C\u8BFB\u53D6passdb.tdb\u6570\u636E\u5E93\u6587\u4EF6</span></span>
<span class="line"><span style="color:#393A34;">\u2013Lv				</span><span style="color:#A0ADA0;"># \u5217\u51FASamba\u7528\u6237\u5217\u8868\u7684\u8BE6\u7EC6\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393A34;">\u2013c </span><span style="color:#B56959;">&quot;[D]&quot;</span><span style="color:#393A34;"> \u2013u username		</span><span style="color:#A0ADA0;"># \u6682\u505C\u8BE5Samba\u7528\u6237\u8D26\u53F7\u7684\u4F7F\u7528</span></span>
<span class="line"><span style="color:#393A34;">\u2013c </span><span style="color:#B56959;">&quot;[]&quot;</span><span style="color:#393A34;"> \u2013u username		</span><span style="color:#A0ADA0;"># \u6062\u590D\u8BE5Samba\u7528\u6237\u8D26\u53F7\u7684\u4F7F\u7528</span></span>
<span class="line"><span style="color:#393A34;">-t 			</span><span style="color:#A0ADA0;"># \u4ECE\u6807\u51C6\u8F93\u51FA\u4E2D\u63A5\u53D7\u7528\u6237\u4FE1\u606F\uFF0C\u4E0D\u663E\u793A\u63D0\u793A\u7B26</span></span>
<span class="line"></span></code></pre></div><h2 id="smbpasswd-\u589E\u5220\u7528\u6237-\u5355\u72EC\u6587\u4EF6\u4E2D" tabindex="-1">smbpasswd(\u589E\u5220\u7528\u6237 --&gt; \u5355\u72EC\u6587\u4EF6\u4E2D) <a class="header-anchor" href="#smbpasswd-\u589E\u5220\u7528\u6237-\u5355\u72EC\u6587\u4EF6\u4E2D" aria-hidden="true">#</a></h2><p>\u53C2\u6570\u5217\u8868\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">-a username			</span><span style="color:#758575;"># \u5411smbpasswd\u6587\u4EF6\u4E2D\u6DFB\u52A0\u7528\u6237\uFF0C\u9996\u6B21\u6DFB\u52A0\u7528\u6237\u65F6\u9700\u8981\u52A0\u5165\u8BE5\u53C2\u6570</span></span>
<span class="line"><span style="color:#DBD7CA;">-c /PATH/TO/CONF_FILE			</span><span style="color:#758575;"># \u6307\u5B9Asamba\u7684\u914D\u7F6E\u6587\u4EF6</span></span>
<span class="line"><span style="color:#DBD7CA;">-x 			</span><span style="color:#758575;"># \u4ECEsmbpasswd\u6587\u4EF6\u4E2D\u5220\u9664\u7528\u6237</span></span>
<span class="line"><span style="color:#DBD7CA;">-d			</span><span style="color:#758575;"># \u5728smbpasswd\u6587\u4EF6\u4E2D\u7981\u7528\u6307\u5B9A\u7684\u7528\u6237</span></span>
<span class="line"><span style="color:#DBD7CA;">-e			</span><span style="color:#758575;"># \u5728smbpasswd\u6587\u4EF6\u4E2D\u6FC0\u6D3B\u6307\u5B9A\u7684\u7528\u6237</span></span>
<span class="line"><span style="color:#DBD7CA;">-n			</span><span style="color:#758575;"># \u5C06\u6307\u5B9A\u7684\u7528\u6237\u7684\u5BC6\u7801\u7F6E\u7A7A</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">-a username			</span><span style="color:#A0ADA0;"># \u5411smbpasswd\u6587\u4EF6\u4E2D\u6DFB\u52A0\u7528\u6237\uFF0C\u9996\u6B21\u6DFB\u52A0\u7528\u6237\u65F6\u9700\u8981\u52A0\u5165\u8BE5\u53C2\u6570</span></span>
<span class="line"><span style="color:#393A34;">-c /PATH/TO/CONF_FILE			</span><span style="color:#A0ADA0;"># \u6307\u5B9Asamba\u7684\u914D\u7F6E\u6587\u4EF6</span></span>
<span class="line"><span style="color:#393A34;">-x 			</span><span style="color:#A0ADA0;"># \u4ECEsmbpasswd\u6587\u4EF6\u4E2D\u5220\u9664\u7528\u6237</span></span>
<span class="line"><span style="color:#393A34;">-d			</span><span style="color:#A0ADA0;"># \u5728smbpasswd\u6587\u4EF6\u4E2D\u7981\u7528\u6307\u5B9A\u7684\u7528\u6237</span></span>
<span class="line"><span style="color:#393A34;">-e			</span><span style="color:#A0ADA0;"># \u5728smbpasswd\u6587\u4EF6\u4E2D\u6FC0\u6D3B\u6307\u5B9A\u7684\u7528\u6237</span></span>
<span class="line"><span style="color:#393A34;">-n			</span><span style="color:#A0ADA0;"># \u5C06\u6307\u5B9A\u7684\u7528\u6237\u7684\u5BC6\u7801\u7F6E\u7A7A</span></span>
<span class="line"></span></code></pre></div><h2 id="smbclient-\u5BA2\u6237\u7AEF\u5DE5\u5177" tabindex="-1">smbclient(\u5BA2\u6237\u7AEF\u5DE5\u5177) <a class="header-anchor" href="#smbclient-\u5BA2\u6237\u7AEF\u5DE5\u5177" aria-hidden="true">#</a></h2><p>\u5E38\u7528\u7EC4\u5408\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">smbclient -L 172.16.122.133 -U username%password    </span><span style="color:#758575;"># \u5217\u51FAsamba\u5171\u4EAB\u670D\u52A1\u5668\u7AEF\u7684\u6587\u4EF6\u5217\u8868</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> \u670D\u52A1\u5668\u7AEF\u53EF\u4EE5\u4F7F\u7528smbstatus\u67E5\u770Bsamba\u5171\u4EAB\u60C5\u51B5</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient  //172.16.122.133/data/smaba  -U username%password    </span><span style="color:#758575;"># \u50CFftp\u4E00\u6837\uFF0C\u4F7F\u7528smbclient \u4E0Esamba\u670D\u52A1\u5668\u8FDB\u884C\u4EA4\u4E92\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#DBD7CA;">smbclient -c </span><span style="color:#C98A7D;">&quot;ls&quot;</span><span style="color:#DBD7CA;">  //172.16.122.133//data/smaba  -U username%password    </span><span style="color:#758575;"># \u4E0D\u8FDB\u5165\u4EA4\u4E92\u754C\u9762\uFF0C\u76F4\u63A5\u663E\u793A\u5171\u4EAB\u76EE\u5F55\u4E0B\u7684\u5217\u8868\u6587\u4EF6</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">smbclient -L 172.16.122.133 -U username%password    </span><span style="color:#A0ADA0;"># \u5217\u51FAsamba\u5171\u4EAB\u670D\u52A1\u5668\u7AEF\u7684\u6587\u4EF6\u5217\u8868</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> \u670D\u52A1\u5668\u7AEF\u53EF\u4EE5\u4F7F\u7528smbstatus\u67E5\u770Bsamba\u5171\u4EAB\u60C5\u51B5</span></span>
<span class="line"><span style="color:#393A34;">smbclient  //172.16.122.133/data/smaba  -U username%password    </span><span style="color:#A0ADA0;"># \u50CFftp\u4E00\u6837\uFF0C\u4F7F\u7528smbclient \u4E0Esamba\u670D\u52A1\u5668\u8FDB\u884C\u4EA4\u4E92\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#393A34;">smbclient -c </span><span style="color:#B56959;">&quot;ls&quot;</span><span style="color:#393A34;">  //172.16.122.133//data/smaba  -U username%password    </span><span style="color:#A0ADA0;"># \u4E0D\u8FDB\u5165\u4EA4\u4E92\u754C\u9762\uFF0C\u76F4\u63A5\u663E\u793A\u5171\u4EAB\u76EE\u5F55\u4E0B\u7684\u5217\u8868\u6587\u4EF6</span></span>
<span class="line"></span></code></pre></div><h1 id="samba-swat-smaba\u7684web\u7BA1\u7406\u5DE5\u5177" tabindex="-1">samba-swat(SMABA\u7684WEB\u7BA1\u7406\u5DE5\u5177) <a class="header-anchor" href="#samba-swat-smaba\u7684web\u7BA1\u7406\u5DE5\u5177" aria-hidden="true">#</a></h1><h2 id="swat\u7684\u5B89\u88C5" tabindex="-1">SWAT\u7684\u5B89\u88C5 <a class="header-anchor" href="#swat\u7684\u5B89\u88C5" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u9996\u5148\u9700\u8981xinetd\uFF0C\u56E0\u4E3Aswat\u5DE5\u5177\u662F\u5D4C\u5957\u5728xinetd\u8D85\u7EA7\u5B88\u62A4\u8FDB\u7A0B\u4E2D\uFF0C\u9700\u8981\u7528xinetd\u6765\u7BA1\u7406</span></span>
<span class="line"><span style="color:#DBD7CA;">yum install -y xinetd</span></span>
<span class="line"><span style="color:#758575;"># \u6253\u5F00samba-swat\u7684\u4E0B\u8F7D\u7F51\u7AD9</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> http://www.rpmfind.net/linux/rpm2html/search.php</span><span style="color:#CB7676;">?</span><span style="color:#DBD7CA;">query=samba-swat</span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">x86-64</span><span style="color:#858585;">)</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> https://centos.pkgs.org/7/centos-x86_64/samba-4.9.1-6.el7.x86_64.rpm.html</span></span>
<span class="line"><span style="color:#758575;"># \u5728\u670D\u52A1\u5668\u7AEF\u8FDB\u884C\u5B89\u88C5</span></span>
<span class="line"><span style="color:#DBD7CA;">yum install -y http://www.rpmfind.net/linux/mageia/distrib/5/x86_64/media/core/updates/samba-swat-3.6.25-2.9.mga5.x86_64.rpm</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u9996\u5148\u9700\u8981xinetd\uFF0C\u56E0\u4E3Aswat\u5DE5\u5177\u662F\u5D4C\u5957\u5728xinetd\u8D85\u7EA7\u5B88\u62A4\u8FDB\u7A0B\u4E2D\uFF0C\u9700\u8981\u7528xinetd\u6765\u7BA1\u7406</span></span>
<span class="line"><span style="color:#393A34;">yum install -y xinetd</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u6253\u5F00samba-swat\u7684\u4E0B\u8F7D\u7F51\u7AD9</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> http://www.rpmfind.net/linux/rpm2html/search.php</span><span style="color:#AB5959;">?</span><span style="color:#393A34;">query=samba-swat</span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">x86-64</span><span style="color:#8E8F8B;">)</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> https://centos.pkgs.org/7/centos-x86_64/samba-4.9.1-6.el7.x86_64.rpm.html</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5728\u670D\u52A1\u5668\u7AEF\u8FDB\u884C\u5B89\u88C5</span></span>
<span class="line"><span style="color:#393A34;">yum install -y http://www.rpmfind.net/linux/mageia/distrib/5/x86_64/media/core/updates/samba-swat-3.6.25-2.9.mga5.x86_64.rpm</span></span>
<span class="line"></span></code></pre></div><h2 id="\u914D\u7F6E\u4E0E\u542F\u52A8" tabindex="-1">\u914D\u7F6E\u4E0E\u542F\u52A8 <a class="header-anchor" href="#\u914D\u7F6E\u4E0E\u542F\u52A8" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u7F16\u8F91/etc/xinetd.d/swat\u6587\u4EF6</span></span>
<span class="line"><span style="color:#758575;">#### </span></span>
<span class="line"><span style="color:#758575;"># default: off</span></span>
<span class="line"><span style="color:#758575;"># description: SWAT is the Samba Web Admin Tool. Use swat \\</span></span>
<span class="line"><span style="color:#758575;">#              to configure your Samba server. To use SWAT, \\</span></span>
<span class="line"><span style="color:#758575;">#              connect to port 901 with your favorite web browser.</span></span>
<span class="line"><span style="color:#DBD7CA;">service swat</span></span>
<span class="line"><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">        port            = 901</span></span>
<span class="line"><span style="color:#DBD7CA;">        socket_type     = stream</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#E0A569;">wait</span><span style="color:#DBD7CA;">            = no</span></span>
<span class="line"><span style="color:#DBD7CA;">        only_from       = 0.0.0.0    </span><span style="color:#758575;"># \u8868\u793A\u5141\u8BB8\u4EFB\u610Fip\u7684\u4E3B\u673A\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#DBD7CA;">        user            = root</span></span>
<span class="line"><span style="color:#DBD7CA;">        server          = /usr/sbin/swat</span></span>
<span class="line"><span style="color:#DBD7CA;">        log_on_failure  += USERID</span></span>
<span class="line"><span style="color:#DBD7CA;">        disable         = no    </span><span style="color:#758575;"># \u628A\u8BE5\u9879\u6539\u4E3Ano \uFF0C\u4EE3\u8868\u542F\u7528swat \u529F\u80FD</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#758575;">####</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u7F16\u8F91/etc/xinetd.d/swat\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A0ADA0;">#### </span></span>
<span class="line"><span style="color:#A0ADA0;"># default: off</span></span>
<span class="line"><span style="color:#A0ADA0;"># description: SWAT is the Samba Web Admin Tool. Use swat \\</span></span>
<span class="line"><span style="color:#A0ADA0;">#              to configure your Samba server. To use SWAT, \\</span></span>
<span class="line"><span style="color:#A0ADA0;">#              connect to port 901 with your favorite web browser.</span></span>
<span class="line"><span style="color:#393A34;">service swat</span></span>
<span class="line"><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        port            = 901</span></span>
<span class="line"><span style="color:#393A34;">        socket_type     = stream</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B58451;">wait</span><span style="color:#393A34;">            = no</span></span>
<span class="line"><span style="color:#393A34;">        only_from       = 0.0.0.0    </span><span style="color:#A0ADA0;"># \u8868\u793A\u5141\u8BB8\u4EFB\u610Fip\u7684\u4E3B\u673A\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#393A34;">        user            = root</span></span>
<span class="line"><span style="color:#393A34;">        server          = /usr/sbin/swat</span></span>
<span class="line"><span style="color:#393A34;">        log_on_failure  += USERID</span></span>
<span class="line"><span style="color:#393A34;">        disable         = no    </span><span style="color:#A0ADA0;"># \u628A\u8BE5\u9879\u6539\u4E3Ano \uFF0C\u4EE3\u8868\u542F\u7528swat \u529F\u80FD</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">####</span></span>
<span class="line"></span></code></pre></div><p>\u91CD\u542F<code>xinetd</code>\u670D\u52A1\u6765\u542F\u52A8<code>swat</code></p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">systemctl restart xinetd</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">systemctl restart xinetd</span></span>
<span class="line"></span></code></pre></div>`,54),o=[e];function c(t,r,i,y,A,d){return a(),n("div",null,o)}var D=s(p,[["render",c]]);export{b as __pageData,D as default};
