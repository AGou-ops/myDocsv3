import{_ as s,o as a,c as n,a as e}from"./app.1e6146c3.js";const b=JSON.parse('{"title":"Minikube Basic","description":"","frontmatter":{},"headers":[{"level":2,"title":"minikube \u7B80\u4ECB","slug":"minikube-\u7B80\u4ECB"},{"level":2,"title":"minikube \u5B89\u88C5\u4E0E\u542F\u52A8","slug":"minikube-\u5B89\u88C5\u4E0E\u542F\u52A8"},{"level":3,"title":"Windows \u7CFB\u7EDF\u4E0B","slug":"windows-\u7CFB\u7EDF\u4E0B"},{"level":3,"title":"Linux \u7CFB\u7EDF\u4E0B","slug":"linux-\u7CFB\u7EDF\u4E0B"},{"level":2,"title":"\u542F\u52A8 minikube","slug":"\u542F\u52A8-minikube"},{"level":3,"title":"Windows \u7CFB\u7EDF\u4E0B","slug":"windows-\u7CFB\u7EDF\u4E0B-1"},{"level":3,"title":"Linux\u7CFB\u7EDF\u4E0B","slug":"linux\u7CFB\u7EDF\u4E0B"},{"level":2,"title":"\u591A\u8282\u70B9Minikube","slug":"\u591A\u8282\u70B9minikube"},{"level":2,"title":"\u542F\u7528 DashBoard","slug":"\u542F\u7528-dashboard"},{"level":2,"title":"\u5E38\u7528\u547D\u4EE4","slug":"\u5E38\u7528\u547D\u4EE4"},{"level":2,"title":"\u5176\u4ED6","slug":"\u5176\u4ED6"},{"level":3,"title":"\u90E8\u7F72 minikube \u65F6\u51FA\u73B0* The \\"docker\\" driver should not be used with root privileges.:","slug":"\u90E8\u7F72-minikube-\u65F6\u51FA\u73B0-the-docker-driver-should-not-be-used-with-root-privileges"},{"level":3,"title":"Add new User","slug":"add-new-user"},{"level":3,"title":"Login to the newly created User","slug":"login-to-the-newly-created-user"},{"level":3,"title":"Add User to the Docker Group","slug":"add-user-to-the-docker-group"},{"level":2,"title":"\u53C2\u8003\u94FE\u63A5","slug":"\u53C2\u8003\u94FE\u63A5"}],"relativePath":"CloudNative/k8s/Minikube Basic.md","lastUpdated":1657272051000}'),l={name:"CloudNative/k8s/Minikube Basic.md"},p=e(`<h1 id="minikube-basic" tabindex="-1">Minikube Basic <a class="header-anchor" href="#minikube-basic" aria-hidden="true">#</a></h1><h2 id="minikube-\u7B80\u4ECB" tabindex="-1">minikube \u7B80\u4ECB <a class="header-anchor" href="#minikube-\u7B80\u4ECB" aria-hidden="true">#</a></h2><p>Minikube \u662F\u4E00\u79CD\u53EF\u4EE5\u8BA9\u60A8\u5728\u672C\u5730\u8F7B\u677E\u8FD0\u884C Kubernetes \u7684\u5DE5\u5177\u3002Minikube \u5728\u7B14\u8BB0\u672C\u7535\u8111\u4E0A\u7684\u865A\u62DF\u673A\uFF08VM\uFF09\u4E2D\u8FD0\u884C\u5355\u8282\u70B9 Kubernetes \u96C6\u7FA4\uFF0C\u4F9B\u90A3\u4E9B\u5E0C\u671B\u5C1D\u8BD5 Kubernetes \u6216\u8FDB\u884C\u65E5\u5E38\u5F00\u53D1\u7684\u7528\u6237\u4F7F\u7528\u3002</p><h2 id="minikube-\u5B89\u88C5\u4E0E\u542F\u52A8" tabindex="-1">minikube \u5B89\u88C5\u4E0E\u542F\u52A8 <a class="header-anchor" href="#minikube-\u5B89\u88C5\u4E0E\u542F\u52A8" aria-hidden="true">#</a></h2><h3 id="windows-\u7CFB\u7EDF\u4E0B" tabindex="-1">Windows \u7CFB\u7EDF\u4E0B <a class="header-anchor" href="#windows-\u7CFB\u7EDF\u4E0B" aria-hidden="true">#</a></h3><p>\u5728<code>windows</code>\u64CD\u4F5C\u7CFB\u7EDF\u4E0B, \u4F7F\u7528<code>choco</code>\u5305\u7BA1\u7406\u5668\u8FDB\u884C\u5FEB\u901F\u5B89\u88C5.</p><div class="language-powershell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#758575;"># \u5B89\u88C5 choco \u5305\u7BA1\u7406\u5668, \u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u6253\u5F00 powershell, \u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4.</span></span>
<span class="line"><span style="color:#DBD7CA;">PS C:\\Users\\Administrator</span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">Set-ExecutionPolicy</span><span style="color:#DBD7CA;"> Bypass </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CA;">Scope </span><span style="color:#4D9375;">Process</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CA;">Force</span><span style="color:#858585;">;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#CB7676;">System.Net.ServicePointManager</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">::SecurityProtocol </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#CB7676;">System.Net.ServicePointManager</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;">::SecurityProtocol </span><span style="color:#CB7676;">-bor</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">3072</span><span style="color:#858585;">;</span><span style="color:#DBD7CA;"> iex </span><span style="color:#858585;">((</span><span style="color:#E0A569;">New-Object</span><span style="color:#DBD7CA;"> System.Net.WebClient</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;">.DownloadString</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&#39;https://chocolatey.org/install.ps1&#39;</span><span style="color:#858585;">))</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u5B89\u88C5 choco \u5305\u7BA1\u7406\u5668, \u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u6253\u5F00 powershell, \u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4.</span></span>
<span class="line"><span style="color:#393A34;">PS C:\\Users\\Administrator</span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B58451;">Set-ExecutionPolicy</span><span style="color:#393A34;"> Bypass </span><span style="color:#AB5959;">-</span><span style="color:#393A34;">Scope </span><span style="color:#1C6B48;">Process</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;">Force</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#AB5959;">System.Net.ServicePointManager</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">::SecurityProtocol </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#AB5959;">System.Net.ServicePointManager</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;">::SecurityProtocol </span><span style="color:#AB5959;">-bor</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3072</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> iex </span><span style="color:#8E8F8B;">((</span><span style="color:#B58451;">New-Object</span><span style="color:#393A34;"> System.Net.WebClient</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;">.DownloadString</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&#39;https://chocolatey.org/install.ps1&#39;</span><span style="color:#8E8F8B;">))</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5B89\u88C5-kubectl" tabindex="-1">\u5B89\u88C5 kubectl <a class="header-anchor" href="#\u5B89\u88C5-kubectl" aria-hidden="true">#</a></h4><p>\u8BF7\u786E\u4FDD\u4F60\u5DF2\u6B63\u786E\u5B89\u88C5 kubectl\u3002\u60A8\u53EF\u4EE5\u6839\u636E<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-on-windows" target="_blank" rel="noopener noreferrer">\u5B89\u88C5\u5E76\u8BBE\u7F6E kubectl</a> \u7684\u8BF4\u660E\u6765\u5B89\u88C5 kubectl\u3002</p><h4 id="\u5B89\u88C5-hypervisor" tabindex="-1">\u5B89\u88C5 Hypervisor <a class="header-anchor" href="#\u5B89\u88C5-hypervisor" aria-hidden="true">#</a></h4><p>\u5982\u679C\u4F60\u8FD8\u6CA1\u6709\u5B89\u88C5 hypervisor\uFF0C\u8BF7\u9009\u62E9\u4EE5\u4E0B\u65B9\u5F0F\u4E4B\u4E00\u8FDB\u884C\u5B89\u88C5\uFF1A</p><p>\u2022 <a href="https://msdn.microsoft.com/en-us/virtualization/hyperv_on_windows/quick_start/walkthrough_install" target="_blank" rel="noopener noreferrer">Hyper-V</a></p><p>\u2022 <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">VirtualBox</a></p><blockquote><p><strong>\u8BF4\u660E\uFF1A</strong></p><p>Hyper-V \u53EF\u4EE5\u8FD0\u884C\u5728\u4E09\u4E2A\u7248\u672C\u7684 Windows 10 \u4E0A\uFF1A\u4F01\u4E1A\u7248\u3001\u4E13\u4E1A\u7248\u548C\u6559\u80B2\u7248\uFF08Enterprise, Professional, Education\uFF09\u3002</p></blockquote><h4 id="\u4F7F\u7528-chocolatey-\u5B89\u88C5-minikube" tabindex="-1">\u4F7F\u7528 Chocolatey \u5B89\u88C5 Minikube <a class="header-anchor" href="#\u4F7F\u7528-chocolatey-\u5B89\u88C5-minikube" aria-hidden="true">#</a></h4><p>Windows \u5B89\u88C5 Minikube \u6700\u7B80\u5355\u7684\u65B9\u6CD5\u662F\u4F7F\u7528 <a href="https://chocolatey.org/" target="_blank" rel="noopener noreferrer">Chocolatey</a> \uFF08\u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u8FD0\u884C\uFF09\uFF1A</p><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">choco install minikube</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">choco install minikube</span></span>
<span class="line"></span></code></pre></div><p>\u5B8C\u6210 Minikube \u7684\u5B89\u88C5\u540E\uFF0C\u5173\u95ED\u5F53\u524D CLI \u754C\u9762\u518D\u91CD\u65B0\u6253\u5F00\u3002 Minikube \u5E94\u8BE5\u5DF2\u7ECF\u81EA\u52A8\u6DFB\u52A0\u81F3 path \u4E2D\u3002</p><h4 id="\u4F7F\u7528\u5B89\u88C5\u7A0B\u5E8F\u5B89\u88C5-minikube" tabindex="-1">\u4F7F\u7528\u5B89\u88C5\u7A0B\u5E8F\u5B89\u88C5 Minikube <a class="header-anchor" href="#\u4F7F\u7528\u5B89\u88C5\u7A0B\u5E8F\u5B89\u88C5-minikube" aria-hidden="true">#</a></h4><p>\u5728 Windows \u4E0A\u4F7F\u7528 <a href="https://docs.microsoft.com/en-us/windows/desktop/msi/windows-installer-portal" target="_blank" rel="noopener noreferrer">Windows Installer</a> \u624B\u52A8\u5B89\u88C5 Minikube\uFF0C\u4E0B\u8F7D\u5E76\u8FD0\u884C <a href="https://github.com/kubernetes/minikube/releases/latest/download/minikube-installer.exe" target="_blank" rel="noopener noreferrer"><code>minikube-installer.exe</code></a> \u5373\u53EF\u3002</p><h4 id="\u76F4\u63A5\u4E0B\u8F7D\u5E76\u5B89\u88C5-minikube" tabindex="-1">\u76F4\u63A5\u4E0B\u8F7D\u5E76\u5B89\u88C5 Minikube <a class="header-anchor" href="#\u76F4\u63A5\u4E0B\u8F7D\u5E76\u5B89\u88C5-minikube" aria-hidden="true">#</a></h4><p>Run kubectl version to verify that the version you\u2019ve installed is sufficiently up-to-date.</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">kubectl version</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">kubectl version</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h3 id="linux-\u7CFB\u7EDF\u4E0B" tabindex="-1">Linux \u7CFB\u7EDF\u4E0B <a class="header-anchor" href="#linux-\u7CFB\u7EDF\u4E0B" aria-hidden="true">#</a></h3><p>\u8FD9\u91CC\u6211\u4EE5<code>Ubuntu 20.04</code>\u4E3A\u4F8B\uFF0C\u9996\u5148\u8FD0\u884C\u4E0B\u9762\u7684<code>grep</code>\u547D\u4EE4\u6765\u9A8C\u8BC1\u60A8\u7684\u5904\u7406\u5668\u652F\u6301\u786C\u4EF6\u865A\u62DF\u5316\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">grep -Eoc </span><span style="color:#C98A7D;">&#39;(vmx|svm)&#39;</span><span style="color:#DBD7CA;"> /proc/cpuinfo</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">grep -Eoc </span><span style="color:#B56959;">&#39;(vmx|svm)&#39;</span><span style="color:#393A34;"> /proc/cpuinfo</span></span>
<span class="line"></span></code></pre></div><p>\u68C0\u67E5<em><strong>BIOS\u7684VT\u662F\u5426\u5F00\u542F</strong></em>\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u5DE5\u5177\u8FDB\u884C\u68C0\u6D4B\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">sudo apt update</span></span>
<span class="line"><span style="color:#DBD7CA;">sudo apt install cpu-checker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># \u5B89\u88C5\u5B8C\u6BD5\u4E4B\u540E\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8FDB\u884C\u68C0\u67E5</span></span>
<span class="line"><span style="color:#DBD7CA;">$ kvm-ok</span></span>
<span class="line"><span style="color:#DBD7CA;">INFO: /dev/kvm exists</span></span>
<span class="line"><span style="color:#DBD7CA;">KVM acceleration can be used</span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CA;">/pre</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">sudo apt update</span></span>
<span class="line"><span style="color:#393A34;">sudo apt install cpu-checker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># \u5B89\u88C5\u5B8C\u6BD5\u4E4B\u540E\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8FDB\u884C\u68C0\u67E5</span></span>
<span class="line"><span style="color:#393A34;">$ kvm-ok</span></span>
<span class="line"><span style="color:#393A34;">INFO: /dev/kvm exists</span></span>
<span class="line"><span style="color:#393A34;">KVM acceleration can be used</span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;">/pre</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u5B89\u88C5<code>kvm</code>\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virtinst virt-manager -y</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virtinst virt-manager -y</span></span>
<span class="line"></span></code></pre></div><p>\u5B89\u88C5\u5B8C\u6210\u4E4B\u540E\uFF0C\u8FD0\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">sudo systemctl is-active libvirtd</span></span>
<span class="line"><span style="color:#DBD7CA;">virt-host-validate			</span><span style="color:#758575;"># \u65E0\u62A5\u9519\u5373\u53EF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">sudo usermod -aG libvirt </span><span style="color:#858585;">$</span><span style="color:#B8A965;">USER</span></span>
<span class="line"><span style="color:#DBD7CA;">sudo usermod -aG kvm </span><span style="color:#858585;">$</span><span style="color:#B8A965;">USER</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">sudo systemctl is-active libvirtd</span></span>
<span class="line"><span style="color:#393A34;">virt-host-validate			</span><span style="color:#A0ADA0;"># \u65E0\u62A5\u9519\u5373\u53EF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">sudo usermod -aG libvirt </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">USER</span></span>
<span class="line"><span style="color:#393A34;">sudo usermod -aG kvm </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">USER</span></span>
<span class="line"></span></code></pre></div><p>\u542F\u52A8<code>minikube</code>\u4E4B\u524D\uFF0C\u5148\u83B7\u53D6<code>minikube</code><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener noreferrer">\u4E8C\u8FDB\u5236\u5305</a>\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span></span>
<span class="line"><span style="color:#DBD7CA;">sudo install minikube-linux-amd64 /usr/local/bin/minikube</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span></span>
<span class="line"><span style="color:#393A34;">sudo install minikube-linux-amd64 /usr/local/bin/minikube</span></span>
<span class="line"></span></code></pre></div><h2 id="\u542F\u52A8-minikube" tabindex="-1">\u542F\u52A8 minikube <a class="header-anchor" href="#\u542F\u52A8-minikube" aria-hidden="true">#</a></h2><h3 id="windows-\u7CFB\u7EDF\u4E0B-1" tabindex="-1">Windows \u7CFB\u7EDF\u4E0B <a class="header-anchor" href="#windows-\u7CFB\u7EDF\u4E0B-1" aria-hidden="true">#</a></h3><p>\u5B8C\u6210\u4E4B\u540E\u8FD0\u884C\u542F\u52A8\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">$ minikube start --vm-driver=</span><span style="color:#C98A7D;">&quot;hyperv&quot;</span><span style="color:#DBD7CA;"> --memory=</span><span style="color:#C98A7D;">&#39;5g&#39;</span><span style="color:#DBD7CA;"> --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> Microsoft Windows 10 Pro 10.0.18363 Build 18363 \u4E0A\u7684 minikube v1.12.1</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> Automatically selected the hyperv driver</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> \u6B63\u5728\u4E0B\u8F7D VM boot image...</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> minikube-v1.12.0.iso.sha256: 65 B / 65 B </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;">-------------</span><span style="color:#858585;">]</span><span style="color:#DBD7CA;"> 100.00% </span><span style="color:#CB7676;">?</span><span style="color:#DBD7CA;"> p/s 0s</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> Starting control plane node minikube </span><span style="color:#4D9375;">in</span><span style="color:#DBD7CA;"> cluster minikube</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> Downloading Kubernetes v1.18.3 preload ...</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CA;"> preloaded-images-k8s-v4-v1.18.3-docker-overlay2-amd64.tar.lz4: 82.39 MiB</span></span>
<span class="line"><span style="color:#CB7676;">*</span><span style="color:#DBD7CA;"> Creating hyperv VM </span><span style="color:#858585;">(</span><span style="color:#DBD7CA;">CPUs=2, Memory=3000MB, Disk=20000MB</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> ...</span></span>
<span class="line"><span style="color:#DBD7CA;">...</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">$ minikube start --vm-driver=</span><span style="color:#B56959;">&quot;hyperv&quot;</span><span style="color:#393A34;"> --memory=</span><span style="color:#B56959;">&#39;5g&#39;</span><span style="color:#393A34;"> --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> Microsoft Windows 10 Pro 10.0.18363 Build 18363 \u4E0A\u7684 minikube v1.12.1</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> Automatically selected the hyperv driver</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> \u6B63\u5728\u4E0B\u8F7D VM boot image...</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> minikube-v1.12.0.iso.sha256: 65 B / 65 B </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;">-------------</span><span style="color:#8E8F8B;">]</span><span style="color:#393A34;"> 100.00% </span><span style="color:#AB5959;">?</span><span style="color:#393A34;"> p/s 0s</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> Starting control plane node minikube </span><span style="color:#1C6B48;">in</span><span style="color:#393A34;"> cluster minikube</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> Downloading Kubernetes v1.18.3 preload ...</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> preloaded-images-k8s-v4-v1.18.3-docker-overlay2-amd64.tar.lz4: 82.39 MiB</span></span>
<span class="line"><span style="color:#AB5959;">*</span><span style="color:#393A34;"> Creating hyperv VM </span><span style="color:#8E8F8B;">(</span><span style="color:#393A34;">CPUs=2, Memory=3000MB, Disk=20000MB</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> ...</span></span>
<span class="line"><span style="color:#393A34;">...</span></span>
<span class="line"></span></code></pre></div><p>\u7B49\u5F85\u955C\u50CF\u5305<code>minikube-v1.12.0.iso</code>\u4E0B\u8F7D\u5B8C\u6210\u5373\u53EF.</p><h3 id="linux\u7CFB\u7EDF\u4E0B" tabindex="-1">Linux\u7CFB\u7EDF\u4E0B <a class="header-anchor" href="#linux\u7CFB\u7EDF\u4E0B" aria-hidden="true">#</a></h3><p>Start a cluster using the kvm2 driver:</p><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube start --driver=kvm2 --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube start --driver=kvm2 --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers</span></span>
<span class="line"></span></code></pre></div><p>To make kvm2 the default driver:</p><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube config </span><span style="color:#E0A569;">set</span><span style="color:#DBD7CA;"> driver kvm2</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube config </span><span style="color:#B58451;">set</span><span style="color:#393A34;"> driver kvm2</span></span>
<span class="line"></span></code></pre></div><hr><p>\u4E00\u65E6 <code>minikube start</code> \u5B8C\u6210\uFF0C\u4F60\u53EF\u4EE5\u8FD0\u884C\u4E0B\u9762\u7684\u547D\u4EE4\u6765\u68C0\u67E5\u96C6\u7FA4\u7684\u72B6\u6001\uFF1A</p><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube status</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube status</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u7684\u96C6\u7FA4\u6B63\u5728\u8FD0\u884C\uFF0C<code>minikube status</code> \u7684\u8F93\u51FA\u7ED3\u679C\u5E94\u8BE5\u7C7B\u4F3C\u4E8E\u8FD9\u6837\uFF1A</p><div class="language-"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7ca;">host: Running</span></span>
<span class="line"><span style="color:#dbd7ca;">kubelet: Running</span></span>
<span class="line"><span style="color:#dbd7ca;">apiserver: Running</span></span>
<span class="line"><span style="color:#dbd7ca;">kubeconfig: Configured</span></span>
<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">host: Running</span></span>
<span class="line"><span style="color:#393a34;">kubelet: Running</span></span>
<span class="line"><span style="color:#393a34;">apiserver: Running</span></span>
<span class="line"><span style="color:#393a34;">kubeconfig: Configured</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>\u5728\u786E\u8BA4 Minikube \u4E0E hypervisor \u5747\u6B63\u5E38\u5DE5\u4F5C\u540E\uFF0C\u60A8\u53EF\u4EE5\u7EE7\u7EED\u4F7F\u7528 Minikube \u6216\u505C\u6B62\u96C6\u7FA4\u3002\u8981\u505C\u6B62\u96C6\u7FA4\uFF0C\u8BF7\u8FD0\u884C\uFF1A</p><div class="language-shell"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube stop</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube stop</span></span>
<span class="line"></span></code></pre></div><h2 id="\u591A\u8282\u70B9minikube" tabindex="-1">\u591A\u8282\u70B9Minikube <a class="header-anchor" href="#\u591A\u8282\u70B9minikube" aria-hidden="true">#</a></h2><p>\u524D\u63D0\u8981\u6C42\uFF1A</p><ul><li>minikube version &gt; 1.10.1</li><li>kubectl installed</li></ul><p>\u5F00\u59CB\u5427\uFF1A</p><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube start --nodes 2 -p multinode-demo</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube start --nodes 2 -p multinode-demo</span></span>
<span class="line"></span></code></pre></div><h2 id="\u542F\u7528-dashboard" tabindex="-1">\u542F\u7528 DashBoard <a class="header-anchor" href="#\u542F\u7528-dashboard" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube addons </span><span style="color:#E0A569;">enable</span><span style="color:#DBD7CA;"> dashboard</span></span>
<span class="line"><span style="color:#DBD7CA;">minikube dashboard</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube addons </span><span style="color:#B58451;">enable</span><span style="color:#393A34;"> dashboard</span></span>
<span class="line"><span style="color:#393A34;">minikube dashboard</span></span>
<span class="line"></span></code></pre></div><p>\u542F\u52A8\u5B8C\u6BD5\u4E4B\u540E, \u4F1A\u81EA\u52A8\u6253\u5F00\u6D4F\u89C8\u5668\u5E76\u8BBF\u95EE<code>Dashboard</code>.</p><p><img src="https://agou-images.oss-cn-qingdao.aliyuncs.com/blog-images/minikube/minikube-dashboard.png" alt=""></p><h2 id="\u5E38\u7528\u547D\u4EE4" tabindex="-1">\u5E38\u7528\u547D\u4EE4 <a class="header-anchor" href="#\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a></h2><ul><li><code>minikube start --driver=&lt;driver_name&gt;</code>: \u542F\u52A8minikube;</li><li><code>minikube status</code>: \u67E5\u770B minikube \u8FD0\u884C\u72B6\u6001;</li><li><code>minikube stop</code>: \u505C\u6B62\u8FD0\u884C minikube;</li><li><code>minikube delete</code>: \u5F53 minikube \u65E0\u6CD5\u8FD0\u884C\u6216\u8005\u60F3\u5B8C\u5168\u6E05\u7406\u6389 minikube \u65F6\u4F7F\u7528, \u7528\u6765\u5220\u9664 minikube.</li><li><code>minikube service --url &lt;service-name&gt; </code>\uFF1A\u66B4\u9732NodePort\u5230\u672C\u673A\u672C\u5730\u5730\u5740\uFF1B</li><li><code>minikube tunnel</code>\uFF1A\u66B4\u9732LoadBalancer\u5230\u672C\u673A\u672C\u5730\u5730\u5740\uFF1B</li></ul><h2 id="\u5176\u4ED6" tabindex="-1">\u5176\u4ED6 <a class="header-anchor" href="#\u5176\u4ED6" aria-hidden="true">#</a></h2><h3 id="\u90E8\u7F72-minikube-\u65F6\u51FA\u73B0-the-docker-driver-should-not-be-used-with-root-privileges" tabindex="-1">\u90E8\u7F72 minikube \u65F6\u51FA\u73B0<code>* The &quot;docker&quot; driver should not be used with root privileges.</code>: <a class="header-anchor" href="#\u90E8\u7F72-minikube-\u65F6\u51FA\u73B0-the-docker-driver-should-not-be-used-with-root-privileges" aria-hidden="true">#</a></h3><p>\u89E3\u51B3\u65B9\u6CD5\uFF1A</p><blockquote><h3 id="add-new-user" tabindex="-1">Add new User <a class="header-anchor" href="#add-new-user" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">adduser developer</span></span>
<span class="line"><span style="color:#758575;"># password@7</span></span>
<span class="line"><span style="color:#DBD7CA;">usermod -aG sudo developer</span></span>
<span class="line"><span style="color:#DBD7CA;">su - developer</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">adduser developer</span></span>
<span class="line"><span style="color:#A0ADA0;"># password@7</span></span>
<span class="line"><span style="color:#393A34;">usermod -aG sudo developer</span></span>
<span class="line"><span style="color:#393A34;">su - developer</span></span>
<span class="line"></span></code></pre></div><h3 id="login-to-the-newly-created-user" tabindex="-1">Login to the newly created User <a class="header-anchor" href="#login-to-the-newly-created-user" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">su - developer</span></span>
<span class="line"><span style="color:#758575;"># password@7</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">su - developer</span></span>
<span class="line"><span style="color:#A0ADA0;"># password@7</span></span>
<span class="line"></span></code></pre></div><h3 id="add-user-to-the-docker-group" tabindex="-1">Add User to the Docker Group <a class="header-anchor" href="#add-user-to-the-docker-group" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">sudo groupadd docker</span></span>
<span class="line"><span style="color:#DBD7CA;">sudo usermod -aG docker </span><span style="color:#858585;">$</span><span style="color:#B8A965;">USER</span></span>
<span class="line"><span style="color:#DBD7CA;">- Re-Login or Restart the Server</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">sudo groupadd docker</span></span>
<span class="line"><span style="color:#393A34;">sudo usermod -aG docker </span><span style="color:#8E8F8B;">$</span><span style="color:#8C862B;">USER</span></span>
<span class="line"><span style="color:#393A34;">- Re-Login or Restart the Server</span></span>
<span class="line"></span></code></pre></div><h4 id="install-minicube" tabindex="-1">Install Minicube <a class="header-anchor" href="#install-minicube" aria-hidden="true">#</a></h4><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span></span>
<span class="line"><span style="color:#DBD7CA;">chmod +x minikube</span></span>
<span class="line"><span style="color:#DBD7CA;">mv ./minikube /usr/local/bin/minikube</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span></span>
<span class="line"><span style="color:#393A34;">chmod +x minikube</span></span>
<span class="line"><span style="color:#393A34;">mv ./minikube /usr/local/bin/minikube</span></span>
<span class="line"></span></code></pre></div><h4 id="start-minikube-with-docker-driver" tabindex="-1">Start minikube with Docker Driver <a class="header-anchor" href="#start-minikube-with-docker-driver" aria-hidden="true">#</a></h4><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">minikube start --driver=docker</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">minikube start --driver=docker</span></span>
<span class="line"></span></code></pre></div><h4 id="verify-minikube-installation" tabindex="-1">Verify minikube Installation <a class="header-anchor" href="#verify-minikube-installation" aria-hidden="true">#</a></h4><div class="language-bash"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">docker ps</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">docker ps</span></span>
<span class="line"></span></code></pre></div></blockquote><p>\u53C2\u8003\u6765\u6E90\uFF1A<a href="https://github.com/kubernetes/minikube/issues/7903#issuecomment-624074810" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/minikube/issues/7903#issuecomment-624074810</a></p><h2 id="\u53C2\u8003\u94FE\u63A5" tabindex="-1">\u53C2\u8003\u94FE\u63A5 <a class="header-anchor" href="#\u53C2\u8003\u94FE\u63A5" aria-hidden="true">#</a></h2><ul><li>minikube installation: <a href="https://kubernetes.io/zh/docs/tasks/tools/install-minikube/#%E5%AE%89%E8%A3%85-minikube" target="_blank" rel="noopener noreferrer">https://kubernetes.io/zh/docs/tasks/tools/install-minikube/#\u5B89\u88C5-minikube</a></li><li><a href="https://kubernetes.io/docs/setup/learning-environment/minikube/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/setup/learning-environment/minikube/</a></li><li>minikube \u4EE3\u7406\u76F8\u5173: <a href="https://minikube.sigs.k8s.io/docs/handbook/vpn_and_proxy/" target="_blank" rel="noopener noreferrer">https://minikube.sigs.k8s.io/docs/handbook/vpn_and_proxy/</a></li></ul>`,69),o=[p];function i(r,c,t,d,u,y){return a(),n("div",null,o)}var k=s(l,[["render",i]]);export{b as __pageData,k as default};
