import{_ as s,o as n,c as a,a as l}from"./app.1e6146c3.js";const C=JSON.parse('{"title":"Ansible Modules","description":"","frontmatter":{},"headers":[],"relativePath":"LinuxBasics/Ansible/Ansible modules.md","lastUpdated":1657272051000}'),p={name:"LinuxBasics/Ansible/Ansible modules.md"},o=l(`<h1 id="ansible-modules" tabindex="-1">Ansible Modules <a class="header-anchor" href="#ansible-modules" aria-hidden="true">#</a></h1><ul><li><code>fileglob</code>: \u663E\u793A\u6587\u4EF6\u5939\u4E2D\u7684\u6307\u5B9A\u6587\u4EF6</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">show all test* file in /home/suofeiya/tmp floder</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">msg=&quot;\u3010\u3010lookup(&#39;fileglob&#39;,&#39;/home/suofeiya/tmp/test*&#39;)\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#758575;"># \u5229\u7528fileglob\u7B5B\u9009\u51FA\u6765\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">copy /home/suofeiya/tmp all files to /tmp</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">copy</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">src</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u3010\u3010item\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">dest</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;/tmp&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">owner</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">suofeiya</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">mode</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">600</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">with_fileglob</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;/home/suofeiya/tmp/test*&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">show all test* file in /home/suofeiya/tmp floder</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">msg=&quot;\u3010\u3010lookup(&#39;fileglob&#39;,&#39;/home/suofeiya/tmp/test*&#39;)\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5229\u7528fileglob\u7B5B\u9009\u51FA\u6765\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">copy /home/suofeiya/tmp all files to /tmp</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">copy</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">src</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u3010\u3010item\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">dest</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;/tmp&quot;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">owner</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">suofeiya</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">mode</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">600</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">with_fileglob</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;/home/suofeiya/tmp/test*&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li><code>mysql_user</code>: \u589E\u5220\u7528\u6237\u53CA\u6388\u6743mysql\u6570\u636E\u5E93</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">connect to mySQL and add User for mySQL</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">mysql_user</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">login_host</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">192.168.43.37</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">login_port</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">3306</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">login_user</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">root</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">login_password</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">123</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u3010\u3010 item[0] \u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">priv</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;\u3010\u3010 item[1] \u3011\u3011.*:ALL&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">append_privs</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">yes</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">password</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">state</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">absent</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">with_nested</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;user1&#39;</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;user2&#39;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">[</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;test&#39;</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;test1&#39;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">]</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">connect to mySQL and add User for mySQL</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">mysql_user</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">login_host</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">192.168.43.37</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">login_port</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3306</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">login_user</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">root</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">login_password</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">123</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u3010\u3010 item[0] \u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">priv</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;\u3010\u3010 item[1] \u3011\u3011.*:ALL&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">append_privs</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">yes</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">password</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">state</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">absent</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">with_nested</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;user1&#39;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;user2&#39;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">[</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;test&#39;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;test1&#39;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">]</span></span>
<span class="line"></span></code></pre></div><ul><li>\u904D\u5386<code>vars</code></li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Show value of &#39;variablename&#39;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">msg=&quot;\u3010\u3010 lookup(&#39;vars&#39;, item) \u3011\u3011 -- sub-variable is \u3010\u3010lookup(&#39;vars&#39;,&#39;test2&#39;).sub_test2\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">ignore_errors</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">True</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">vars</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">test1</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">hello vars.test1</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">test2</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">sub_test2</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">hello vars.test2.sub_test2</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">loop</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">test1</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Show value of &#39;variablename&#39;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">msg=&quot;\u3010\u3010 lookup(&#39;vars&#39;, item) \u3011\u3011 -- sub-variable is \u3010\u3010lookup(&#39;vars&#39;,&#39;test2&#39;).sub_test2\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">ignore_errors</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">True</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">vars</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">test1</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">hello vars.test1</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">test2</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">sub_test2</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">hello vars.test2.sub_test2</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">loop</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">test1</span></span>
<span class="line"></span></code></pre></div><ul><li><code>apt</code>&amp;<code>apt_key</code>&amp;<code>apt_repository</code>\u76F8\u5173</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Install a list of packages</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">pkg</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">foo</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">foo-tools</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Update all packages to their latest version</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;*&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">state</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">latest</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Upgrade the OS (apt-get dist-upgrade)</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">upgrade</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">dist</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Install a .deb package</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">deb</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/tmp/mypackage.deb</span></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;"># install a deb package form internet</span></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;"># deb: https://example.com/python-ppq_0.1-1_all.deb</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># apt_key</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Add an Apt signing key, uses whichever key is at the URL</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt_key</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">url</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">https://ftp-master.debian.org/keys/archive-key-6.0.asc</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">state</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">present</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575;"># apt_repository</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Add specified repository into sources list</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt_repository</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">repo</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">deb http://archive.canonical.com/ubuntu hardy partner</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">state</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">present</span></span>
<span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Add nginx stable repository from PPA and install its signing key on Ubuntu target</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">apt_repository</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">repo</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">ppa:nginx/stable</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Install a list of packages</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">pkg</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">foo</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">foo-tools</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Update all packages to their latest version</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;*&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">state</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">latest</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Upgrade the OS (apt-get dist-upgrade)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">upgrade</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">dist</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Install a .deb package</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">deb</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/tmp/mypackage.deb</span></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;"># install a deb package form internet</span></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;"># deb: https://example.com/python-ppq_0.1-1_all.deb</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># apt_key</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Add an Apt signing key, uses whichever key is at the URL</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt_key</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">url</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">https://ftp-master.debian.org/keys/archive-key-6.0.asc</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">state</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">present</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># apt_repository</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Add specified repository into sources list</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt_repository</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">repo</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">deb http://archive.canonical.com/ubuntu hardy partner</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">state</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">present</span></span>
<span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Add nginx stable repository from PPA and install its signing key on Ubuntu target</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">apt_repository</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">repo</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ppa:nginx/stable</span></span>
<span class="line"></span></code></pre></div><ul><li><code>assemble</code>\u7EC4\u5408\u591A\u4E2A\u6587\u4EF6\u5185\u5BB9\u5230\u4E00\u4E2A\u6587\u4EF6, \u5E76\u4F7F\u7528\u9A8C\u8BC1\u547D\u4EE4\u8FDB\u884C\u9A8C\u8BC1</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Assemble a new &quot;sshd_config&quot; file into place, after passing validation with sshd</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">assemble</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">src</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/etc/ssh/conf.d/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">dest</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">validate</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/usr/sbin/sshd -t -f %s</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Assemble a new &quot;sshd_config&quot; file into place, after passing validation with sshd</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">assemble</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">src</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/etc/ssh/conf.d/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">dest</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">validate</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/usr/sbin/sshd -t -f %s</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u4F7F\u7528\u8BE5\u547D\u4EE4\u65F6, \u76EE\u6807\u6587\u4EF6\u5C06\u88AB\u6E05\u7A7A\u5E76\u66FF\u6362\u4E3A\u7EC4\u5408\u6587\u4EF6\u7684\u5185\u5BB9.</p></blockquote><ul><li><code>blockinfile</code></li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Insert/Update &quot;Match User&quot; configuration block in /etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">blockinfile</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">path</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/home/suofeiya/ansible_workspace/index.html</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">marker</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&lt;!-- {mark} ANSIBLE MANAGED BLOCK --&gt;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">insertafter</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&lt;body&gt;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">block</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">|</span></span>
<span class="line"><span style="color:#C98A7D;">        &lt;h1&gt;Welcome to \u3010\u3010 ansible_hostname \u3011\u3011&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#C98A7D;">        &lt;p&gt;Last updated on \u3010\u3010 ansible_date_time.iso8601 \u3011\u3011&lt;/p&gt;</span></span>
<span class="line"><span style="color:#C98A7D;">      </span></span>
<span class="line"><span style="color:#858585;">      </span><span style="color:#758575;"># block: &quot;\u3010\u3010 lookup(&#39;file&#39;, &#39;./local/sshd_config&#39;) \u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#858585;">      </span><span style="color:#758575;"># validate: /usr/sbin/sshd -T -f %s</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span></span>
<span class="line"><span style="color:#858585;">      </span><span style="color:#758575;"># clear block</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">marker</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&lt;!-- {mark} ANSIBLE MANAGED BLOCK --&gt;&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">block</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Insert/Update &quot;Match User&quot; configuration block in /etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">blockinfile</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">path</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/home/suofeiya/ansible_workspace/index.html</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">marker</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&lt;!-- {mark} ANSIBLE MANAGED BLOCK --&gt;&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">insertafter</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&lt;body&gt;&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">block</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">|</span></span>
<span class="line"><span style="color:#B56959;">        &lt;h1&gt;Welcome to \u3010\u3010 ansible_hostname \u3011\u3011&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#B56959;">        &lt;p&gt;Last updated on \u3010\u3010 ansible_date_time.iso8601 \u3011\u3011&lt;/p&gt;</span></span>
<span class="line"><span style="color:#B56959;">      </span></span>
<span class="line"><span style="color:#8E8F8B;">      </span><span style="color:#A0ADA0;"># block: &quot;\u3010\u3010 lookup(&#39;file&#39;, &#39;./local/sshd_config&#39;) \u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#8E8F8B;">      </span><span style="color:#A0ADA0;"># validate: /usr/sbin/sshd -T -f %s</span></span>
<span class="line"><span style="color:#393A34;">      </span></span>
<span class="line"><span style="color:#8E8F8B;">      </span><span style="color:#A0ADA0;"># clear block</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">marker</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&lt;!-- {mark} ANSIBLE MANAGED BLOCK --&gt;&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">block</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li><code>expect</code>\u81EA\u52A8\u56DE\u590D\u4EA4\u4E92\u5F0F\u547D\u4EE4(Ubuntu\u4E0B\u6D4B\u8BD5\u65E0\u6548)</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Case insensitive password string match</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">expect</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">command</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">passwd username</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">responses</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">(?i)password</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;MySekretPa$$word&quot;</span></span>
<span class="line"><span style="color:#858585;">  </span><span style="color:#758575;"># you don&#39;t want to show passwords in your logs</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">no_log</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">true</span></span>
<span class="line"><span style="color:#758575;"># \u56DE\u590D\u591A\u4E2A</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">responses</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">Question</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">response1</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">response2</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">response3</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Case insensitive password string match</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">expect</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">command</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">passwd username</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">responses</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">(?i)password</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;MySekretPa$$word&quot;</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;"># you don&#39;t want to show passwords in your logs</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">no_log</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">true</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u56DE\u590D\u591A\u4E2A</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">responses</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">Question</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">response1</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">response2</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">response3</span></span>
<span class="line"></span></code></pre></div><ul><li><code>fail</code>:\u81EA\u5B9A\u4E49\u9519\u8BEF\u4FE1\u606F</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Using fail message.</span></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;"># you don&#39;t want to show passwords in your logs</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">fail</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">msg</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;you are not the one we are lookin for...&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">when</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">name != &quot;agou&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">vars</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">agou-ops</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Using fail message.</span></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;"># you don&#39;t want to show passwords in your logs</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">fail</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">msg</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;you are not the one we are lookin for...&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">when</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">name != &quot;agou&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">vars</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">agou-ops</span></span>
<span class="line"></span></code></pre></div><ul><li><code>fetch</code>: \u4ECE\u8FDC\u7A0B\u4E3B\u673A\u83B7\u53D6\u6587\u4EF6</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Specifying a destination path</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">fetch</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">src</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/tmp/uniquefile</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">dest</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/tmp/special/</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">flat</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">yes</span><span style="color:#DBD7CA;">		</span><span style="color:#758575;"># \u533A\u5206\u8DEF\u5F84\u6700\u540E\u7684\u90A3\u4E2A\`/\`</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Specifying a destination path</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">fetch</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">src</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/tmp/uniquefile</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">dest</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/tmp/special/</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">flat</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">yes</span><span style="color:#393A34;">		</span><span style="color:#A0ADA0;"># \u533A\u5206\u8DEF\u5F84\u6700\u540E\u7684\u90A3\u4E2A\`/\`</span></span>
<span class="line"></span></code></pre></div><ul><li><code>get_url</code>: \u4ECEhttp,https,ftp\u83B7\u53D6\u6587\u4EF6</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Download file with check (sha256)</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">get_url</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">url</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">http://example.com/path/file.conf</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">dest</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/etc/foo.conf</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">mode</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;0440&#39;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">checksum</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">sha256:b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Download file with check (sha256)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">get_url</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">url</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">http://example.com/path/file.conf</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">dest</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/etc/foo.conf</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">mode</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;0440&#39;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">checksum</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">sha256:b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c</span></span>
<span class="line"></span></code></pre></div><ul><li><code>git</code>: \u514B\u9686\u4ED3\u5E93</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Create git archive from repo</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">git</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">repo</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">https://github.com/ansible/ansible-examples.git</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">dest</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/src/ansible-examples</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">version</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">release-0.22</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">archive</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/tmp/ansible-examples.zip</span></span>
<span class="line"><span style="color:#858585;">    </span><span style="color:#758575;"># separate_git_dir: /src/ansible-examples.git</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">    </span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Create git archive from repo</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">git</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">repo</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">https://github.com/ansible/ansible-examples.git</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">dest</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/src/ansible-examples</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">version</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">release-0.22</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">archive</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/tmp/ansible-examples.zip</span></span>
<span class="line"><span style="color:#8E8F8B;">    </span><span style="color:#A0ADA0;"># separate_git_dir: /src/ansible-examples.git</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span></span>
<span class="line"></span></code></pre></div><ul><li><code>random_choice</code>: \u968F\u673A\u9009\u62E9</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">return a random list choice</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">msg=&quot;your random choice is:\u3010\u3010item\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">with_random_choice</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;go through the door&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;drink from the goblet&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;press the red button&quot;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;do nothing&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">return a random list choice</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">msg=&quot;your random choice is:\u3010\u3010item\u3011\u3011&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">with_random_choice</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;go through the door&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;drink from the goblet&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;press the red button&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;do nothing&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li><code>block</code>: \u66F4\u597D\u7684\u7EC4\u7EC7playbook, \u5904\u7406\u4EFB\u52A1\u8FC7\u7A0B\u4E4B\u4E2D\u7684\u5F02\u5E38\u548C\u9519\u8BEF</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Attempt and graceful roll back demo</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">block</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Print a message</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">msg</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;I execute normally&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Force a failure</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">command</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">/bin/false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Never print this</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">msg</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;I never execute, due to the above task failing, :-(&#39;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">when</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">ansible_facts[&#39;distribution&#39;] == &#39;CentOS&#39;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">become</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">true</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">become_user</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">root</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">ignore_errors</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">yes</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">rescue</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Print when errors</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">meta</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">flush_handlers</span><span style="color:#DBD7CA;">      </span><span style="color:#758575;"># \u5373\u4F7F\u5F53\u9519\u8BEF\u51FA\u73B0\uFF0C\u4E5F\u8981\u7EE7\u7EED\u8FD0\u884C</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">msg</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;I caught an error&#39;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#429988;">always</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">Always do this</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">debug</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">        </span><span style="color:#429988;">msg</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;This always executes&quot;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Attempt and graceful roll back demo</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">block</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Print a message</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">msg</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;I execute normally&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Force a failure</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">command</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/bin/false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Never print this</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">msg</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;I never execute, due to the above task failing, :-(&#39;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">when</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ansible_facts[&#39;distribution&#39;] == &#39;CentOS&#39;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">become</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">true</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">become_user</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">root</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">ignore_errors</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">yes</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">rescue</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Print when errors</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">meta</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">flush_handlers</span><span style="color:#393A34;">      </span><span style="color:#A0ADA0;"># \u5373\u4F7F\u5F53\u9519\u8BEF\u51FA\u73B0\uFF0C\u4E5F\u8981\u7EE7\u7EED\u8FD0\u884C</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">msg</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;I caught an error&#39;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#2F8A89;">always</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Always do this</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">debug</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#2F8A89;">msg</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;This always executes&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li><code>uri</code>: \u670D\u52A1\u72B6\u6001\u68C0\u67E5</li></ul><div class="language-yaml"><span class="copy"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">-</span><span style="color:#DBD7CA;"> </span><span style="color:#429988;">name</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">check service status</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">uri</span><span style="color:#858585;">:</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">url</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">http://127.0.0.1</span></span>
<span class="line"><span style="color:#DBD7CA;">      </span><span style="color:#429988;">return_content</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">yes</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">register</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">result</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">until</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&#39;&quot;???&quot; in result.content&#39;</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">retries</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">10</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#429988;">delay</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">1</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">-</span><span style="color:#393A34;"> </span><span style="color:#2F8A89;">name</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">check service status</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">uri</span><span style="color:#8E8F8B;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">url</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">http://127.0.0.1</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#2F8A89;">return_content</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">yes</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">register</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">result</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">until</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&#39;&quot;???&quot; in result.content&#39;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">retries</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">10</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#2F8A89;">delay</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span></span>
<span class="line"></span></code></pre></div>`,30),e=[o];function c(t,r,y,A,i,D){return n(),a("div",null,e)}var d=s(p,[["render",c]]);export{C as __pageData,d as default};
